var mainHtml,body,headerBox,topMenu,mainBox,sidebar,content,wrapper,mobileToggle,appendAccount,appendLoggedas,topMenuList,_this,mobileButton,mainMenuG,doneData="hasDatepicker",selectDone="select-done",tooltipCl="start-tooltip",ascroll="autoscroll-done",clSidebar="open-sidebar",clMainMenu="big-menu",speedAnim=500,speedAnimHover=200,tooltipFlag=!1,sidebarFlag=!1,mainMenuFlag=!1,mainMenuFlagTop=!1,mainMenuFlagTopC=!1,topMenuFlag=!1,searchFlag=!1,openCl="open",clMaqin="has-main-menu",clActive="active",clMainMenuTop=!1;jQuery.when(jQuery.ready).then((function(){mainHtml=$("html"),body=$("body"),wrapper=body.find("#wrapper"),content=body.find("#content"),mainBox=body.find("#main"),sidebar=body.find("#sidebar"),headerBox=body.find("#header"),topMenu=body.find("#top-menu"),topMenuList=topMenu.find("> ul"),appendAccount=topMenu.find("#account"),appendLoggedas=topMenu.find("#loggedas"),mainMenuG=body.find("#header #main-menu, #sidebar #admin-menu"),redmineEvolution.init()}));var redmineEvolution={init:function(){_this=this,this.redmineEvolutionThemeSettings(),this.redmineEvolutionDatepicker(),this.redmineEvolutionGoToTop(),this.redmineEvolutionProjects(),this.redmineEvolutionInputFile(),this.redmineEvolutionAjax(),this.redmineEvolutionRefreshSelect(),this.redmineEvolutionFilter(),this.redmineEvolutionActivity(),this.redmineEvolutionAutoscroll(),this.redmineEvolutionNews(),this.redmineEvolutionWiki(),this.redmineEvolutionHelpSupport(),this.redmineEvolutionDokuments(),this.redmineEvolutionMobile(),this.redmineEvolutionAttachments(mobileButton),this.redmineEvolutionSelect(),this.redmineEvolutionStartRefresh(),this.redmineEvolutionTabs(),this.redmineEvolutionForm(),this.redmineEvolutionStart(),this.redmineEvolutionRedmineUpAgille(),this.redmineEvolutionOpenLinkExternal(),this.redmineEvolutionAllIssue()},redmineEvolutionAllIssue:function(){body.hasClass("controller-issues action-show")&&(_this.redmineEvolutionIssues(),_this.redmineEvolutionTabsTssueIssueTree(),_this.redmineEvolutionTabsTssue())},redmineEvolutionTabsTssue:function(){let e=body.find("#history");if(e.length>0){let n=e.find(".tabs a"),o=e.find("#tab-content-history"),i="hidden-ap",s='<div class="holder-more-button '+i+'"><a href="#" class="btn-main">more</a></div>',a=e.find(".holder-more-button");0==a.length&&(o.after(s),a=e.find(".holder-more-button"));let r,l,c,d=a.find(".evo-btn"),u=5,h=o.find(".journal");function t(){c=e.find(".tabs .selected"),c.is("#tab-history")||c.is("#tab-notes")||c.is("#tab-properties")?(h.removeClass(i),r=o.find(".journal:visible"),l=r.length,l>u?(a.hasClass(i)&&a.removeClass(i),r.each((function(e){l-u>e&&$(this).addClass(i)}))):a.hasClass(i)||a.addClass(i)):a.hasClass(i)||a.addClass(i)}n.click((function(){t()})),t(),d.click((function(){return h.removeClass(i),a.hasClass(i)||a.addClass(i),!1}))}},redmineEvolutionTabsTssueIssueTree:function(){let e=body.find("#issue_tree, #relations");if(e.length>0){let t,n,o,i="open-tr",s='<a href="#" class="icon icon-open open-element-tree"></a>';if(e.each((function(e){t=$(this).find(".list tr"),t.length>0&&(n=$(this).find(".contextual"),n.append(s),$(this).addClass(i))})),o=e.find(".open-element-tree"),o.length>0){let e;o.on("click",(function(){return e=$(this).closest("."+i).find("form"),$(this).toggleClass(openCl),e.toggleClass(openCl),!1}))}}},redmineEvolutionRedmineUpAgille:function(){if(body.hasClass("controller-agile_boards action-index")){var e=mainBox.find("#sidebar .project-members"),t=e.find(".assignable-user br");t.length>0&&t.remove();var n=e.find(".assignable-user img"),o=e.find(".assignable-user");if(n.length>0&&o.length>0&&n.length==o.length){var i;body.addClass("has-assignable-user");var s=e.find("img");s.removeAttr("title"),o.each((function(){if((i=$(this).find("a")).length>0)$(this).attr("title",i.text());else{let e=$(this).text().replace(/(\r\n|\n|\r)/gm,"").split(" "),t="",n=!1;e.forEach((e=>{e.length>0&&(n?(t+=" "+e,n=!1):(t+=e,n=!0))})),$(this).attr("title",t).addClass("empty-user-up")}})),s.tooltip("destroy"),_this.redmineEvolutionTooltipElsement(o,"left")}}},redmineEvolutionForm:function(){var e;if(content.find(".tab-content").length<1&&(e=content.find('form[class*="new"], form[id*="new_"], form#my_account_form, form[class*="edit_"], form[action="/settings/plugin/redmine_evolution_badge"], form[action="/redmine_crm/settings/money"]')).length>0){var t,n=!1;function o(){var t,o=$(window).height(),i=e.offset().top,s=e.outerHeight(!0),a="evo-botton-",r=e.find(".mobile-hide");r.length>0?(t=r.find('input[type="submit"], input[type="submit"] ~ input[type="submit"], input[type="submit"] ~ a'),e.find(".mobile-show").addClass("hidden")):t=e.find('input[type="submit"], input[type="submit"] ~ input[type="submit"], input[type="submit"] ~ a');var l=t.length;if(n){if(i+s<o&&wrapper.hasClass("sticky-button-"+l)){n=!1,wrapper.removeClass("sticky-button-"+l),wrapper.find(".sticky-button").remove();var c=t.eq(0);c.parent().hasClass("hidden")&&c.unwrap()}}else if(i+s>o){var d,u="";t.wrapAll('<div class="hidden"></div>'),t.each((function(e){$(this).addClass(a+e),$(this).is("input")&&(u+='<button type="button" class="evo-btn" data-element="'+a+e+'">'+$(this).val()+"</button>"),$(this).is("a")&&(u+='<button type="button" class="evo-btn" data-element="'+a+e+'">'+$(this).text()+"</button>")})),wrapper.addClass("sticky-button-"+l),wrapper.append('<div class="sticky-button">'+u+"</div>"),wrapper.find(".sticky-button .evo-btn").on("click",(function(){return(d=e.find("."+$(this).attr("data-element"))).length>0&&d.trigger("click"),!1})),n=!0}}o(),$(window).resize((function(){t&&clearTimeout(t),t=setTimeout((function(){o()}),500)}))}},redmineEvolutionStart:function(){console.log("redmineEvolutionStart"),body.addClass("revo-start");var e=body.find(".list-gallery-holder");if(e.length>0){var t,n,o,i,s=e.find(".list-gsllery"),a=e.find(".open-link"),r=e.find(".close-link"),l=s.find("li").first(),c="open-portfolio";function d(){t=e.outerHeight(!0),i=2*l.outerHeight(!0),n=s.outerHeight(!0),body.hasClass(c)||t===i||t.css({height:i})}d(),$(window).resize((function(){o&&clearTimeout(o),o=setTimeout((function(){d()}),500)})),a.click((function(){return body.hasClass(c)||(body.addClass(c),openBox.eq(indexLink).animate({height:n},{queue:!1,duration:500})),!1})),r.click((function(){return body.hasClass(c)&&(body.addClass(c),openBox.eq(indexLink).animate({height:i},{queue:!1,duration:500})),!1}))}},redmineEvolutionDokuments:function(){console.log("redmineEvolutionDokuments");var e=content.find("#document-list");if(body.hasClass("controller-documents")||body.hasClass("controller-my")){if((e=content.find("#document-list")).length>0)var t=e.find("h4");else{t=content.find("> h4");var n=content.find("> p"),o=content.find("> .wiki")}var i,s,a="dokuments-";t.each((function(t){$(this).append('<ul class="list-buttons"><li><a href="#" class="icon icon-open open-documents"></a></li></ul>'),e.length>0?(s=$(this).closest(".document-item"),(i=s.find("> *").not("h4")).wrapAll('<div class="open-box"><div class="in-open">')):($(this).addClass(a+t),n.eq(t).addClass(a+t),o.eq(t).addClass(a+t),i=content.find("."+a+t).not("h4"),content.find("."+a+t).wrapAll('<div class="document-item">'),i.wrapAll('<div class="open-box"><div class="in-open">'))}));var r,l,c,d=content.find(".open-documents"),u="open";d.click((function(){return c=$(this).closest(".document-item"),r=c.find(".open-box"),l=c.find(".in-open"),$(this).hasClass(u)?($(this).removeClass(u),r.animate({height:0},{queue:!1,duration:speedAnim})):($(this).addClass(u),r.animate({height:l.outerHeight(!0)},{queue:!1,duration:speedAnim})),!1}))}},redmineEvolutionWiki:function(){if(console.log("redmineEvolutionWiki"),body.hasClass("controller-wiki")){if(body.hasClass("action-index")){var e,t,n,o,i=content.find("> .pages-hierarchy"),s=i.find(".pages-hierarchy"),a="open";s.each((function(){$(this).parent().addClass("has-drop"),$(this).before('<ul class="list-buttons"><li><a href="#" class="icon icon-open"></a></li></ul>'),$(this).wrap('<div class="holder-wiki"></div>')})),i.find(".icon-open").click((function(){return n=$(this).closest(".has-drop"),e=n.find("> .holder-wiki"),t=e.find("> .pages-hierarchy"),o=$(this).parents(".holder-wiki"),n.hasClass(a)?(n.removeClass(a),e.animate({height:0},{queue:!1,duration:speedAnim,complete:function(){n.find("."+a).removeClass(a),n.find(".holder-wiki").css({height:0})}})):(n.addClass(a),o.css({height:"auto"}),e.animate({height:t.outerHeight(!0)},{queue:!1,duration:speedAnim,complete:function(){e.css({height:"auto"})}})),!1}))}if(body.hasClass("action-date_index")){var r=content.find("> ul, > h3");if(r.length>0){var l,c,d=content.find("> ul"),u=content.find("> h3");a="open-wiki";r.wrapAll('<div id="wiki-new"></div>'),d.each((function(){$(this).wrap('<div class="holder-wiki-date"></div>')})),u.eq(0).addClass(a),d.eq(0).parent().css({height:"auto"}),u.click((function(){return l=d.eq(u.index($(this))),c=l.parent(),$(this).hasClass(a)?($(this).removeClass(a),c.animate({height:0},{queue:!1,duration:speedAnim})):($(this).addClass(a),c.animate({height:l.outerHeight(!0)},{queue:!1,duration:speedAnim,complete:function(){c.css({height:"auto"})}})),!1}))}}}},redmineEvolutionAllRefresh:function(){var e;console.log("redmineEvolutionAllRefresh"),e&&clearTimeout(e),e=setTimeout((function(){_this.redmineEvolutionSelect(),_this.redmineEvolutionDatepicker(),content.find("#tab-files").length>0&&_this.redmineEvolutionAttachments(mobileButton)}),500)},redmineEvolutionStartRefresh:function(){console.log("redmineEvolutionStartRefresh");var e,t,n,o=body.find("#commit-keywords .add-commit-keywords");o.length>0&&o.click((function(){n&&clearTimeout(n),n=setTimeout((function(){var n;e=body.find("#commit-keywords .commit-keywords").last(),t=e.find("select"),e.find(".select2-container").remove(),t.each((function(){(n=$(this).closest(".modal")).length>0?$(this).select2({width:"100%",dropdownParent:n}):$(this).select2({width:"100%",dropdownParent:body})}))}),200)}));var i,s=body.find("#customer_profile .contextual a");s.length>0&&s.click((function(){_this.redmineEvolutionSelect(),i&&clearTimeout(i),i=setTimeout((function(){_this.redmineEvolutionSelect()}),500)}));body.on("click",'#contact_projects a[href*="/new?project_id"]',(function(){i&&clearTimeout(i),i=setTimeout((function(){_this.redmineEvolutionSelect()}),500)}))},redmineEvolutionRefreshSelect:function(){console.log("redmineEvolutionRefreshSelect");var e,t,n=body.find(".assign-to-me-link");n.length>0&&n.on("click",(function(){return(e=$(this).parent().find("select")).length&&e.val($(this).attr("data-id")).trigger("change"),!1})),body.on("click",".toggle-multiselect",(function(){var e;(t=$(this).parent().find("select")).is('[multiple="multiple"]')?t.select2("destroy"):t.each((function(){(e=$(this).closest(".modal")).length>0?$(this).select2({width:"100%",dropdownParent:e}):$(this).select2({width:"100%",dropdownParent:body})}));return!1}));var o,i=body.find("#add_filter_select, #add_action_select");i.length>0&&i.on("change",(function(){_this.redmineEvolutionSelect(),o&&clearTimeout(o),o=setTimeout((function(){_this.redmineEvolutionSelect()}),300)}))},redmineEvolutionAutoscroll:function(){console.log("redmineEvolutionAutoscroll"),body.find(".container-fixed table.list").addClass(ascroll);var e=body.find("table.trackers, #commit-keywords, table.list, table.cal, table.invoice-lines").not("."+ascroll);e.length>0&&(e.each((function(){$(this).parent().hasClass("autoscroll")||$(this).wrap('<div class="autoscroll">')})),e.addClass(ascroll))},redmineEvolutionFilter:function(){console.log("redmineEvolutionFilter");var e=body.find("#query_form_with_buttons"),t=e.find("> #query_form_content, > #query_form_content ~ p.buttons, > #query_form_content ~ div.buttons");e.length<1&&(t=(e=body.find("#query_form")).find("> #query_form_content, > #query_form_content ~ p.buttons, > #query_form_content ~ div.buttons")).length<1&&(t=e.find("> fieldset, > p.buttons"));var n=body.find(".toggle-filters");if(e.length>0&&n.length<1&&t.length>0){t.wrapAll('<div class="holder-filters"><div class="in-filter"></div></div>');var o=content.find(".contextual").first(),i=content.find("#filters > legend").text(),s="start-filter";o.length>0?o.append('<a class="icon open-filter" title="'+i+'"></a>'):((o=content.find("> h2")).length<1&&(o=e),o.before('<div class="contextual"><a class="icon open-filter" title="'+i+'"></a></div>'));var a=content.find(".open-filter"),r="data-filter";_this.redmineEvolutionGetCookie(r),null!==checkCookie&&"true"==checkCookie[1]&&body.addClass(s),a.click((function(){return body.hasClass(s)?(body.removeClass(s),_this.redmineEvolutionSetCookie(r,"false")):(body.addClass(s),_this.redmineEvolutionSetCookie(r,"true")),!1}))}},redmineEvolutionAjax:function(){var e=!0;$(document).ajaxSuccess((function(){console.log("Start ajaxSuccess full"),e=!1,_this.redmineEvolutionAllRefresh()})),$(document).on("ajax:success",(function(){e&&(console.log("Start ajax:success full"),_this.redmineEvolutionAllRefresh())}))},redmineEvolutionIssues:function(){console.log("redmineEvolutionIssues");var e,t,n,o,i=content.find("> .contextual").first().clone().find("a"),s=(content.find(".issue"),"revo-open-edit"),a="revo-open-note";i.each((function(){$(this).attr("title",$(this).text())})),i.length>0&&(content.after('<div class="rmevo-contextual">'),(e=mainBox.find(".rmevo-contextual")).length>0&&(e.append(i),t=e.find(".icon-edit"),o=content.find(".icon-comment"),t.length>0&&((n=content.find("#update")).find('input[type="submit"], input[type="submit"] + a').wrapAll('<div class="revo-button"></div>'),t.click((function(){body.addClass(s)})),o.click((function(){body.addClass(a)})),n.find(".revo-button a").click((function(){body.hasClass(s)&&body.removeClass(s),body.hasClass(a)&&body.removeClass(a)})))))},redmineEvolutionProjects:function(){if(console.log("redmineEvolutionProjects"),body.hasClass("controller-projects")){var e,t=body.find("#projects-index .projects"),n=t.find("ul.projects"),o=body.find("#projects-index .project"),i=body.find("#projects-index .link_child");i.length>0&&i.remove(),o.each((function(){if($(this).wrap('<div class="holder-mainlink">'),(e=$(this).closest("div.root, div.child").find("> *").not(".holder-mainlink")).length>0){var t=e.eq(0).closest("li").find("> div.root > .holder-mainlink > .list-buttons, > div.child > .holder-mainlink > .list-buttons");t.length>0?t.find(".open-wiki").length<1&&t.append('<li><a href="#" class="icon open-wiki">wiki</a></li></li>'):e.eq(0).closest("li").find("> div.root > .holder-mainlink .project, > div.child > .holder-mainlink .project").after('<ul class="list-buttons"><li><a href="#" class="icon open-wiki">wiki</a></li></ul>'),e.wrapAll('<div class="holder-wiki"><div class="holder-wiki-inner"></div></div>')}})),n.length>0&&n.each((function(e){var t=$(this).closest("li").find("> div.root > .holder-mainlink > .list-buttons");t.length>0?t.append('<li><a href="#" class="icon icon-open open-projects"></a></li>'):$(this).closest("li").find("> div.root > .holder-mainlink .project, > div.child > .holder-mainlink .project").after('<ul class="list-buttons"><li><a href="#" class="icon icon-open open-projects"></a></li></ul>'),$(this).wrap('<div class="holder-projects"></div>')}));var s,a,r,l=t.find(".open-wiki"),c="wiki-open",d="projects-open";l.click((function(){return r=$(this).closest("div.root, div.child"),s=r.find("> .holder-wiki"),r.hasClass(c)?(r.removeClass(c),a=0,s.animate({height:a},{queue:!1,duration:speedAnim})):(r.addClass(c),a=s.find(".wiki").outerHeight(),s.animate({height:a},{queue:!1,duration:speedAnim,complete:function(){s.css({height:"auto"})}})),!1})),t.find(".open-projects").click((function(){r=$(this).parents(".list-buttons").parents("li").first();var e=(s=r.find("> .holder-projects")).find(".holder-projects"),t=s.find(".projects-open"),n=s.find(".wiki-open"),o=s.find(".holder-wiki");return r.hasClass(d)?(r.removeClass(d),s.animate({height:0},{queue:!1,duration:speedAnim,complete:function(){e.css({height:0}),t.removeClass("projects-open"),n.removeClass("wiki-open"),o.css({height:0})}})):(r.addClass(d),s.animate({height:s.find("ul.projects").outerHeight()},{queue:!1,duration:speedAnim,complete:function(){s.css({height:"auto"})}})),!1}))}},redmineEvolutionSidebar:function(){if(console.log("redmineEvolutionSidebar"),!sidebarFlag&&sidebar.length>0){var e=sidebar.find("> *");if((e.length<1||1==e.length&&e.eq(1).is("h3"))&&body.addClass("nosidebar"),1==e.length&&e.is("ul")&&e.find("li").length<1&&body.addClass("nosidebar"),!body.hasClass("nosidebar")){var t='<a href="#" class="icon open-sidebar-link" id="hideSidebarButton"></a>',n=topMenu.find(".revo-theme-settings");n.length>0?n.before(t):topMenuList.before(t);var o=topMenu.find(".open-sidebar-link");_this.redmineEvolutionGetCookie(clSidebar),null===checkCookie||"true"!=checkCookie[1]||body.hasClass(clSidebar)||(body.addClass(clSidebar),sidebar.css({right:0}),wrapper.css({paddingRight:280})),o.click((function(){return body.hasClass(clSidebar)?(body.removeClass(clSidebar),sidebar.animate({right:-263},{queue:!1,duration:speedAnim}),wrapper.animate({paddingRight:20},{queue:!1,duration:speedAnim,complete:function(){_this.redmineEvolutionSetCookie(clSidebar,"false"),$(window).scroll()}})):(body.addClass(clSidebar),sidebar.animate({right:0},{queue:!1,duration:speedAnim}),wrapper.animate({paddingRight:280},{queue:!1,duration:speedAnim,complete:function(){_this.redmineEvolutionSetCookie(clSidebar,"true"),$(window).scroll()}})),$(window).trigger("resize"),!1}))}sidebarFlag=!0}},redmineEvolutionSidebarDestroy:function(){(console.log("redmineEvolutionSidebarDestroy"),sidebarFlag&&sidebar.length>0)&&(topMenu.find(".open-sidebar-link").remove(),sidebar.removeAttr("style"),wrapper.removeAttr("style"),sidebarFlag=!1,body.hasClass(clSidebar)&&body.removeClass(clSidebar))},redmineEvolutionSelect:function(){console.log("redmineEvolutionSelect"),body.find("#status_by_select, #leave_type_color, select[multiple], #user_agile_color_attributes_color, #project_agile_color_attributes_color, #questions_status_color").addClass(selectDone);var e,t=body.find("select").not('[url*="auto_completes"], [url*="autocomplete"], [data-select2-id*="tags"], [multiple="multiple"], [class*="select2"], .agile-color, .'+selectDone);t.addClass(selectDone),t.each((function(){(e=$(this).closest(".modal")).length>0?$(this).select2({width:"100%",dropdownParent:e}):$(this).select2({width:"100%",dropdownParent:body})}))},redmineEvolutionDatepicker:function(){console.log("redmineEvolutionDatepicker");var e,t,n=body.find('input[type="date"], input.date, #operation_operation_date').not("."+doneData),o=body.find(".ui-datepicker-trigger");o.length>0&&o.each((function(){(t=$(this)).is('input[type="date"]')&&t.attr("type","text"),(e=t.parent().find("."+doneData)).length>0&&e.each((function(){$(this).focus((function(){$(this).datepicker("show")})),$(this).focusout((function(){$(this).datepicker("hide")}))}))}));n.length>0&&n.datepicker({dateFormat:"yy-mm-dd"});var i=body.find(".datepicker-check-in"),s=body.find(".datepicker-check-out");i.length>0&&i.datepicker({beforeShow:l,onClose:c}),s.length>0&&s.datepicker({beforeShow:l,onClose:c});var a=$("#content .overlay-box"),r="show";function l(){a.hasClass(r)||a.addClass(r)}function c(){a.hasClass(r)&&a.removeClass(r)}},redmineEvolutionTooltipElsement:function(e,t){e.length>0&&"left"==t&&e.each((function(){$(this).tooltip({position:{my:"right-10 top+10",at:"right-10 bottom-35"}}),$(this).addClass(tooltipCl)}))},redmineEvolutionTooltip:function(){var e;if(console.log("redmineEvolutionTooltip",tooltipFlag),!tooltipFlag){var t=body.find(".dmsf-title .icon, #project-jump a, .ui-dialog .ui-button-icon-only, #checklist-menu a, .card, div.project_card div.title h4 a,.icon-attachment, .journal-link, #admin-menu .icon, #projects-index .icon-user, #query_form .buttons a, .drdn .icon ","#sidebar .gravatar");if(t.removeAttr("title"),t.addClass(tooltipCl),mainHtml.find('#query_form_with_buttons .page a, a#helpdesk_ticket_from_address_add_link , #customer_profile .contextual a.controller-gantts a[accesskey="p"], .controller-gantts a[accesskey="n"], .open-filter, #show-filters, #gantt-undo-btn, #gantt-redo-btn, #gantt-save-btn, #top-menu > ul > li > a, .contextual > a, .other-formats a, #main .icon-only, #main a.icon, #main a.icon-only, .prevPage, .redmineevolution-search-link, .nextPage ').not("."+tooltipCl).each((function(){void 0===$(this).attr("title")&&(e=$(this).text()).length>0&&$(this).attr("title",e),$(this).closest("#sidebar").length>0?$(this).tooltip({position:{my:"right-20 top",at:"right-20 bottom-35"}}):$(this).tooltip({position:{my:"center+10 top+10",at:"center-10 bottom"}}),$(this).addClass(tooltipCl)})),body.hasClass("controller-issues action-show")){var n,o;!function e(){(n=body.find(".rmevo-contextual a")).length>0?n.tooltip({position:{my:"right-20 top",at:"right-20 bottom-35"}}):(o&&clearTimeout(o),o=setTimeout((function(){e()}),500))}()}tooltipFlag=!0}},redmineEvolutionMainMenuTop:function(){if(!mainMenuFlagTop&&(console.log("redmineEvolutionMainMenuTop"),mainMenuFlagTop=!0,mainMenuG.length>0)){body.hasClass(clMaqin)||body.addClass(clMaqin),headerBox.append('<div class="header-menu"><div class="header-menu-in"><div id="re-main-menu-top">'+mainMenuG.html()+'</div><div class="header-menu-button"></div></div></div>');var e=headerBox.find("#re-main-menu-top"),t=headerBox.find(".header-menu"),n=t.find(".header-menu-button");mainMenuG.is("#admin-menu")&&!body.hasClass("nosidebar")&&body.addClass("nosidebar");var o,i=e.find("#new-object").closest("li");i.addClass("new-object-el"),n.append(i),o&&clearTimeout(o),o=setTimeout((function(){_this.redmineEvolutionSly(e,t)}),100)}},redmineEvolutionMainMenuLeft:function(){if(!mainMenuFlag&&(console.log("redmineEvolutionMainMenuLeft"),mainMenuG.length>0)){wrapper.append('<div id="re-main-menu">'+mainMenuG.html()+"</div>");var e=wrapper.find("#re-main-menu");mainMenuFlag=!0;var t=e.find("> ul"),n=20,o=t.find("a");if(mainMenuG.is("#admin-menu")&&!body.hasClass("nosidebar")&&body.addClass("nosidebar"),o.length>0){var i="has-main-menu";e.length>0&&!body.hasClass(i)&&body.addClass(i),_this.redmineEvolutionGetCookie(clMainMenu),function(){var i=e.find(".open-menu-box .open-main-menu");i.length<1&&(e.append('<div class="open-menu-box"><a class="open-main-menu"></a></div>'),i=e.find(".open-menu-box"));var s,a,r=e.find("#new-object"),l="open-new-object",c=0;o.each((function(){a=$(this).text(),$(this).html("<span>"+a+"</span>"),s=$(this).find("span").outerWidth(!0),c<s&&(c=s+20)}));var d,u,h,p=!1;function f(){body.hasClass(clMainMenu)||body.hasClass("hover-menu")&&(body.removeClass("hover-menu"),r.length>0&&g.hasClass(l)&&(g.removeClass(l),v.css({height:0})),o.animate({width:40},{queue:!1,duration:speedAnimHover}),t.animate({width:60},{queue:!1,duration:speedAnimHover}))}if(body.hasClass("controller-redmine_x_gantt action-index")&&(d=body.find(".gantt-controls-wrapper"),u=body.find("#gantt_here"),d.css({width:u.outerWidth()}),$(window).resize((function(){d.css({width:u.outerWidth()})})),p=!0),e.hover((function(){body.hasClass(clMainMenu)||body.hasClass("hover-menu")||(o.animate({width:c},{queue:!1,duration:speedAnimHover}),t.animate({width:c+n},{queue:!1,duration:speedAnimHover,complete:function(){body.addClass("hover-menu")}}))}),(function(){f(),h&&clearTimeout(h),h=setTimeout((function(){f()}),300)})),null===checkCookie||mainMenuFlagTopC||"true"==checkCookie[1]&&(body.addClass("big-menu hover-menu"),t.css({width:c+n}),o.css({width:c}),wrapper.css({paddingLeft:c+20+n}),p&&d.css({width:u.outerWidth()})),i.on("click",(function(){return body.hasClass(clMainMenu)?(body.removeClass(clMainMenu),wrapper.animate({paddingLeft:80},{queue:!1,duration:speedAnim,complete:function(){p&&d.css({width:u.outerWidth()})}}),_this.redmineEvolutionSetCookie(clMainMenu,"false")):(body.addClass(clMainMenu),wrapper.animate({paddingLeft:c+20+n},{queue:!1,duration:speedAnim,complete:function(){p&&d.css({width:u.outerWidth()})}}),_this.redmineEvolutionSetCookie(clMainMenu,"true")),!1})),r.length>0){var g=r.parent(),m=g.find(".menu-children");m.wrap('<div class="holder-children"></div>');var v=g.find(".holder-children");r.on("click",(function(){return g.hasClass(l)?(g.removeClass(l),v.animate({height:0},{queue:!1,duration:speedAnim})):(g.addClass(l),v.css({width:"100%"}),v.animate({height:m.outerHeight(!0)},{queue:!1,duration:speedAnim})),!1}))}}()}}},redmineEvolutionMainMenuDestroy:function(){console.log("redmineEvolutionMainMenuDestroy"),mainMenuFlag&&body.hasClass(clMainMenu)&&(mainMenuFlag=!1,body.removeClass(clMainMenu),body.find("#re-main-menu").remove(),wrapper.removeAttr("style"))},redmineEvolutionMobile:function(){function e(){mobileToggle.is(":visible")?(mobileButton=!0,sidebarFlag&&_this.redmineEvolutionSidebarDestroy(),mainMenuFlag&&_this.redmineEvolutionMainMenuDestroy()):(mobileButton=!1,mainMenuFlag||_this.redmineEvolutionMainMenuLeft(),mainMenuFlagTop||_this.redmineEvolutionMainMenuTop(),sidebarFlag||_this.redmineEvolutionSidebar(),topMenuFlag||_this.redmineEvolutionTopMenu(),searchFlag||_this.redmineEvolutionSearch(),tooltipFlag||_this.redmineEvolutionTooltip())}console.log("redmineEvolutionMobile"),mobileToggle=body.find(".mobile-toggle-button"),e(),$(window).resize((function(){e()}))},redmineEvolutionThemeSettings:function(){console.log("redmineEvolutionThemeSettings");for(var e,t="",n="",o=body.attr("class").toLowerCase(),i=["evo-theme","redmine-evolution-dracula"],s="data-theme-color",a=["re-icon-thin","re-icon-medium","re-icon-fill"],r=a[1],l=0;l<i.length;l++)-1!=o.indexOf(i[l])&&(e=i[l]);if(_this.redmineEvolutionGetCookie(s),null!==checkCookie&&"false"!=checkCookie[1]){body.attr(s,checkCookie[1]),checkCookie[1];for(l=0;l<i.length;l++)i[l]==checkCookie[1]?n+='<li class="'+clActive+'"><input class="re-hidden-inp el-theme-color" id="'+i[l]+'" type="radio" name="theme-color" value="'+i[l]+'" checked="checked" /><label for="'+i[l]+'"></label></li>':n+='<li><input class="re-hidden-inp el-theme-color" id="'+i[l]+'" type="radio" name="theme-color" value="'+i[l]+'" /><label for="'+i[l]+'"></label></li>'}else for(l=0;l<i.length;l++)-1!=o.indexOf(i[l])?n+='<li class="'+clActive+'"><input class="re-hidden-inp el-theme-color" id="'+i[l]+'" type="radio" name="theme-color" value="'+i[l]+'" checked="checked" /><label for="'+i[l]+'"></label></li>':n+='<li><input class="re-hidden-inp el-theme-color" id="'+i[l]+'" type="radio" name="theme-color" value="'+i[l]+'" /><label for="'+i[l]+'"></label></li>';var c="data-theme-icon",d="",u=['<svg class="svg-stroke" width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 15.7596C8 14.4019 8 13.723 8.27446 13.1262C8.54892 12.5295 9.06437 12.0877 10.0953 11.2041L11.0953 10.3469C12.9586 8.7498 13.8902 7.95123 15 7.95123C16.1098 7.95123 17.0414 8.7498 18.9047 10.3469L19.9047 11.2041C20.9356 12.0877 21.4511 12.5295 21.7255 13.1262C22 13.723 22 14.4019 22 15.7596V20C22 21.8856 22 22.8284 21.4142 23.4142C20.8284 24 19.8856 24 18 24H12C10.1144 24 9.17157 24 8.58579 23.4142C8 22.8284 8 21.8856 8 20V15.7596Z" stroke="#222222"/><path d="M17.5 24V19C17.5 18.4477 17.0523 18 16.5 18H13.5C12.9477 18 12.5 18.4477 12.5 19V24" stroke="#222222" stroke-linecap="round" stroke-linejoin="round"/></svg>','<svg class="svg-stroke" width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 15.7596C8 14.4019 8 13.723 8.27446 13.1262C8.54892 12.5295 9.06437 12.0877 10.0953 11.2041L11.0953 10.3469C12.9586 8.7498 13.8902 7.95123 15 7.95123C16.1098 7.95123 17.0414 8.7498 18.9047 10.3469L19.9047 11.2041C20.9356 12.0877 21.4511 12.5295 21.7255 13.1262C22 13.723 22 14.4019 22 15.7596V20C22 21.8856 22 22.8284 21.4142 23.4142C20.8284 24 19.8856 24 18 24H12C10.1144 24 9.17157 24 8.58579 23.4142C8 22.8284 8 21.8856 8 20V15.7596Z" stroke="#222222" stroke-width="1.5"/><path d="M17.5 24V19C17.5 18.4477 17.0523 18 16.5 18H13.5C12.9477 18 12.5 18.4477 12.5 19V24" stroke="#222222" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>','<svg class="svg-fill" width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.27446 13.1262C8 13.7229 8 14.4018 8 15.7595V19.9999C8 21.8856 8 22.8284 8.58579 23.4142C9.11733 23.9457 9.94285 23.9949 11.5 23.9995V19C11.5 17.8954 12.3954 17 13.5 17H16.5C17.6046 17 18.5 17.8954 18.5 19V23.9995C20.0572 23.9949 20.8827 23.9457 21.4142 23.4142C22 22.8284 22 21.8856 22 19.9999V15.7595C22 14.4018 22 13.7229 21.7255 13.1262C21.4511 12.5294 20.9356 12.0876 19.9047 11.204L18.9047 10.3469C17.0414 8.74974 16.1098 7.95117 15 7.95117C13.8902 7.95117 12.9586 8.74974 11.0953 10.3469L11.0953 10.3469L10.0953 11.204C9.06437 12.0876 8.54892 12.5294 8.27446 13.1262ZM16.5 23.9999V19H13.5V23.9999H16.5Z" fill="#222222"/></svg>'];if(_this.redmineEvolutionGetCookie(c),null!==checkCookie&&"false"!=checkCookie[1]){body.attr(c,checkCookie[1]),checkCookie[1];for(l=0;l<a.length;l++)a[l]==checkCookie[1]?d+='<li class="'+clActive+'"><input class="re-hidden-inp el-theme-icon" id="'+a[l]+'" type="radio" name="theme-icon" value="'+a[l]+'" checked="checked" /><label for="'+a[l]+'">'+u[l]+"</label></li>":d+='<li><input class="re-hidden-inp el-theme-icon" id="'+a[l]+'" type="radio" name="theme-icon" value="'+a[l]+'" /><label for="'+a[l]+'">'+u[l]+"</label></li>"}else for(l=0;l<a.length;l++)d+=1==l?'<li class="'+clActive+'"><input class="re-hidden-inp el-theme-icon" id="'+a[l]+'" type="radio" name="theme-icon" value="'+a[l]+'" checked="checked" /><label for="'+a[l]+'">'+u[l]+"</label></li>":'<li><input class="re-hidden-inp el-theme-icon" id="'+a[l]+'" type="radio" name="theme-icon" value="'+a[l]+'" /><label for="'+a[l]+'">'+u[l]+"</label></li>";var h="data-radius",p="",f="re-radios-1",g=["re-radios-0","re-radios-1","re-radios-2"];if(_this.redmineEvolutionGetCookie(h),null!==checkCookie&&checkCookie[1]!=f){body.attr(h,checkCookie[1]);for(var m=0;m<g.length;m++)g[m]==checkCookie[1]?p+='<li class="'+clActive+'"><input class="re-hidden-inp el-radius" id="'+g[m]+'" type="radio" name="radius" value="'+g[m]+'" checked="checked" /><label for="'+g[m]+'" class="icon-label '+g[m]+'"></label></li>':p+='<li><input class="re-hidden-inp el-radius" id="'+g[m]+'" type="radio" name="radius" value="'+g[m]+'" /><label for="'+g[m]+'" class="icon-label '+g[m]+'"></label></li>'}else{body.attr(h,f);for(m=0;m<g.length;m++)p+=g[m]==f?'<li class="'+clActive+'"><input class="re-hidden-inp el-radius" id="'+g[m]+'" type="radio" name="radius" value="'+g[m]+'" checked="checked" /><label for="'+g[m]+'" class="icon-label '+g[m]+'"></label></li>':'<li><input class="re-hidden-inp el-radius" id="'+g[m]+'" type="radio" name="radius" value="'+g[m]+'" /><label for="'+g[m]+'" class="icon-label '+g[m]+'"></label></li>'}var v="re-type-menu",b="",y="re-menu-left";_this.redmineEvolutionGetCookie(v),null!==checkCookie&&checkCookie[1]!=y?(mainMenuG.length>0&&body.attr(v,checkCookie[1]),mainMenuFlagTopC=!0,b='<li><input class="re-hidden-inp el-type-menu" id="re-menu-left" type="radio" name="theme-menu" value="re-menu-left" /><label for="re-menu-left" class="icon-label re-menu-left"></label></li><li class="'+clActive+'"><input class="re-hidden-inp el-type-menu" id="re-menu-top" type="radio" name="theme-menu" value="re-menu-top" checked="checked" /><label for="re-menu-top" class="icon-label re-menu-top"></label></li>'):(mainMenuG.length>0&&body.attr(v,y),b='<li class="'+clActive+'"><input class="re-hidden-inp el-type-menu" id="re-menu-left" type="radio" name="theme-menu" value="re-menu-left" checked="checked" /><label for="re-menu-left" class="icon-label re-menu-left"></label></li><li><input class="re-hidden-inp el-type-menu" id="re-menu-top" type="radio" name="theme-menu" value="re-menu-top" /><label for="re-menu-top" class="icon-label re-menu-top"></label></li>'),t+='<div class="revo-theme-settings revo-top-menu">\t<a href="#" class="revo-theme-color icon icon-color"></a>\t\t<div class="drop-content drop-r">\t\t\t<div class="drop-items">\t\t\t\t<ul class="list-icon list-color-theme">'+n+'</ul>\t\t\t\t<ul class="list-icon list-icon-theme">'+d+'</ul>\t\t\t\t<ul class="list-icon list-radius">'+p+'</ul>\t\t\t\t<div class="re-menu-t">\t\t\t\t\t<ul class="list-icon list-type-menu"><li class="list-text-center">Menu</li>'+b+'</ul>\t\t\t\t</div>\t\t\t<ul class="holder-drop-button">\t\t\t\t<li><a href="#" class="theme-save icon icon-checked"></a></li>\t\t\t\t<li><a href="#" class="theme-reset icon icon-reload"></a></li>\t\t\t\t<li><a href="#" class="theme-close icon icon-cancel"></a></li>\t\t\t</ul>\t\t</div>\t</div></div>',appendLoggedas.length>0?appendLoggedas.before(t):appendAccount.length>0?appendAccount.before(t):topMenuList.before(t),OpenBox({wrap:".revo-theme-settings",arrowButton:".revo-theme-color",box:".drdn-content",openClass:"ob-done",close:".theme-close"});var w,x,C,_,k=topMenu.find(".theme-save"),S=topMenu.find(".theme-reset"),E=topMenu.find("#"+e),A=topMenu.find(".list-color-theme li"),T=topMenu.find("#"+r),P=topMenu.find(".list-icon-theme li"),M=topMenu.find(".list-radius li"),D=topMenu.find(".el-radius:checked"),L=topMenu.find("#"+v),I=topMenu.find(".list-type-menu li"),q=topMenu.find(".el-open-link");k.click((function(){return E=topMenu.find(".el-theme-color:checked"),T=topMenu.find(".el-theme-icon:checked"),D=topMenu.find(".el-radius:checked"),L=topMenu.find(".el-type-menu:checked"),E.length>0&&!E.parent().hasClass(clActive)&&(w=E.val(),A.removeClass(clActive),E.parent().addClass(clActive),"false"!==w?(_this.redmineEvolutionSetCookie(s,w),body.attr(s,w)):(_this.redmineEvolutionSetCookie(s,"false"),body.attr(s,"false"))),T.length>0&&!T.parent().hasClass(clActive)&&(x=T.val(),P.removeClass(clActive),T.parent().addClass(clActive),"false"!==x?(_this.redmineEvolutionSetCookie(c,x),body.attr(c,x)):(_this.redmineEvolutionSetCookie(c,"false"),body.attr(c,"false"))),D.length>0&&!D.parent().hasClass(clActive)&&(C=D.val(),M.removeClass(clActive),D.parent().addClass(clActive),C!==f?(_this.redmineEvolutionSetCookie(h,C),body.attr(h,C)):(_this.redmineEvolutionSetCookie(h,f),body.attr(h,f))),L.length>0&&!L.parent().hasClass(clActive)&&(_=L.val(),I.removeClass(clActive),L.parent().addClass(clActive),_!==y?(_this.redmineEvolutionSetCookie(v,_),body.attr(v,_)):(_this.redmineEvolutionSetCookie(v,y),body.attr(v,y)),wrapper.removeAttr("style"),$(window).trigger("resize")),!1}));var O=topMenu.find("#"+e),j=topMenu.find("#"+r),z=topMenu.find("#"+f),H=topMenu.find("#re-menu-left");S.click((function(){return O.parent().hasClass(clActive)||(_this.redmineEvolutionSetCookie(s,"false"),body.attr(s,"false"),A.removeClass(clActive),O.trigger("click"),O.parent().addClass(clActive)),j.parent().hasClass(clActive)||(_this.redmineEvolutionSetCookie(c,"false"),body.attr(c,"false"),P.removeClass(clActive),j.trigger("click"),j.parent().addClass(clActive)),z.parent().hasClass(clActive)||(_this.redmineEvolutionSetCookie(h,f),body.attr(h,f),M.removeClass(clActive),z.trigger("click"),z.parent().addClass(clActive)),H.parent().hasClass(clActive)||(_this.redmineEvolutionSetCookie(v,y),body.attr(v,y),I.removeClass(clActive),H.trigger("click"),H.parent().addClass(clActive)),q.removeAttr("checked"),_this.redmineEvolutionSetCookie(openLink,!1),!1}))},redmineEvolutionOpenLinkExternal:function(){let e=body.find("a.external");if(e.length>0){let t;e.each((function(){t=$(this).attr("href"),void 0!==t&&""!=t&&"#"!=t&&$(this).attr("target","_blank")}))}},redmineEvolutionOpenLinkWindow:function(e){var t,n,o="target",i="data-open-link";e?(t=body.find('a:not([rel="nofollow"], .external)')).length>0&&t.each((function(e){void 0!==(n=$(this).attr("href"))&&""!=n&&"#"!=n&&$(this).attr(o,"_blank").attr(i,!0)})):(t=body.find(`[${i}]`)).length>0&&t.removeAttr(i).removeAttr(o)},redmineEvolutionTopMenu:function(){console.log("redmineEvolutionTopMenu"),topMenuFlag=!0;var e,t=topMenu.find("#account a"),n=topMenu.find("#loggedas a"),o=topMenu.find(".revo-theme-settings"),i=topMenu.find("> ul > li > a"),s="";i.length>0&&i.addClass("icon"),(t.length>0||n.length>0)&&(s+='<div class="revo-user-menu revo-top-menu">',s+='  <a href="#" class="revo-user-menu-open icon icon-user"></a>',s+='  <div class="drdn-content">',s+='    <div class="drdn-items">',n.each((function(){void 0===(e=$(this).attr("class"))&&(e="icon-user"),s+='         <a class="icon '+e+'" href="'+$(this).attr("href")+'">'+$(this).text()+"</a>"})),t.each((function(){s+='         <a class="icon '+$(this).attr("class")+'" href="'+$(this).attr("href")+'">'+$(this).text()+"</a>"})),s+="    </div>",s+="  </div>",s+="</div>",o.length>0?o.after(s):topMenuList.before(s),OpenBox({wrap:".revo-user-menu",arrowButton:".revo-user-menu-open",box:".drdn-content",openClass:"ob-done",close:"close-btn"}))},redmineEvolutionGetCookie:function(e){console.log("redmineEvolutionGetCookie");var t=e;(new Date).setFullYear(9999),function(e){checkCookie=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")),checkCookie&&decodeURIComponent(checkCookie[1])}(t)},redmineEvolutionSetCookie:function(e,t){console.log("redmineEvolutionSetCookie");var n=new Date;redmineEvolution=e,n.setFullYear(9999),function(e,t,n){var o=encodeURIComponent(e)+"="+encodeURIComponent(t);document.cookie=o+"; expires="+n+"; path=/"}(redmineEvolution,t,n)},redmineEvolutionGoToTop:function(){console.log("redmineEvolutionGoToTop");var e=body.find(".gototop");e.length>0&&e.remove(),body.append('<a href="#" class="redmine-evolution-go-to-top">');var t=body.find(".redmine-evolution-go-to-top");function n(){position=jQuery(window).scrollTop(),windH=jQuery(window).height(),position>windH/2?t.hasClass("visible")||t.addClass("visible"):t.hasClass("visible")&&t.removeClass("visible")}t.click((function(){return jQuery("html, body").animate({scrollTop:0},{queue:!1,duration:1300}),!1})),n(),jQuery(window).resize((function(){n()})),jQuery(window).scroll((function(){n()}))},redmineEvolutionSearch:function(){console.log("redmineEvolutionSearch"),searchFlag=!0;var e=body.find("#header #quick-search");if(e.length>0){var t=e.find('form[action*="/search"] , #project-jump, #project_quick_jump_box'),n="small-search";if(t.length>0){t.wrapAll('<div class="redmineevolution-modal-search"><div class="redmineevolution-open-box"><div class="redmineevolution-wrapper"><div class="redmineevolution-content">');var o=e.find(".redmineevolution-content"),i="redmineevolution-start-search";e.append('<div class="holder-search-link"><a class="icon redmineevolution-open-search-link" href="#"></a><a class="icon redmineevolution-search-link" href="#" title="'+e.find('label[for="q"] > a').text().toLowerCase()+'">'+e.find('label[for="q"] > a').text().toLowerCase()+"</a></div>"),o.append('<a class="icon redmineevolution-close"></a>'),e.find(".redmineevolution-open-search-link").click((function(){return body.hasClass(n)?body.hasClass(n)&&(body.removeClass(n),a.animate({opacity:1},{queue:!1,duration:speedAnim}),_this.redmineEvolutionSetCookie(n,"false")):(body.addClass(n),_this.redmineEvolutionSetCookie(n,"true")),!1})),_this.redmineEvolutionGetCookie(n),null!==checkCookie&&"true"==checkCookie[1]&&body.addClass(n);var s=e.find(".redmineevolution-search-link"),a=e.find(".redmineevolution-open-box"),r=e.find(".redmineevolution-close");s.click((function(){return body.hasClass(i)||body.addClass(i),a.animate({opacity:1},{queue:!1,duration:speedAnim}),!1})),r.click((function(){return a.animate({opacity:0},{queue:!1,duration:speedAnim,complete:function(){body.hasClass(i)&&body.removeClass(i)}}),!1}))}}},redmineEvolutionTabs:function(){console.log("redmineEvolutionTabs");var e=body.find("#content .tabs, #main  #history .tabs").not(".jstTabs");if(e.length>0){_this.redmineEvolutionSly(e,"#content")}},redmineEvolutionSlyDestroy:function(e,t){t.find(".all-tabs-controll").remove(),e.removeAttr("style"),e.find("> ul").removeAttr("style"),e.sly(!1)},redmineEvolutionSly:function(e,t){console.log("redmineEvolutionSly");var n,o=e,i=o.find(".tabs-buttons"),s=!0;function a(){var n;i.length>0&&i.remove();var a=o.find("ul > li"),r=o.find("ul > li > a"),l=o.find("ul > li > .selected");n=l.length>0?r.index(l):0;var c=0,d=o.outerWidth();if(a.each((function(){c+=$(this).outerWidth(!0)})),c>d)if(s&&o.closest(t).find(".all-tabs-controll").length<1){o.before('<div class="all-tabs-controll">\n\t<div class="hold-control">\n\t\t<ul class="pages"><li class="">1</li><li class="active">2</li><li>3</li><li>4</li><li>5</li><li>6</li></ul>\n\t\t<div class="controls">\n\t\t\t<a href="#" class="btn prevPage"></a>\n\t\t\t<a href="#" class="btn nextPage"></a>\n\t\t</div>\n\t\t</div>\n\t\t<div class="control-tabs">\n\t\t<div class="scrollbar">\n\t\t\t<div class="handle">\n\t\t\t\t<div class="mousearea"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>');var u=o.parent();o.sly({horizontal:1,itemNav:"basic",smart:1,activateOn:"click",mouseDragging:1,touchDragging:1,releaseSwing:1,startAt:n,scrollBar:u.find(".scrollbar"),scrollBy:1,pagesBar:u.find(".pages"),activatePageOn:"click",speed:300,elasticBounds:1,easing:"easeOutExpo",dragHandle:!0,dynamicHandle:!0,clickBar:1,activeClass:"active",disabledClass:"disabled",prevPage:u.find(".prevPage"),nextPage:u.find(".nextPage")}),s=!1}else o.is("#main-menu, #admin-menu")?clMainMenuTop&&o.data("sly").reload():o.data("sly").reload();else s||(_this.redmineEvolutionSlyDestroy(e,t),s=!0)}a(),$(window).resize((function(){n&&clearTimeout(n),n=setTimeout((function(){a()}),500)}))},redmineEvolutionInputFile:function(){console.log("redmineEvolutionInputFile");var e,t,n=body.find('input[type="file"]').not(".done");n.length>0&&n.each((function(n){t=$(this).closest("p"),e=$(this).parent(),t.find("label"),e.hasClass("add_attachment")||$(this).wrap('<div class="add_attachment">'),$(this).before('<span class="info-file">'),$(this).on("change",(function(){$(this).parent().find(".info-file").text($(this).val())})),$(this).addClass("done")}))},redmineEvolutionActivity:function(){console.log("redmineEvolutionActivity");var e=body.find("#activity").not(".done");if(e.length>0){var t=e;t.addClass("done");var n=t.find("dl"),o=t.find("h3, h4"),i="open-activity-link",s="open-activity-box";n.each((function(){$(this).wrap('<div class="rm-activity"></div>')})),o.click((function(){var e=o.index($(this)),t=n.eq(e).parent();return $(this).hasClass(i)?($(this).removeClass(i),t.removeClass(s),t.animate({height:0},{queue:!1,duration:speedAnim})):($(this).addClass(i),t.hasClass(s)||t.addClass(s),t.animate({height:n.eq(e).outerHeight(!0)},{queue:!1,duration:speedAnim,complete:function(){t.css({height:"auto"})}})),!1})),o.eq(0).trigger("click")}},redmineEvolutionHelpSupport:function(){if(console.log("redmineEvolutionHelpSupport"),body.hasClass("controller-questions_sections action-index")){var e,t,n,o,i,s=body.find("#forum_list"),a=s.find(".odd, .even"),r="open-help";if(a.length>0)a.each((function(){e=$(this).find("h3"),t=$(this).find(".topic_list"),(n=t.find(".list-item")).wrapAll('<div class="in"></div>'),e.append('<ul class="list-buttons"><li><a href="#" class="icon icon-open open-help"></a></li></ul>')})),s.find(".open-help").click((function(){return(o=$(this).closest(".odd, .even")).hasClass(r)?(o.removeClass(r),i=0,t.animate({height:i},{queue:!1,duration:speedAnim})):(o.addClass(r),n=o.find(".in"),t=o.find(".topic_list"),i=n.outerHeight(!0),i,t.animate({height:i},{queue:!1,duration:speedAnim,complete:function(){t.css({height:"auto"})}})),!1}))}},redmineEvolutionNews:function(){if(console.log("redmineEvolutionNews"),body.hasClass("controller-news")){var e,t,n,o,i,s=body.find(".news-article"),a="open-news";if(s.length>0)s.each((function(){e=$(this).find("header"),$(this).find(".wiki").wrap('<div class="open-box-news"></div>'),e.append('<ul class="list-buttons"><li><a href="#" class="icon icon-open open-news-link"></a></li></ul>')})),body.find(".open-news-link").click((function(){return t=$(this).parents(".news-article"),n=t.find(".open-box-news"),o=n.find(".wiki"),t.hasClass(a)?(t.removeClass(a),i=0,n.animate({height:i},{queue:!1,duration:speedAnim})):(t.addClass(a),i=o.outerHeight(!0),i,n.animate({height:i},{queue:!1,duration:speedAnim,complete:function(){n.css({height:"auto"})}})),n.animate({height:i},{queue:!1,duration:speedAnim}),!1}))}},redmineEvolutionAttachments:function(e){console.log("redmineEvolutionAttachments");var t=content.find(".attachments");if(t.length>0&&!t.hasClass("done-attachments")){t.addClass("done-attachments");var n=t.find("table");if(n.length>0){var o,i,s,a,r,l,c,d,u,h=["jpg","png","gif","pdf"],p=!1;n.each((function(){if(c=$(this),d=c.find(".icon-download"),a=[],r=[],l=[],d.each((function(e){i=$(this),s=i.attr("href").toLowerCase().split("."),o=s[s.length-1];for(let e=0;e<h.length;e++)o===h[e]&&((u=i.closest("tr")).addClass("hidden-revo"),a.push(i),r.push(o),b=u.find(".icon-attachment"),l.push(b.attr("href").replace("/attachments/","")))})),a.length>0){var n,f,g,m,v,b;p=!0;g='<div class="redmine-evolution-attachments"><div class="holder-gal"><ul>';for(var y=0;y<a.length;y++){n=(S=a[y].closest("tr")).find(".author").clone(),f=S.find(".delete").clone(),v=S.find(".size").clone(),b=S.find(".icon-attachment");var w="",x="",C="",_="";w=n.length>0?'<div class="info">'+n[0].outerHTML+"</div>":'<div class="info"></div>',f.length>0&&(x='<div class="holder-button">'+f[0].outerHTML+"</div>"),v.length>0&&(C=v[0].outerHTML),b.length>0&&(_='<a href="'+b.attr("href")+'">'+b.text()+"</a>"),m="",m='<li>\n<div class="in">\n\t<div class="holder-img">\n',"jpg"==r[y]||"png"==r[y]||"jpg"==r[y]?m+='       <a data-fancybox="gallery" href="'+a[y].attr("href")+'">\n                 <span class="bg-images"></span>\n                 <img src="/attachments/thumbnail/'+l[y]+'/120" alt="image" /> \n':"pdf"==r[y]&&(m+='       <a data-fancybox="gallery" data-type="iframe" href="'+a[y].attr("href")+'">\n                 <span class="bg-images"></span>\n                 <span class="attachments-pdf"></span> \n'),g+=m+='       </a>\n\t</div>\n\t<div class="block-info">\n\t    <div class="in-info">\n\t        <div class="info">\n               \n'+_+C+'\t        </div>\n\t        <div class="holder-button">\n               \n'+a[y][0].outerHTML+'\t        </div>\n\t    </div>\n\t    <div class="in-info">\n'+w+x+"\t    </div>\n\t</div>\n</div>\n</li>\n"}g+="</ul></div></div>",c.after(g);var k=content.find(".thumbnails.images");k.length>0&&k.remove();var S,E,A=(S=c.parent().find(".redmine-evolution-attachments")).find('a[data-fancybox="gallery"]'),T=S.find(".holder-gal"),P=!0;A.fancybox({caption:function(e,t){return $(this).closest("li").find(".block-info").html()}});var M,D,L,I,q;content.find("p.thumbnail");function O(){e&&P&&t.find(".all-tabs-controll").length<1?(I=T.find("> ul > li"),L=I.outerWidth(!0)*I.length,q=t.width(),L>q&&(T.before('<div class="all-tabs-controll">\n\t<div class="hold-control">\n\t\t<ul class="pages"></ul>\n\t\t<div class="controls">\n\t\t\t<a href="#" class="btn prevPage"></a>\n\t\t\t<a href="#" class="btn nextPage"></a>\n\t\t</div>\n\t\t</div>\n\t\t<div class="control-tabs">\n\t\t<div class="scrollbar">\n\t\t\t<div class="handle">\n\t\t\t\t<div class="mousearea"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'),T.sly({horizontal:1,itemNav:"basic",smart:1,activateOn:"click",mouseDragging:1,touchDragging:1,releaseSwing:1,startAt:0,scrollBar:S.find(".scrollbar"),scrollBy:1,pagesBar:S.find(".pages"),activatePageOn:"click",speed:300,elasticBounds:1,easing:"easeOutExpo",dragHandle:1,dynamicHandle:1,clickBar:1,prevPage:S.find(".prevPage"),nextPage:S.find(".nextPage")}),P=!1)):e?(I=T.find("> ul > li"),L=I.outerWidth(!0)*I.length,q=t.width(),L<q?P||(S.find(".all-tabs-controll").remove(),T.sly("destroy"),P=!0):P||T.sly("reload")):P||(S.find(".all-tabs-controll").remove(),T.sly("destroy"),P=!0)}p&&(M=c.closest(".attachments").parent().find(".thumbnail img")).length>0&&M.each((function(){(D=$(this).parent()).is("a")&&D.remove()})),O(),$(window).resize((function(){E&&clearTimeout(E),E=setTimeout((function(){O()}),500)}));var j,z,H,F,R,B,Y,N=content.find("#history").find(".thumbnails a");N.length>0&&N.each((function(){j=$(this).closest('div[id*="note"]').find(".details"),B=$(this).attr("href"),Y=j.find('a[href="'+B+'"]').parent(),z=j.find('a[href="'+B+'"]').parent().find(".icon-download"),F=z.text(),R=z.attr("href"),$(this).attr("href",R).attr("data-fancybox","gallery"),"",H='<div class="in-info info-small-fancybox">\n    <div class="fancybox-in">\n        <div class="info">\n           <a class="name-title" href="'+B+'">'+F+'</a>\n        </div>\n        <div class="holder-button">\n           <a class="icon icon-download '+tooltipCl+'" href="'+R+'"></a>\n        </div>\n    </div>\n</div>',Y.css({display:"none"}),$(this).parent().append(H)})),N.fancybox({caption:function(e,t){return $(this).parent().find(".in-info").html()}})}}))}}}};function OpenBox(e){$(e.wrap).each((function(){var t=$(this),n=t.find(e.link),o=t.find(e.arrowButton),i=t.find(e.close),s=e.openClass;n.click((function(){return $(e.wrap).not(t).removeClass(e.openClass),t.hasClass(e.openClass)?t.removeClass(e.openClass):t.addClass(e.openClass),!1})),t.hover((function(){$(this).addClass("hovering")}),(function(){$(this).removeClass("hovering")})),o.click((function(){return $(this).parent().hasClass(s)?$(this).parent().removeClass(s):($("."+s).removeClass(s),$(this).parent().addClass(s)),!1})),$("body").click((function(){t.hasClass("hovering")||t.removeClass(e.openClass)})),i.click((function(){return t.removeClass(e.openClass),!1}))}))}!function(e,t,n,o){"use strict";function i(e,t){var o,i,s,a=[],r=0;e&&e.isDefaultPrevented()||(e.preventDefault(),t=t||{},e&&e.data&&(t=p(e.data.options,t)),o=t.$target||n(e.currentTarget).trigger("blur"),(s=n.fancybox.getInstance())&&s.$trigger&&s.$trigger.is(o)||(t.selector?a=n(t.selector):(i=o.attr("data-fancybox")||"")?a=(a=e.data?e.data.items:[]).length?a.filter('[data-fancybox="'+i+'"]'):n('[data-fancybox="'+i+'"]'):a=[o],(r=n(a).index(o))<0&&(r=0),(s=n.fancybox.open(a,t,r)).$trigger=o))}if(e.console=e.console||{info:function(e){}},n){if(n.fn.fancybox)return void console.info("fancyBox already initialized");var s={closeExisting:!1,loop:!1,gutter:50,keyboard:!0,preventCaptionOverlap:!0,arrows:!0,infobar:!0,smallBtn:"auto",toolbar:"auto",buttons:["zoom","slideShow","thumbs","close"],idleTime:3,protect:!1,modal:!1,image:{preload:!1},ajax:{settings:{data:{fancybox:!0}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" allowfullscreen="allowfullscreen" allow="autoplay; fullscreen" src=""></iframe>',preload:!0,css:{},attr:{scrolling:"auto"}},video:{tpl:'<video class="fancybox-video" controls controlsList="nodownload" poster="{{poster}}"><source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos, <a href="{{src}}">download</a> and watch with your favorite video player!</video>',format:"",autoStart:!0},defaultType:"image",animationEffect:"zoom",animationDuration:366,zoomOpacity:"auto",transitionEffect:"fade",transitionDuration:366,slideClass:"",baseClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div><div class="fancybox-caption"><div class="fancybox-caption__body"></div></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>{{ERROR}}</p></div>',btnTpl:{download:'<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}" href="javascript:;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.62 17.09V19H5.38v-1.91zm-2.97-6.96L17 11.45l-5 4.87-5-4.87 1.36-1.32 2.68 2.64V5h1.92v7.77z"/></svg></a>',zoom:'<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.7 17.3l-3-3a5.9 5.9 0 0 0-.6-7.6 5.9 5.9 0 0 0-8.4 0 5.9 5.9 0 0 0 0 8.4 5.9 5.9 0 0 0 7.7.7l3 3a1 1 0 0 0 1.3 0c.4-.5.4-1 0-1.5zM8.1 13.8a4 4 0 0 1 0-5.7 4 4 0 0 1 5.7 0 4 4 0 0 1 0 5.7 4 4 0 0 1-5.7 0z"/></svg></button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 10.6L6.6 5.2 5.2 6.6l5.4 5.4-5.4 5.4 1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4-1.4-1.4-5.4 5.4z"/></svg></button>',arrowLeft:'<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.28 15.7l-1.34 1.37L5 12l4.94-5.07 1.34 1.38-2.68 2.72H19v1.94H8.6z"/></svg></div></button>',arrowRight:'<button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.4 12.97l-2.68 2.72 1.34 1.38L19 12l-4.94-5.07-1.34 1.38 2.68 2.72H5v1.94z"/></svg></div></button>',smallBtn:'<button type="button" data-fancybox-close class="fancybox-button fancybox-close-small" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 12l5-5-1-1-5 5-5-5-1 1 5 5-5 5 1 1 5-5 5 5 1-1z"/></svg></button>'},parentEl:"body",hideScrollbar:!0,autoFocus:!0,backFocus:!0,trapFocus:!0,fullScreen:{autoStart:!1},touch:{vertical:!0,momentum:!0},hash:null,media:{},slideShow:{autoStart:!1,speed:3e3},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"},wheel:"auto",onInit:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeClose:n.noop,afterClose:n.noop,onActivate:n.noop,onDeactivate:n.noop,clickContent:function(e,t){return"image"===e.type&&"zoom"},clickSlide:"close",clickOutside:"close",dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1,mobile:{preventCaptionOverlap:!1,idleTime:!1,clickContent:function(e,t){return"image"===e.type&&"toggleControls"},clickSlide:function(e,t){return"image"===e.type?"toggleControls":"close"},dblclickContent:function(e,t){return"image"===e.type&&"zoom"},dblclickSlide:function(e,t){return"image"===e.type&&"zoom"}},lang:"en",i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails",DOWNLOAD:"Download",SHARE:"Share",ZOOM:"Zoom"},de:{CLOSE:"Schlie&szlig;en",NEXT:"Weiter",PREV:"Zur&uuml;ck",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es sp&auml;ter nochmal.",PLAY_START:"Diaschau starten",PLAY_STOP:"Diaschau beenden",FULL_SCREEN:"Vollbild",THUMBS:"Vorschaubilder",DOWNLOAD:"Herunterladen",SHARE:"Teilen",ZOOM:"Vergr&ouml;&szlig;ern"}}},a=n(e),r=n(t),l=0,c=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||function(t){return e.setTimeout(t,1e3/60)},d=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.oCancelAnimationFrame||function(t){e.clearTimeout(t)},u=function(){var e,n=t.createElement("fakeelement"),o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in o)if(void 0!==n.style[e])return o[e];return"transitionend"}(),h=function(e){return e&&e.length&&e[0].offsetHeight},p=function(e,t){var o=n.extend(!0,{},e,t);return n.each(t,(function(e,t){n.isArray(t)&&(o[e]=t)})),o},f=function(e){var o,i;return!(!e||e.ownerDocument!==t)&&(n(".fancybox-container").css("pointer-events","none"),o={x:e.getBoundingClientRect().left+e.offsetWidth/2,y:e.getBoundingClientRect().top+e.offsetHeight/2},i=t.elementFromPoint(o.x,o.y)===e,n(".fancybox-container").css("pointer-events",""),i)},g=function(e,t,o){var i=this;i.opts=p({index:o},n.fancybox.defaults),n.isPlainObject(t)&&(i.opts=p(i.opts,t)),n.fancybox.isMobile&&(i.opts=p(i.opts,i.opts.mobile)),i.id=i.opts.id||++l,i.currIndex=parseInt(i.opts.index,10)||0,i.prevIndex=null,i.prevPos=null,i.currPos=0,i.firstRun=!0,i.group=[],i.slides={},i.addContent(e),i.group.length&&i.init()};n.extend(g.prototype,{init:function(){var o,i,s=this,a=s.group[s.currIndex].opts;a.closeExisting&&n.fancybox.close(!0),n("body").addClass("fancybox-active"),!n.fancybox.getInstance()&&!1!==a.hideScrollbar&&!n.fancybox.isMobile&&t.body.scrollHeight>e.innerHeight&&(n("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar{margin-right:'+(e.innerWidth-t.documentElement.clientWidth)+"px;}</style>"),n("body").addClass("compensate-for-scrollbar")),i="",n.each(a.buttons,(function(e,t){i+=a.btnTpl[t]||""})),o=n(s.translate(s,a.baseTpl.replace("{{buttons}}",i).replace("{{arrows}}",a.btnTpl.arrowLeft+a.btnTpl.arrowRight))).attr("id","fancybox-container-"+s.id).addClass(a.baseClass).data("FancyBox",s).appendTo(a.parentEl),s.$refs={container:o},["bg","inner","infobar","toolbar","stage","caption","navigation"].forEach((function(e){s.$refs[e]=o.find(".fancybox-"+e)})),s.trigger("onInit"),s.activate(),s.jumpTo(s.currIndex)},translate:function(e,t){var n=e.opts.i18n[e.opts.lang]||e.opts.i18n.en;return t.replace(/\{\{(\w+)\}\}/g,(function(e,t){return void 0===n[t]?e:n[t]}))},addContent:function(e){var t,o=this,i=n.makeArray(e);n.each(i,(function(e,t){var i,s,a,r,l,c={},d={};n.isPlainObject(t)?(c=t,d=t.opts||t):"object"===n.type(t)&&n(t).length?(d=(i=n(t)).data()||{},(d=n.extend(!0,{},d,d.options)).$orig=i,c.src=o.opts.src||d.src||i.attr("href"),c.type||c.src||(c.type="inline",c.src=t)):c={type:"html",src:t+""},c.opts=n.extend(!0,{},o.opts,d),n.isArray(d.buttons)&&(c.opts.buttons=d.buttons),n.fancybox.isMobile&&c.opts.mobile&&(c.opts=p(c.opts,c.opts.mobile)),s=c.type||c.opts.type,r=c.src||"",!s&&r&&((a=r.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(s="video",c.opts.video.format||(c.opts.video.format="video/"+("ogv"===a[1]?"ogg":a[1]))):r.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?s="image":r.match(/\.(pdf)((\?|#).*)?$/i)?(s="iframe",c=n.extend(!0,c,{contentType:"pdf",opts:{iframe:{preload:!1}}})):"#"===r.charAt(0)&&(s="inline")),s?c.type=s:o.trigger("objectNeedsType",c),c.contentType||(c.contentType=n.inArray(c.type,["html","inline","ajax"])>-1?"html":c.type),c.index=o.group.length,"auto"==c.opts.smallBtn&&(c.opts.smallBtn=n.inArray(c.type,["html","inline","ajax"])>-1),"auto"===c.opts.toolbar&&(c.opts.toolbar=!c.opts.smallBtn),c.$thumb=c.opts.$thumb||null,c.opts.$trigger&&c.index===o.opts.index&&(c.$thumb=c.opts.$trigger.find("img:first"),c.$thumb.length&&(c.opts.$orig=c.opts.$trigger)),c.$thumb&&c.$thumb.length||!c.opts.$orig||(c.$thumb=c.opts.$orig.find("img:first")),c.$thumb&&!c.$thumb.length&&(c.$thumb=null),c.thumb=c.opts.thumb||(c.$thumb?c.$thumb[0].src:null),"function"===n.type(c.opts.caption)&&(c.opts.caption=c.opts.caption.apply(t,[o,c])),"function"===n.type(o.opts.caption)&&(c.opts.caption=o.opts.caption.apply(t,[o,c])),c.opts.caption instanceof n||(c.opts.caption=void 0===c.opts.caption?"":c.opts.caption+""),"ajax"===c.type&&((l=r.split(/\s+/,2)).length>1&&(c.src=l.shift(),c.opts.filter=l.shift())),c.opts.modal&&(c.opts=n.extend(!0,c.opts,{trapFocus:!0,infobar:0,toolbar:0,smallBtn:0,keyboard:0,slideShow:0,fullScreen:0,thumbs:0,touch:0,clickContent:!1,clickSlide:!1,clickOutside:!1,dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1})),o.group.push(c)})),Object.keys(o.slides).length&&(o.updateControls(),(t=o.Thumbs)&&t.isActive&&(t.create(),t.focus()))},addEvents:function(){var t=this;t.removeEvents(),t.$refs.container.on("click.fb-close","[data-fancybox-close]",(function(e){e.stopPropagation(),e.preventDefault(),t.close(e)})).on("touchstart.fb-prev click.fb-prev","[data-fancybox-prev]",(function(e){e.stopPropagation(),e.preventDefault(),t.previous()})).on("touchstart.fb-next click.fb-next","[data-fancybox-next]",(function(e){e.stopPropagation(),e.preventDefault(),t.next()})).on("click.fb","[data-fancybox-zoom]",(function(e){t[t.isScaledDown()?"scaleToActual":"scaleToFit"]()})),a.on("orientationchange.fb resize.fb",(function(e){e&&e.originalEvent&&"resize"===e.originalEvent.type?(t.requestId&&d(t.requestId),t.requestId=c((function(){t.update(e)}))):(t.current&&"iframe"===t.current.type&&t.$refs.stage.hide(),setTimeout((function(){t.$refs.stage.show(),t.update(e)}),n.fancybox.isMobile?600:250))})),r.on("keydown.fb",(function(e){var o=(n.fancybox?n.fancybox.getInstance():null).current,i=e.keyCode||e.which;if(9!=i)return!o.opts.keyboard||e.ctrlKey||e.altKey||e.shiftKey||n(e.target).is("input,textarea,video,audio,select")?void 0:8===i||27===i?(e.preventDefault(),void t.close(e)):37===i||38===i?(e.preventDefault(),void t.previous()):39===i||40===i?(e.preventDefault(),void t.next()):void t.trigger("afterKeydown",e,i);o.opts.trapFocus&&t.focus(e)})),t.group[t.currIndex].opts.idleTime&&(t.idleSecondsCounter=0,r.on("mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle",(function(e){t.idleSecondsCounter=0,t.isIdle&&t.showControls(),t.isIdle=!1})),t.idleInterval=e.setInterval((function(){++t.idleSecondsCounter>=t.group[t.currIndex].opts.idleTime&&!t.isDragging&&(t.isIdle=!0,t.idleSecondsCounter=0,t.hideControls())}),1e3))},removeEvents:function(){var t=this;a.off("orientationchange.fb resize.fb"),r.off("keydown.fb .fb-idle"),this.$refs.container.off(".fb-close .fb-prev .fb-next"),t.idleInterval&&(e.clearInterval(t.idleInterval),t.idleInterval=null)},previous:function(e){return this.jumpTo(this.currPos-1,e)},next:function(e){return this.jumpTo(this.currPos+1,e)},jumpTo:function(e,t){var o,i,s,a,r,l,c,d,u,p=this,f=p.group.length;if(!(p.isDragging||p.isClosing||p.isAnimating&&p.firstRun)){if(e=parseInt(e,10),!(s=p.current?p.current.opts.loop:p.opts.loop)&&(e<0||e>=f))return!1;if(o=p.firstRun=!Object.keys(p.slides).length,r=p.current,p.prevIndex=p.currIndex,p.prevPos=p.currPos,a=p.createSlide(e),f>1&&((s||a.index<f-1)&&p.createSlide(e+1),(s||a.index>0)&&p.createSlide(e-1)),p.current=a,p.currIndex=a.index,p.currPos=a.pos,p.trigger("beforeShow",o),p.updateControls(),a.forcedDuration=void 0,n.isNumeric(t)?a.forcedDuration=t:t=a.opts[o?"animationDuration":"transitionDuration"],t=parseInt(t,10),i=p.isMoved(a),a.$slide.addClass("fancybox-slide--current"),o)return a.opts.animationEffect&&t&&p.$refs.container.css("transition-duration",t+"ms"),p.$refs.container.addClass("fancybox-is-open").trigger("focus"),p.loadSlide(a),void p.preload("image");l=n.fancybox.getTranslate(r.$slide),c=n.fancybox.getTranslate(p.$refs.stage),n.each(p.slides,(function(e,t){n.fancybox.stop(t.$slide,!0)})),r.pos!==a.pos&&(r.isComplete=!1),r.$slide.removeClass("fancybox-slide--complete fancybox-slide--current"),i?(u=l.left-(r.pos*l.width+r.pos*r.opts.gutter),n.each(p.slides,(function(e,o){o.$slide.removeClass("fancybox-animated").removeClass((function(e,t){return(t.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")}));var i=o.pos*l.width+o.pos*o.opts.gutter;n.fancybox.setTranslate(o.$slide,{top:0,left:i-c.left+u}),o.pos!==a.pos&&o.$slide.addClass("fancybox-slide--"+(o.pos>a.pos?"next":"previous")),h(o.$slide),n.fancybox.animate(o.$slide,{top:0,left:(o.pos-a.pos)*l.width+(o.pos-a.pos)*o.opts.gutter},t,(function(){o.$slide.css({transform:"",opacity:""}).removeClass("fancybox-slide--next fancybox-slide--previous"),o.pos===p.currPos&&p.complete()}))}))):t&&a.opts.transitionEffect&&(d="fancybox-animated fancybox-fx-"+a.opts.transitionEffect,r.$slide.addClass("fancybox-slide--"+(r.pos>a.pos?"next":"previous")),n.fancybox.animate(r.$slide,d,t,(function(){r.$slide.removeClass(d).removeClass("fancybox-slide--next fancybox-slide--previous")}),!1)),a.isLoaded?p.revealContent(a):p.loadSlide(a),p.preload("image")}},createSlide:function(e){var t,o,i=this;return o=(o=e%i.group.length)<0?i.group.length+o:o,!i.slides[e]&&i.group[o]&&(t=n('<div class="fancybox-slide"></div>').appendTo(i.$refs.stage),i.slides[e]=n.extend(!0,{},i.group[o],{pos:e,$slide:t,isLoaded:!1}),i.updateSlide(i.slides[e])),i.slides[e]},scaleToActual:function(e,t,o){var i,s,a,r,l,c=this,d=c.current,u=d.$content,h=n.fancybox.getTranslate(d.$slide).width,p=n.fancybox.getTranslate(d.$slide).height,f=d.width,g=d.height;c.isAnimating||c.isMoved()||!u||"image"!=d.type||!d.isLoaded||d.hasError||(c.isAnimating=!0,n.fancybox.stop(u),e=void 0===e?.5*h:e,t=void 0===t?.5*p:t,(i=n.fancybox.getTranslate(u)).top-=n.fancybox.getTranslate(d.$slide).top,i.left-=n.fancybox.getTranslate(d.$slide).left,r=f/i.width,l=g/i.height,s=.5*h-.5*f,a=.5*p-.5*g,f>h&&((s=i.left*r-(e*r-e))>0&&(s=0),s<h-f&&(s=h-f)),g>p&&((a=i.top*l-(t*l-t))>0&&(a=0),a<p-g&&(a=p-g)),c.updateCursor(f,g),n.fancybox.animate(u,{top:a,left:s,scaleX:r,scaleY:l},o||366,(function(){c.isAnimating=!1})),c.SlideShow&&c.SlideShow.isActive&&c.SlideShow.stop())},scaleToFit:function(e){var t,o=this,i=o.current,s=i.$content;o.isAnimating||o.isMoved()||!s||"image"!=i.type||!i.isLoaded||i.hasError||(o.isAnimating=!0,n.fancybox.stop(s),t=o.getFitPos(i),o.updateCursor(t.width,t.height),n.fancybox.animate(s,{top:t.top,left:t.left,scaleX:t.width/s.width(),scaleY:t.height/s.height()},e||366,(function(){o.isAnimating=!1})))},getFitPos:function(e){var t,o,i,s,a=e.$content,r=e.$slide,l=e.width||e.opts.width,c=e.height||e.opts.height,d={};return!!(e.isLoaded&&a&&a.length)&&(t=n.fancybox.getTranslate(this.$refs.stage).width,o=n.fancybox.getTranslate(this.$refs.stage).height,t-=parseFloat(r.css("paddingLeft"))+parseFloat(r.css("paddingRight"))+parseFloat(a.css("marginLeft"))+parseFloat(a.css("marginRight")),o-=parseFloat(r.css("paddingTop"))+parseFloat(r.css("paddingBottom"))+parseFloat(a.css("marginTop"))+parseFloat(a.css("marginBottom")),l&&c||(l=t,c=o),(l*=i=Math.min(1,t/l,o/c))>t-.5&&(l=t),(c*=i)>o-.5&&(c=o),"image"===e.type?(d.top=Math.floor(.5*(o-c))+parseFloat(r.css("paddingTop")),d.left=Math.floor(.5*(t-l))+parseFloat(r.css("paddingLeft"))):"video"===e.contentType&&(c>l/(s=e.opts.width&&e.opts.height?l/c:e.opts.ratio||16/9)?c=l/s:l>c*s&&(l=c*s)),d.width=l,d.height=c,d)},update:function(e){var t=this;n.each(t.slides,(function(n,o){t.updateSlide(o,e)}))},updateSlide:function(e,t){var o=this,i=e&&e.$content,s=e.width||e.opts.width,a=e.height||e.opts.height,r=e.$slide;o.adjustCaption(e),i&&(s||a||"video"===e.contentType)&&!e.hasError&&(n.fancybox.stop(i),n.fancybox.setTranslate(i,o.getFitPos(e)),e.pos===o.currPos&&(o.isAnimating=!1,o.updateCursor())),o.adjustLayout(e),r.length&&(r.trigger("refresh"),e.pos===o.currPos&&o.$refs.toolbar.add(o.$refs.navigation.find(".fancybox-button--arrow_right")).toggleClass("compensate-for-scrollbar",r.get(0).scrollHeight>r.get(0).clientHeight)),o.trigger("onUpdate",e,t)},centerSlide:function(e){var t=this,o=t.current,i=o.$slide;!t.isClosing&&o&&(i.siblings().css({transform:"",opacity:""}),i.parent().children().removeClass("fancybox-slide--previous fancybox-slide--next"),n.fancybox.animate(i,{top:0,left:0,opacity:1},void 0===e?0:e,(function(){i.css({transform:"",opacity:""}),o.isComplete||t.complete()}),!1))},isMoved:function(e){var t,o,i=e||this.current;return!!i&&(o=n.fancybox.getTranslate(this.$refs.stage),t=n.fancybox.getTranslate(i.$slide),!i.$slide.hasClass("fancybox-animated")&&(Math.abs(t.top-o.top)>.5||Math.abs(t.left-o.left)>.5))},updateCursor:function(e,t){var o,i,s=this,a=s.current,r=s.$refs.container;a&&!s.isClosing&&s.Guestures&&(r.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-zoomOut fancybox-can-swipe fancybox-can-pan"),i=!!(o=s.canPan(e,t))||s.isZoomable(),r.toggleClass("fancybox-is-zoomable",i),n("[data-fancybox-zoom]").prop("disabled",!i),o?r.addClass("fancybox-can-pan"):i&&("zoom"===a.opts.clickContent||n.isFunction(a.opts.clickContent)&&"zoom"==a.opts.clickContent(a))?r.addClass("fancybox-can-zoomIn"):a.opts.touch&&(a.opts.touch.vertical||s.group.length>1)&&"video"!==a.contentType&&r.addClass("fancybox-can-swipe"))},isZoomable:function(){var e,t=this,n=t.current;if(n&&!t.isClosing&&"image"===n.type&&!n.hasError){if(!n.isLoaded)return!0;if((e=t.getFitPos(n))&&(n.width>e.width||n.height>e.height))return!0}return!1},isScaledDown:function(e,t){var o=!1,i=this.current,s=i.$content;return void 0!==e&&void 0!==t?o=e<i.width&&t<i.height:s&&(o=(o=n.fancybox.getTranslate(s)).width<i.width&&o.height<i.height),o},canPan:function(e,t){var o=this.current,i=null,s=!1;return"image"===o.type&&(o.isComplete||e&&t)&&!o.hasError&&(s=this.getFitPos(o),void 0!==e&&void 0!==t?i={width:e,height:t}:o.isComplete&&(i=n.fancybox.getTranslate(o.$content)),i&&s&&(s=Math.abs(i.width-s.width)>1.5||Math.abs(i.height-s.height)>1.5)),s},loadSlide:function(e){var t,o,i,s=this;if(!e.isLoading&&!e.isLoaded){if(e.isLoading=!0,!1===s.trigger("beforeLoad",e))return e.isLoading=!1,!1;switch(t=e.type,(o=e.$slide).off("refresh").trigger("onReset").addClass(e.opts.slideClass),t){case"image":s.setImage(e);break;case"iframe":s.setIframe(e);break;case"html":s.setContent(e,e.src||e.content);break;case"video":s.setContent(e,e.opts.video.tpl.replace(/\{\{src\}\}/gi,e.src).replace("{{format}}",e.opts.videoFormat||e.opts.video.format||"").replace("{{poster}}",e.thumb||""));break;case"inline":n(e.src).length?s.setContent(e,n(e.src)):s.setError(e);break;case"ajax":s.showLoading(e),i=n.ajax(n.extend({},e.opts.ajax.settings,{url:e.src,success:function(t,n){"success"===n&&s.setContent(e,t)},error:function(t,n){t&&"abort"!==n&&s.setError(e)}})),o.one("onReset",(function(){i.abort()}));break;default:s.setError(e)}return!0}},setImage:function(e){var o,i=this;setTimeout((function(){var t=e.$image;i.isClosing||!e.isLoading||t&&t.length&&t[0].complete||e.hasError||i.showLoading(e)}),50),i.checkSrcset(e),e.$content=n('<div class="fancybox-content"></div>').addClass("fancybox-is-hidden").appendTo(e.$slide.addClass("fancybox-slide--image")),!1!==e.opts.preload&&e.opts.width&&e.opts.height&&e.thumb&&(e.width=e.opts.width,e.height=e.opts.height,(o=t.createElement("img")).onerror=function(){n(this).remove(),e.$ghost=null},o.onload=function(){i.afterLoad(e)},e.$ghost=n(o).addClass("fancybox-image").appendTo(e.$content).attr("src",e.thumb)),i.setBigImage(e)},checkSrcset:function(t){var n,o,i,s,a=t.opts.srcset||t.opts.image.srcset;if(a){i=e.devicePixelRatio||1,s=e.innerWidth*i,o=a.split(",").map((function(e){var t={};return e.trim().split(/\s+/).forEach((function(e,n){var o=parseInt(e.substring(0,e.length-1),10);if(0===n)return t.url=e;o&&(t.value=o,t.postfix=e[e.length-1])})),t})),o.sort((function(e,t){return e.value-t.value}));for(var r=0;r<o.length;r++){var l=o[r];if("w"===l.postfix&&l.value>=s||"x"===l.postfix&&l.value>=i){n=l;break}}!n&&o.length&&(n=o[o.length-1]),n&&(t.src=n.url,t.width&&t.height&&"w"==n.postfix&&(t.height=t.width/t.height*n.value,t.width=n.value),t.opts.srcset=a)}},setBigImage:function(e){var o=this,i=t.createElement("img"),s=n(i);e.$image=s.one("error",(function(){o.setError(e)})).one("load",(function(){var t;e.$ghost||(o.resolveImageSlideSize(e,this.naturalWidth,this.naturalHeight),o.afterLoad(e)),o.isClosing||(e.opts.srcset&&((t=e.opts.sizes)&&"auto"!==t||(t=(e.width/e.height>1&&a.width()/a.height()>1?"100":Math.round(e.width/e.height*100))+"vw"),s.attr("sizes",t).attr("srcset",e.opts.srcset)),e.$ghost&&setTimeout((function(){e.$ghost&&!o.isClosing&&e.$ghost.hide()}),Math.min(300,Math.max(1e3,e.height/1600))),o.hideLoading(e))})).addClass("fancybox-image").attr("src",e.src).appendTo(e.$content),(i.complete||"complete"==i.readyState)&&s.naturalWidth&&s.naturalHeight?s.trigger("load"):i.error&&s.trigger("error")},resolveImageSlideSize:function(e,t,n){var o=parseInt(e.opts.width,10),i=parseInt(e.opts.height,10);e.width=t,e.height=n,o>0&&(e.width=o,e.height=Math.floor(o*n/t)),i>0&&(e.width=Math.floor(i*t/n),e.height=i)},setIframe:function(e){var t,o=this,i=e.opts.iframe,s=e.$slide;e.$content=n('<div class="fancybox-content'+(i.preload?" fancybox-is-hidden":"")+'"></div>').css(i.css).appendTo(s),s.addClass("fancybox-slide--"+e.contentType),e.$iframe=t=n(i.tpl.replace(/\{rnd\}/g,(new Date).getTime())).attr(i.attr).appendTo(e.$content),i.preload?(o.showLoading(e),t.on("load.fb error.fb",(function(t){this.isReady=1,e.$slide.trigger("refresh"),o.afterLoad(e)})),s.on("refresh.fb",(function(){var n,o=e.$content,a=i.css.width,r=i.css.height;if(1===t[0].isReady){try{n=t.contents().find("body")}catch(e){}n&&n.length&&n.children().length&&(s.css("overflow","visible"),o.css({width:"100%","max-width":"100%",height:"9999px"}),void 0===a&&(a=Math.ceil(Math.max(n[0].clientWidth,n.outerWidth(!0)))),o.css("width",a||"").css("max-width",""),void 0===r&&(r=Math.ceil(Math.max(n[0].clientHeight,n.outerHeight(!0)))),o.css("height",r||""),s.css("overflow","auto")),o.removeClass("fancybox-is-hidden")}}))):o.afterLoad(e),t.attr("src",e.src),s.one("onReset",(function(){try{n(this).find("iframe").hide().unbind().attr("src","//about:blank")}catch(e){}n(this).off("refresh.fb").empty(),e.isLoaded=!1,e.isRevealed=!1}))},setContent:function(e,t){var o=this;o.isClosing||(o.hideLoading(e),e.$content&&n.fancybox.stop(e.$content),e.$slide.empty(),function(e){return e&&e.hasOwnProperty&&e instanceof n}(t)&&t.parent().length?((t.hasClass("fancybox-content")||t.parent().hasClass("fancybox-content"))&&t.parents(".fancybox-slide").trigger("onReset"),e.$placeholder=n("<div>").hide().insertAfter(t),t.css("display","inline-block")):e.hasError||("string"===n.type(t)&&(t=n("<div>").append(n.trim(t)).contents()),e.opts.filter&&(t=n("<div>").html(t).find(e.opts.filter))),e.$slide.one("onReset",(function(){n(this).find("video,audio").trigger("pause"),e.$placeholder&&(e.$placeholder.after(t.removeClass("fancybox-content").hide()).remove(),e.$placeholder=null),e.$smallBtn&&(e.$smallBtn.remove(),e.$smallBtn=null),e.hasError||(n(this).empty(),e.isLoaded=!1,e.isRevealed=!1)})),n(t).appendTo(e.$slide),n(t).is("video,audio")&&(n(t).addClass("fancybox-video"),n(t).wrap("<div></div>"),e.contentType="video",e.opts.width=e.opts.width||n(t).attr("width"),e.opts.height=e.opts.height||n(t).attr("height")),e.$content=e.$slide.children().filter("div,form,main,video,audio,article,.fancybox-content").first(),e.$content.siblings().hide(),e.$content.length||(e.$content=e.$slide.wrapInner("<div></div>").children().first()),e.$content.addClass("fancybox-content"),e.$slide.addClass("fancybox-slide--"+e.contentType),o.afterLoad(e))},setError:function(e){e.hasError=!0,e.$slide.trigger("onReset").removeClass("fancybox-slide--"+e.contentType).addClass("fancybox-slide--error"),e.contentType="html",this.setContent(e,this.translate(e,e.opts.errorTpl)),e.pos===this.currPos&&(this.isAnimating=!1)},showLoading:function(e){var t=this;(e=e||t.current)&&!e.$spinner&&(e.$spinner=n(t.translate(t,t.opts.spinnerTpl)).appendTo(e.$slide).hide().fadeIn("fast"))},hideLoading:function(e){(e=e||this.current)&&e.$spinner&&(e.$spinner.stop().remove(),delete e.$spinner)},afterLoad:function(e){var t=this;t.isClosing||(e.isLoading=!1,e.isLoaded=!0,t.trigger("afterLoad",e),t.hideLoading(e),!e.opts.smallBtn||e.$smallBtn&&e.$smallBtn.length||(e.$smallBtn=n(t.translate(e,e.opts.btnTpl.smallBtn)).appendTo(e.$content)),e.opts.protect&&e.$content&&!e.hasError&&(e.$content.on("contextmenu.fb",(function(e){return 2==e.button&&e.preventDefault(),!0})),"image"===e.type&&n('<div class="fancybox-spaceball"></div>').appendTo(e.$content)),t.adjustCaption(e),t.adjustLayout(e),e.pos===t.currPos&&t.updateCursor(),t.revealContent(e))},adjustCaption:function(e){var t,n=this,o=e||n.current,i=o.opts.caption,s=o.opts.preventCaptionOverlap,a=n.$refs.caption,r=!1;a.toggleClass("fancybox-caption--separate",s),s&&i&&i.length&&(o.pos!==n.currPos?((t=a.clone().appendTo(a.parent())).children().eq(0).empty().html(i),r=t.outerHeight(!0),t.empty().remove()):n.$caption&&(r=n.$caption.outerHeight(!0)),o.$slide.css("padding-bottom",r||""))},adjustLayout:function(e){var t,n,o,i,s=e||this.current;s.isLoaded&&!0!==s.opts.disableLayoutFix&&(s.$content.css("margin-bottom",""),s.$content.outerHeight()>s.$slide.height()+.5&&(o=s.$slide[0].style["padding-bottom"],i=s.$slide.css("padding-bottom"),parseFloat(i)>0&&(t=s.$slide[0].scrollHeight,s.$slide.css("padding-bottom",0),Math.abs(t-s.$slide[0].scrollHeight)<1&&(n=i),s.$slide.css("padding-bottom",o))),s.$content.css("margin-bottom",n))},revealContent:function(e){var t,o,i,s,a=this,r=e.$slide,l=!1,c=!1,d=a.isMoved(e),u=e.isRevealed;return e.isRevealed=!0,t=e.opts[a.firstRun?"animationEffect":"transitionEffect"],i=e.opts[a.firstRun?"animationDuration":"transitionDuration"],i=parseInt(void 0===e.forcedDuration?i:e.forcedDuration,10),!d&&e.pos===a.currPos&&i||(t=!1),"zoom"===t&&(e.pos===a.currPos&&i&&"image"===e.type&&!e.hasError&&(c=a.getThumbPos(e))?l=a.getFitPos(e):t="fade"),"zoom"===t?(a.isAnimating=!0,l.scaleX=l.width/c.width,l.scaleY=l.height/c.height,"auto"==(s=e.opts.zoomOpacity)&&(s=Math.abs(e.width/e.height-c.width/c.height)>.1),s&&(c.opacity=.1,l.opacity=1),n.fancybox.setTranslate(e.$content.removeClass("fancybox-is-hidden"),c),h(e.$content),void n.fancybox.animate(e.$content,l,i,(function(){a.isAnimating=!1,a.complete()}))):(a.updateSlide(e),t?(n.fancybox.stop(r),o="fancybox-slide--"+(e.pos>=a.prevPos?"next":"previous")+" fancybox-animated fancybox-fx-"+t,r.addClass(o).removeClass("fancybox-slide--current"),e.$content.removeClass("fancybox-is-hidden"),h(r),"image"!==e.type&&e.$content.hide().show(0),void n.fancybox.animate(r,"fancybox-slide--current",i,(function(){r.removeClass(o).css({transform:"",opacity:""}),e.pos===a.currPos&&a.complete()}),!0)):(e.$content.removeClass("fancybox-is-hidden"),u||!d||"image"!==e.type||e.hasError||e.$content.hide().fadeIn("fast"),void(e.pos===a.currPos&&a.complete())))},getThumbPos:function(e){var t,o,i,s,a,r=!1,l=e.$thumb;return!(!l||!f(l[0]))&&(t=n.fancybox.getTranslate(l),o=parseFloat(l.css("border-top-width")||0),i=parseFloat(l.css("border-right-width")||0),s=parseFloat(l.css("border-bottom-width")||0),a=parseFloat(l.css("border-left-width")||0),r={top:t.top+o,left:t.left+a,width:t.width-i-a,height:t.height-o-s,scaleX:1,scaleY:1},t.width>0&&t.height>0&&r)},complete:function(){var e,t=this,o=t.current,i={};!t.isMoved()&&o.isLoaded&&(o.isComplete||(o.isComplete=!0,o.$slide.siblings().trigger("onReset"),t.preload("inline"),h(o.$slide),o.$slide.addClass("fancybox-slide--complete"),n.each(t.slides,(function(e,o){o.pos>=t.currPos-1&&o.pos<=t.currPos+1?i[o.pos]=o:o&&(n.fancybox.stop(o.$slide),o.$slide.off().remove())})),t.slides=i),t.isAnimating=!1,t.updateCursor(),t.trigger("afterShow"),o.opts.video.autoStart&&o.$slide.find("video,audio").filter(":visible:first").trigger("play").one("ended",(function(){Document.exitFullscreen?Document.exitFullscreen():this.webkitExitFullscreen&&this.webkitExitFullscreen(),t.next()})),o.opts.autoFocus&&"html"===o.contentType&&((e=o.$content.find("input[autofocus]:enabled:visible:first")).length?e.trigger("focus"):t.focus(null,!0)),o.$slide.scrollTop(0).scrollLeft(0))},preload:function(e){var t,n,o=this;o.group.length<2||(n=o.slides[o.currPos+1],(t=o.slides[o.currPos-1])&&t.type===e&&o.loadSlide(t),n&&n.type===e&&o.loadSlide(n))},focus:function(e,o){var i,s,a=this,r=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(",");a.isClosing||((i=(i=!e&&a.current&&a.current.isComplete?a.current.$slide.find("*:visible"+(o?":not(.fancybox-close-small)":"")):a.$refs.container.find("*:visible")).filter(r).filter((function(){return"hidden"!==n(this).css("visibility")&&!n(this).hasClass("disabled")}))).length?(s=i.index(t.activeElement),e&&e.shiftKey?(s<0||0==s)&&(e.preventDefault(),i.eq(i.length-1).trigger("focus")):(s<0||s==i.length-1)&&(e&&e.preventDefault(),i.eq(0).trigger("focus"))):a.$refs.container.trigger("focus"))},activate:function(){var e=this;n(".fancybox-container").each((function(){var t=n(this).data("FancyBox");t&&t.id!==e.id&&!t.isClosing&&(t.trigger("onDeactivate"),t.removeEvents(),t.isVisible=!1)})),e.isVisible=!0,(e.current||e.isIdle)&&(e.update(),e.updateControls()),e.trigger("onActivate"),e.addEvents()},close:function(e,t){var o,i,s,a,r,l,d,u=this,p=u.current,f=function(){u.cleanUp(e)};return!(u.isClosing||(u.isClosing=!0,!1===u.trigger("beforeClose",e)?(u.isClosing=!1,c((function(){u.update()})),1):(u.removeEvents(),s=p.$content,o=p.opts.animationEffect,i=n.isNumeric(t)?t:o?p.opts.animationDuration:0,p.$slide.removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated"),!0!==e?n.fancybox.stop(p.$slide):o=!1,p.$slide.siblings().trigger("onReset").remove(),i&&u.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing").css("transition-duration",i+"ms"),u.hideLoading(p),u.hideControls(!0),u.updateCursor(),"zoom"!==o||s&&i&&"image"===p.type&&!u.isMoved()&&!p.hasError&&(d=u.getThumbPos(p))||(o="fade"),"zoom"===o?(n.fancybox.stop(s),a=n.fancybox.getTranslate(s),l={top:a.top,left:a.left,scaleX:a.width/d.width,scaleY:a.height/d.height,width:d.width,height:d.height},r=p.opts.zoomOpacity,"auto"==r&&(r=Math.abs(p.width/p.height-d.width/d.height)>.1),r&&(d.opacity=0),n.fancybox.setTranslate(s,l),h(s),n.fancybox.animate(s,d,i,f),0):(o&&i?n.fancybox.animate(p.$slide.addClass("fancybox-slide--previous").removeClass("fancybox-slide--current"),"fancybox-animated fancybox-fx-"+o,i,f):!0===e?setTimeout(f,i):f(),0))))},cleanUp:function(t){var o,i,s,a=this,r=a.current.opts.$orig;a.current.$slide.trigger("onReset"),a.$refs.container.empty().remove(),a.trigger("afterClose",t),a.current.opts.backFocus&&(r&&r.length&&r.is(":visible")||(r=a.$trigger),r&&r.length&&(i=e.scrollX,s=e.scrollY,r.trigger("focus"),n("html, body").scrollTop(s).scrollLeft(i))),a.current=null,(o=n.fancybox.getInstance())?o.activate():(n("body").removeClass("fancybox-active compensate-for-scrollbar"),n("#fancybox-style-noscroll").remove())},trigger:function(e,t){var o,i=Array.prototype.slice.call(arguments,1),s=this,a=t&&t.opts?t:s.current;if(a?i.unshift(a):a=s,i.unshift(s),n.isFunction(a.opts[e])&&(o=a.opts[e].apply(a,i)),!1===o)return o;"afterClose"!==e&&s.$refs?s.$refs.container.trigger(e+".fb",i):r.trigger(e+".fb",i)},updateControls:function(){var e=this,o=e.current,i=o.index,s=e.$refs.container,a=e.$refs.caption,r=o.opts.caption;o.$slide.trigger("refresh"),r&&r.length?(e.$caption=a,a.children().eq(0).html(r)):e.$caption=null,e.hasHiddenControls||e.isIdle||e.showControls(),s.find("[data-fancybox-count]").html(e.group.length),s.find("[data-fancybox-index]").html(i+1),s.find("[data-fancybox-prev]").prop("disabled",!o.opts.loop&&i<=0),s.find("[data-fancybox-next]").prop("disabled",!o.opts.loop&&i>=e.group.length-1),"image"===o.type?s.find("[data-fancybox-zoom]").show().end().find("[data-fancybox-download]").attr("href",o.opts.image.src||o.src).show():o.opts.toolbar&&s.find("[data-fancybox-download],[data-fancybox-zoom]").hide(),n(t.activeElement).is(":hidden,[disabled]")&&e.$refs.container.trigger("focus")},hideControls:function(e){var t=["infobar","toolbar","nav"];!e&&this.current.opts.preventCaptionOverlap||t.push("caption"),this.$refs.container.removeClass(t.map((function(e){return"fancybox-show-"+e})).join(" ")),this.hasHiddenControls=!0},showControls:function(){var e=this,t=e.current?e.current.opts:e.opts,n=e.$refs.container;e.hasHiddenControls=!1,e.idleSecondsCounter=0,n.toggleClass("fancybox-show-toolbar",!(!t.toolbar||!t.buttons)).toggleClass("fancybox-show-infobar",!!(t.infobar&&e.group.length>1)).toggleClass("fancybox-show-caption",!!e.$caption).toggleClass("fancybox-show-nav",!!(t.arrows&&e.group.length>1)).toggleClass("fancybox-is-modal",!!t.modal)},toggleControls:function(){this.hasHiddenControls?this.showControls():this.hideControls()}}),n.fancybox={version:"3.5.7",defaults:s,getInstance:function(e){var t=n('.fancybox-container:not(".fancybox-is-closing"):last').data("FancyBox"),o=Array.prototype.slice.call(arguments,1);return t instanceof g&&("string"===n.type(e)?t[e].apply(t,o):"function"===n.type(e)&&e.apply(t,o),t)},open:function(e,t,n){return new g(e,t,n)},close:function(e){var t=this.getInstance();t&&(t.close(),!0===e&&this.close(e))},destroy:function(){this.close(!0),r.add("body").off("click.fb-start","**")},isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),use3d:function(){var n=t.createElement("div");return e.getComputedStyle&&e.getComputedStyle(n)&&e.getComputedStyle(n).getPropertyValue("transform")&&!(t.documentMode&&t.documentMode<11)}(),getTranslate:function(e){var t;return!(!e||!e.length)&&{top:(t=e[0].getBoundingClientRect()).top||0,left:t.left||0,width:t.width,height:t.height,opacity:parseFloat(e.css("opacity"))}},setTranslate:function(e,t){var n="",o={};if(e&&t)return void 0===t.left&&void 0===t.top||(n=(void 0===t.left?e.position().left:t.left)+"px, "+(void 0===t.top?e.position().top:t.top)+"px",n=this.use3d?"translate3d("+n+", 0px)":"translate("+n+")"),void 0!==t.scaleX&&void 0!==t.scaleY?n+=" scale("+t.scaleX+", "+t.scaleY+")":void 0!==t.scaleX&&(n+=" scaleX("+t.scaleX+")"),n.length&&(o.transform=n),void 0!==t.opacity&&(o.opacity=t.opacity),void 0!==t.width&&(o.width=t.width),void 0!==t.height&&(o.height=t.height),e.css(o)},animate:function(e,t,o,i,s){var a,r=this;n.isFunction(o)&&(i=o,o=null),r.stop(e),a=r.getTranslate(e),e.on(u,(function(l){(!l||!l.originalEvent||e.is(l.originalEvent.target)&&"z-index"!=l.originalEvent.propertyName)&&(r.stop(e),n.isNumeric(o)&&e.css("transition-duration",""),n.isPlainObject(t)?void 0!==t.scaleX&&void 0!==t.scaleY&&r.setTranslate(e,{top:t.top,left:t.left,width:a.width*t.scaleX,height:a.height*t.scaleY,scaleX:1,scaleY:1}):!0!==s&&e.removeClass(t),n.isFunction(i)&&i(l))})),n.isNumeric(o)&&e.css("transition-duration",o+"ms"),n.isPlainObject(t)?(void 0!==t.scaleX&&void 0!==t.scaleY&&(delete t.width,delete t.height,e.parent().hasClass("fancybox-slide--image")&&e.parent().addClass("fancybox-is-scaling")),n.fancybox.setTranslate(e,t)):e.addClass(t),e.data("timer",setTimeout((function(){e.trigger(u)}),o+33))},stop:function(e,t){e&&e.length&&(clearTimeout(e.data("timer")),t&&e.trigger(u),e.off(u).css("transition-duration",""),e.parent().removeClass("fancybox-is-scaling"))}},n.fn.fancybox=function(e){var t;return(t=(e=e||{}).selector||!1)?n("body").off("click.fb-start",t).on("click.fb-start",t,{options:e},i):this.off("click.fb-start").on("click.fb-start",{items:this,options:e},i),this},r.on("click.fb-start","[data-fancybox]",i),r.on("click.fb-start","[data-fancybox-trigger]",(function(e){n('[data-fancybox="'+n(this).attr("data-fancybox-trigger")+'"]').eq(n(this).attr("data-fancybox-index")||0).trigger("click.fb-start",{$trigger:n(this)})})),function(){var e=null;r.on("mousedown mouseup focus blur",".fancybox-button",(function(t){switch(t.type){case"mousedown":e=n(this);break;case"mouseup":e=null;break;case"focusin":n(".fancybox-button").removeClass("fancybox-focus"),n(this).is(e)||n(this).is("[disabled]")||n(this).addClass("fancybox-focus");break;case"focusout":n(".fancybox-button").removeClass("fancybox-focus")}}))}()}}(window,document,jQuery),function(e){"use strict";var t={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"https://www.youtube-nocookie.com/embed/$4",thumb:"https://img.youtube.com/vi/$4/hqdefault.jpg"},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},gmap_place:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(e){return"//maps.google."+e[2]+"/?ll="+(e[9]?e[9]+"&z="+Math.floor(e[10])+(e[12]?e[12].replace(/^\//,"&"):""):e[12]+"").replace(/\?/,"&")+"&output="+(e[12]&&e[12].indexOf("layer=c")>0?"svembed":"embed")}},gmap_search:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,type:"iframe",url:function(e){return"//maps.google."+e[2]+"/maps?q="+e[5].replace("query=","q=").replace("api=1","")+"&output=embed"}}},n=function(t,n,o){if(t)return o=o||"","object"===e.type(o)&&(o=e.param(o,!0)),e.each(n,(function(e,n){t=t.replace("$"+e,n||"")})),o.length&&(t+=(t.indexOf("?")>0?"&":"?")+o),t};e(document).on("objectNeedsType.fb",(function(o,i,s){var a,r,l,c,d,u,h,p=s.src||"",f=!1;a=e.extend(!0,{},t,s.opts.media),e.each(a,(function(t,o){if(l=p.match(o.matcher)){if(f=o.type,h=t,u={},o.paramPlace&&l[o.paramPlace]){"?"==(d=l[o.paramPlace])[0]&&(d=d.substring(1)),d=d.split("&");for(var i=0;i<d.length;++i){var a=d[i].split("=",2);2==a.length&&(u[a[0]]=decodeURIComponent(a[1].replace(/\+/g," ")))}}return c=e.extend(!0,{},o.params,s.opts[t],u),p="function"===e.type(o.url)?o.url.call(this,l,c,s):n(o.url,l,c),r="function"===e.type(o.thumb)?o.thumb.call(this,l,c,s):n(o.thumb,l),"youtube"===t?p=p.replace(/&t=((\d+)m)?(\d+)s/,(function(e,t,n,o){return"&start="+((n?60*parseInt(n,10):0)+parseInt(o,10))})):"vimeo"===t&&(p=p.replace("&%23","#")),!1}})),f?(s.opts.thumb||s.opts.$thumb&&s.opts.$thumb.length||(s.opts.thumb=r),"iframe"===f&&(s.opts=e.extend(!0,s.opts,{iframe:{preload:!1,attr:{scrolling:"no"}}})),e.extend(s,{type:f,src:p,origSrc:s.src,contentSource:h,contentType:"image"===f?"image":"gmap_place"==h||"gmap_search"==h?"map":"video"})):p&&(s.type=s.opts.defaultType)}));var o={youtube:{src:"https://www.youtube.com/iframe_api",class:"YT",loading:!1,loaded:!1},vimeo:{src:"https://player.vimeo.com/api/player.js",class:"Vimeo",loading:!1,loaded:!1},load:function(e){var t,n=this;this[e].loaded?setTimeout((function(){n.done(e)})):this[e].loading||(this[e].loading=!0,(t=document.createElement("script")).type="text/javascript",t.src=this[e].src,"youtube"===e?window.onYouTubeIframeAPIReady=function(){n[e].loaded=!0,n.done(e)}:t.onload=function(){n[e].loaded=!0,n.done(e)},document.body.appendChild(t))},done:function(t){var n,o;"youtube"===t&&delete window.onYouTubeIframeAPIReady,(n=e.fancybox.getInstance())&&(o=n.current.$content.find("iframe"),"youtube"===t&&void 0!==YT&&YT?new YT.Player(o.attr("id"),{events:{onStateChange:function(e){0==e.data&&n.next()}}}):"vimeo"===t&&void 0!==Vimeo&&Vimeo&&new Vimeo.Player(o).on("ended",(function(){n.next()})))}};e(document).on({"afterShow.fb":function(e,t,n){t.group.length>1&&("youtube"===n.contentSource||"vimeo"===n.contentSource)&&o.load(n.contentSource)}})}(jQuery),function(e,t,n){"use strict";var o=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||function(t){return e.setTimeout(t,1e3/60)},i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.oCancelAnimationFrame||function(t){e.clearTimeout(t)},s=function(t){var n=[];for(var o in t=(t=t.originalEvent||t||e.e).touches&&t.touches.length?t.touches:t.changedTouches&&t.changedTouches.length?t.changedTouches:[t])t[o].pageX?n.push({x:t[o].pageX,y:t[o].pageY}):t[o].clientX&&n.push({x:t[o].clientX,y:t[o].clientY});return n},a=function(e,t,n){return t&&e?"x"===n?e.x-t.x:"y"===n?e.y-t.y:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):0},r=function(e){if(e.is('a,area,button,[role="button"],input,label,select,summary,textarea,video,audio,iframe')||n.isFunction(e.get(0).onclick)||e.data("selectable"))return!0;for(var t=0,o=e[0].attributes,i=o.length;t<i;t++)if("data-fancybox-"===o[t].nodeName.substr(0,14))return!0;return!1},l=function(t){var n=e.getComputedStyle(t)["overflow-y"],o=e.getComputedStyle(t)["overflow-x"],i=("scroll"===n||"auto"===n)&&t.scrollHeight>t.clientHeight,s=("scroll"===o||"auto"===o)&&t.scrollWidth>t.clientWidth;return i||s},c=function(e){for(var t=!1;!(t=l(e.get(0)))&&((e=e.parent()).length&&!e.hasClass("fancybox-stage")&&!e.is("body")););return t},d=function(e){var t=this;t.instance=e,t.$bg=e.$refs.bg,t.$stage=e.$refs.stage,t.$container=e.$refs.container,t.destroy(),t.$container.on("touchstart.fb.touch mousedown.fb.touch",n.proxy(t,"ontouchstart"))};d.prototype.destroy=function(){var e=this;e.$container.off(".fb.touch"),n(t).off(".fb.touch"),e.requestId&&(i(e.requestId),e.requestId=null),e.tapped&&(clearTimeout(e.tapped),e.tapped=null)},d.prototype.ontouchstart=function(o){var i=this,l=n(o.target),d=i.instance,u=d.current,h=u.$slide,p=u.$content,f="touchstart"==o.type;if(f&&i.$container.off("mousedown.fb.touch"),(!o.originalEvent||2!=o.originalEvent.button)&&h.length&&l.length&&!r(l)&&!r(l.parent())&&(l.is("img")||!(o.originalEvent.clientX>l[0].clientWidth+l.offset().left))){if(!u||d.isAnimating||u.$slide.hasClass("fancybox-animated"))return o.stopPropagation(),void o.preventDefault();i.realPoints=i.startPoints=s(o),i.startPoints.length&&(u.touch&&o.stopPropagation(),i.startEvent=o,i.canTap=!0,i.$target=l,i.$content=p,i.opts=u.opts.touch,i.isPanning=!1,i.isSwiping=!1,i.isZooming=!1,i.isScrolling=!1,i.canPan=d.canPan(),i.startTime=(new Date).getTime(),i.distanceX=i.distanceY=i.distance=0,i.canvasWidth=Math.round(h[0].clientWidth),i.canvasHeight=Math.round(h[0].clientHeight),i.contentLastPos=null,i.contentStartPos=n.fancybox.getTranslate(i.$content)||{top:0,left:0},i.sliderStartPos=n.fancybox.getTranslate(h),i.stagePos=n.fancybox.getTranslate(d.$refs.stage),i.sliderStartPos.top-=i.stagePos.top,i.sliderStartPos.left-=i.stagePos.left,i.contentStartPos.top-=i.stagePos.top,i.contentStartPos.left-=i.stagePos.left,n(t).off(".fb.touch").on(f?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",n.proxy(i,"ontouchend")).on(f?"touchmove.fb.touch":"mousemove.fb.touch",n.proxy(i,"ontouchmove")),n.fancybox.isMobile&&t.addEventListener("scroll",i.onscroll,!0),((i.opts||i.canPan)&&(l.is(i.$stage)||i.$stage.find(l).length)||(l.is(".fancybox-image")&&o.preventDefault(),n.fancybox.isMobile&&l.parents(".fancybox-caption").length))&&(i.isScrollable=c(l)||c(l.parent()),n.fancybox.isMobile&&i.isScrollable||o.preventDefault(),(1===i.startPoints.length||u.hasError)&&(i.canPan?(n.fancybox.stop(i.$content),i.isPanning=!0):i.isSwiping=!0,i.$container.addClass("fancybox-is-grabbing")),2===i.startPoints.length&&"image"===u.type&&(u.isLoaded||u.$ghost)&&(i.canTap=!1,i.isSwiping=!1,i.isPanning=!1,i.isZooming=!0,n.fancybox.stop(i.$content),i.centerPointStartX=.5*(i.startPoints[0].x+i.startPoints[1].x)-n(e).scrollLeft(),i.centerPointStartY=.5*(i.startPoints[0].y+i.startPoints[1].y)-n(e).scrollTop(),i.percentageOfImageAtPinchPointX=(i.centerPointStartX-i.contentStartPos.left)/i.contentStartPos.width,i.percentageOfImageAtPinchPointY=(i.centerPointStartY-i.contentStartPos.top)/i.contentStartPos.height,i.startDistanceBetweenFingers=a(i.startPoints[0],i.startPoints[1]))))}},d.prototype.onscroll=function(e){this.isScrolling=!0,t.removeEventListener("scroll",this.onscroll,!0)},d.prototype.ontouchmove=function(e){var t=this;return void 0!==e.originalEvent.buttons&&0===e.originalEvent.buttons?void t.ontouchend(e):t.isScrolling?void(t.canTap=!1):(t.newPoints=s(e),void((t.opts||t.canPan)&&t.newPoints.length&&t.newPoints.length&&(t.isSwiping&&!0===t.isSwiping||e.preventDefault(),t.distanceX=a(t.newPoints[0],t.startPoints[0],"x"),t.distanceY=a(t.newPoints[0],t.startPoints[0],"y"),t.distance=a(t.newPoints[0],t.startPoints[0]),t.distance>0&&(t.isSwiping?t.onSwipe(e):t.isPanning?t.onPan():t.isZooming&&t.onZoom()))))},d.prototype.onSwipe=function(t){var s,a=this,r=a.instance,l=a.isSwiping,c=a.sliderStartPos.left||0;if(!0!==l)"x"==l&&(a.distanceX>0&&(a.instance.group.length<2||0===a.instance.current.index&&!a.instance.current.opts.loop)?c+=Math.pow(a.distanceX,.8):a.distanceX<0&&(a.instance.group.length<2||a.instance.current.index===a.instance.group.length-1&&!a.instance.current.opts.loop)?c-=Math.pow(-a.distanceX,.8):c+=a.distanceX),a.sliderLastPos={top:"x"==l?0:a.sliderStartPos.top+a.distanceY,left:c},a.requestId&&(i(a.requestId),a.requestId=null),a.requestId=o((function(){a.sliderLastPos&&(n.each(a.instance.slides,(function(e,t){var o=t.pos-a.instance.currPos;n.fancybox.setTranslate(t.$slide,{top:a.sliderLastPos.top,left:a.sliderLastPos.left+o*a.canvasWidth+o*t.opts.gutter})})),a.$container.addClass("fancybox-is-sliding"))}));else if(Math.abs(a.distance)>10){if(a.canTap=!1,r.group.length<2&&a.opts.vertical?a.isSwiping="y":r.isDragging||!1===a.opts.vertical||"auto"===a.opts.vertical&&n(e).width()>800?a.isSwiping="x":(s=Math.abs(180*Math.atan2(a.distanceY,a.distanceX)/Math.PI),a.isSwiping=s>45&&s<135?"y":"x"),"y"===a.isSwiping&&n.fancybox.isMobile&&a.isScrollable)return void(a.isScrolling=!0);r.isDragging=a.isSwiping,a.startPoints=a.newPoints,n.each(r.slides,(function(e,t){var o,i;n.fancybox.stop(t.$slide),o=n.fancybox.getTranslate(t.$slide),i=n.fancybox.getTranslate(r.$refs.stage),t.$slide.css({transform:"",opacity:"","transition-duration":""}).removeClass("fancybox-animated").removeClass((function(e,t){return(t.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")})),t.pos===r.current.pos&&(a.sliderStartPos.top=o.top-i.top,a.sliderStartPos.left=o.left-i.left),n.fancybox.setTranslate(t.$slide,{top:o.top-i.top,left:o.left-i.left})})),r.SlideShow&&r.SlideShow.isActive&&r.SlideShow.stop()}},d.prototype.onPan=function(){var e=this;a(e.newPoints[0],e.realPoints[0])<(n.fancybox.isMobile?10:5)?e.startPoints=e.newPoints:(e.canTap=!1,e.contentLastPos=e.limitMovement(),e.requestId&&i(e.requestId),e.requestId=o((function(){n.fancybox.setTranslate(e.$content,e.contentLastPos)})))},d.prototype.limitMovement=function(){var e,t,n,o,i,s,a=this,r=a.canvasWidth,l=a.canvasHeight,c=a.distanceX,d=a.distanceY,u=a.contentStartPos,h=u.left,p=u.top,f=u.width,g=u.height;return i=f>r?h+c:h,s=p+d,e=Math.max(0,.5*r-.5*f),t=Math.max(0,.5*l-.5*g),n=Math.min(r-f,.5*r-.5*f),o=Math.min(l-g,.5*l-.5*g),c>0&&i>e&&(i=e-1+Math.pow(-e+h+c,.8)||0),c<0&&i<n&&(i=n+1-Math.pow(n-h-c,.8)||0),d>0&&s>t&&(s=t-1+Math.pow(-t+p+d,.8)||0),d<0&&s<o&&(s=o+1-Math.pow(o-p-d,.8)||0),{top:s,left:i}},d.prototype.limitPosition=function(e,t,n,o){var i=this.canvasWidth,s=this.canvasHeight;return n>i?e=(e=e>0?0:e)<i-n?i-n:e:e=Math.max(0,i/2-n/2),o>s?t=(t=t>0?0:t)<s-o?s-o:t:t=Math.max(0,s/2-o/2),{top:t,left:e}},d.prototype.onZoom=function(){var t=this,s=t.contentStartPos,r=s.width,l=s.height,c=s.left,d=s.top,u=a(t.newPoints[0],t.newPoints[1])/t.startDistanceBetweenFingers,h=Math.floor(r*u),p=Math.floor(l*u),f=(r-h)*t.percentageOfImageAtPinchPointX,g=(l-p)*t.percentageOfImageAtPinchPointY,m=(t.newPoints[0].x+t.newPoints[1].x)/2-n(e).scrollLeft(),v=(t.newPoints[0].y+t.newPoints[1].y)/2-n(e).scrollTop(),b=m-t.centerPointStartX,y={top:d+(g+(v-t.centerPointStartY)),left:c+(f+b),scaleX:u,scaleY:u};t.canTap=!1,t.newWidth=h,t.newHeight=p,t.contentLastPos=y,t.requestId&&i(t.requestId),t.requestId=o((function(){n.fancybox.setTranslate(t.$content,t.contentLastPos)}))},d.prototype.ontouchend=function(e){var o=this,a=o.isSwiping,r=o.isPanning,l=o.isZooming,c=o.isScrolling;if(o.endPoints=s(e),o.dMs=Math.max((new Date).getTime()-o.startTime,1),o.$container.removeClass("fancybox-is-grabbing"),n(t).off(".fb.touch"),t.removeEventListener("scroll",o.onscroll,!0),o.requestId&&(i(o.requestId),o.requestId=null),o.isSwiping=!1,o.isPanning=!1,o.isZooming=!1,o.isScrolling=!1,o.instance.isDragging=!1,o.canTap)return o.onTap(e);o.speed=100,o.velocityX=o.distanceX/o.dMs*.5,o.velocityY=o.distanceY/o.dMs*.5,r?o.endPanning():l?o.endZooming():o.endSwiping(a,c)},d.prototype.endSwiping=function(e,t){var o=this,i=!1,s=o.instance.group.length,a=Math.abs(o.distanceX),r="x"==e&&s>1&&(o.dMs>130&&a>10||a>50);o.sliderLastPos=null,"y"==e&&!t&&Math.abs(o.distanceY)>50?(n.fancybox.animate(o.instance.current.$slide,{top:o.sliderStartPos.top+o.distanceY+150*o.velocityY,opacity:0},200),i=o.instance.close(!0,250)):r&&o.distanceX>0?i=o.instance.previous(300):r&&o.distanceX<0&&(i=o.instance.next(300)),!1!==i||"x"!=e&&"y"!=e||o.instance.centerSlide(200),o.$container.removeClass("fancybox-is-sliding")},d.prototype.endPanning=function(){var e,t,o,i=this;i.contentLastPos&&(!1===i.opts.momentum||i.dMs>350?(e=i.contentLastPos.left,t=i.contentLastPos.top):(e=i.contentLastPos.left+500*i.velocityX,t=i.contentLastPos.top+500*i.velocityY),(o=i.limitPosition(e,t,i.contentStartPos.width,i.contentStartPos.height)).width=i.contentStartPos.width,o.height=i.contentStartPos.height,n.fancybox.animate(i.$content,o,366))},d.prototype.endZooming=function(){var e,t,o,i,s=this,a=s.instance.current,r=s.newWidth,l=s.newHeight;s.contentLastPos&&(e=s.contentLastPos.left,i={top:t=s.contentLastPos.top,left:e,width:r,height:l,scaleX:1,scaleY:1},n.fancybox.setTranslate(s.$content,i),r<s.canvasWidth&&l<s.canvasHeight?s.instance.scaleToFit(150):r>a.width||l>a.height?s.instance.scaleToActual(s.centerPointStartX,s.centerPointStartY,150):(o=s.limitPosition(e,t,r,l),n.fancybox.animate(s.$content,o,150)))},d.prototype.onTap=function(t){var o,i=this,a=n(t.target),r=i.instance,l=r.current,c=t&&s(t)||i.startPoints,d=c[0]?c[0].x-n(e).scrollLeft()-i.stagePos.left:0,u=c[0]?c[0].y-n(e).scrollTop()-i.stagePos.top:0,h=function(e){var o=l.opts[e];if(n.isFunction(o)&&(o=o.apply(r,[l,t])),o)switch(o){case"close":r.close(i.startEvent);break;case"toggleControls":r.toggleControls();break;case"next":r.next();break;case"nextOrClose":r.group.length>1?r.next():r.close(i.startEvent);break;case"zoom":"image"==l.type&&(l.isLoaded||l.$ghost)&&(r.canPan()?r.scaleToFit():r.isScaledDown()?r.scaleToActual(d,u):r.group.length<2&&r.close(i.startEvent))}};if((!t.originalEvent||2!=t.originalEvent.button)&&(a.is("img")||!(d>a[0].clientWidth+a.offset().left))){if(a.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container"))o="Outside";else if(a.is(".fancybox-slide"))o="Slide";else{if(!r.current.$content||!r.current.$content.find(a).addBack().filter(a).length)return;o="Content"}if(i.tapped){if(clearTimeout(i.tapped),i.tapped=null,Math.abs(d-i.tapX)>50||Math.abs(u-i.tapY)>50)return this;h("dblclick"+o)}else i.tapX=d,i.tapY=u,l.opts["dblclick"+o]&&l.opts["dblclick"+o]!==l.opts["click"+o]?i.tapped=setTimeout((function(){i.tapped=null,r.isAnimating||h("click"+o)}),500):h("click"+o);return this}},n(t).on("onActivate.fb",(function(e,t){t&&!t.Guestures&&(t.Guestures=new d(t))})).on("beforeClose.fb",(function(e,t){t&&t.Guestures&&t.Guestures.destroy()}))}(window,document,jQuery),function(e,t){"use strict";t.extend(!0,t.fancybox.defaults,{btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 5.4v13.2l11-6.6z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.33 5.75h2.2v12.5h-2.2V5.75zm5.15 0h2.2v12.5h-2.2V5.75z"/></svg></button>'},slideShow:{autoStart:!1,speed:3e3,progress:!0}});var n=function(e){this.instance=e,this.init()};t.extend(n.prototype,{timer:null,isActive:!1,$button:null,init:function(){var e=this,n=e.instance,o=n.group[n.currIndex].opts.slideShow;e.$button=n.$refs.toolbar.find("[data-fancybox-play]").on("click",(function(){e.toggle()})),n.group.length<2||!o?e.$button.hide():o.progress&&(e.$progress=t('<div class="fancybox-progress"></div>').appendTo(n.$refs.inner))},set:function(e){var n=this,o=n.instance,i=o.current;i&&(!0===e||i.opts.loop||o.currIndex<o.group.length-1)?n.isActive&&"video"!==i.contentType&&(n.$progress&&t.fancybox.animate(n.$progress.show(),{scaleX:1},i.opts.slideShow.speed),n.timer=setTimeout((function(){o.current.opts.loop||o.current.index!=o.group.length-1?o.next():o.jumpTo(0)}),i.opts.slideShow.speed)):(n.stop(),o.idleSecondsCounter=0,o.showControls())},clear:function(){var e=this;clearTimeout(e.timer),e.timer=null,e.$progress&&e.$progress.removeAttr("style").hide()},start:function(){var e=this,t=e.instance.current;t&&(e.$button.attr("title",(t.opts.i18n[t.opts.lang]||t.opts.i18n.en).PLAY_STOP).removeClass("fancybox-button--play").addClass("fancybox-button--pause"),e.isActive=!0,t.isComplete&&e.set(!0),e.instance.trigger("onSlideShowChange",!0))},stop:function(){var e=this,t=e.instance.current;e.clear(),e.$button.attr("title",(t.opts.i18n[t.opts.lang]||t.opts.i18n.en).PLAY_START).removeClass("fancybox-button--pause").addClass("fancybox-button--play"),e.isActive=!1,e.instance.trigger("onSlideShowChange",!1),e.$progress&&e.$progress.removeAttr("style").hide()},toggle:function(){var e=this;e.isActive?e.stop():e.start()}}),t(e).on({"onInit.fb":function(e,t){t&&!t.SlideShow&&(t.SlideShow=new n(t))},"beforeShow.fb":function(e,t,n,o){var i=t&&t.SlideShow;o?i&&n.opts.slideShow.autoStart&&i.start():i&&i.isActive&&i.clear()},"afterShow.fb":function(e,t,n){var o=t&&t.SlideShow;o&&o.isActive&&o.set()},"afterKeydown.fb":function(n,o,i,s,a){var r=o&&o.SlideShow;!r||!i.opts.slideShow||80!==a&&32!==a||t(e.activeElement).is("button,a,input")||(s.preventDefault(),r.toggle())},"beforeClose.fb onDeactivate.fb":function(e,t){var n=t&&t.SlideShow;n&&n.stop()}}),t(e).on("visibilitychange",(function(){var n=t.fancybox.getInstance(),o=n&&n.SlideShow;o&&o.isActive&&(e.hidden?o.clear():o.set())}))}(document,jQuery),function(e,t){"use strict";var n=function(){for(var t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n={},o=0;o<t.length;o++){var i=t[o];if(i&&i[1]in e){for(var s=0;s<i.length;s++)n[t[0][s]]=i[s];return n}}return!1}();if(n){var o={request:function(t){(t=t||e.documentElement)[n.requestFullscreen](t.ALLOW_KEYBOARD_INPUT)},exit:function(){e[n.exitFullscreen]()},toggle:function(t){t=t||e.documentElement,this.isFullscreen()?this.exit():this.request(t)},isFullscreen:function(){return Boolean(e[n.fullscreenElement])},enabled:function(){return Boolean(e[n.fullscreenEnabled])}};t.extend(!0,t.fancybox.defaults,{btnTpl:{fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fsenter" title="{{FULL_SCREEN}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"/></svg></button>'},fullScreen:{autoStart:!1}}),t(e).on(n.fullscreenchange,(function(){var e=o.isFullscreen(),n=t.fancybox.getInstance();n&&(n.current&&"image"===n.current.type&&n.isAnimating&&(n.isAnimating=!1,n.update(!0,!0,0),n.isComplete||n.complete()),n.trigger("onFullscreenChange",e),n.$refs.container.toggleClass("fancybox-is-fullscreen",e),n.$refs.toolbar.find("[data-fancybox-fullscreen]").toggleClass("fancybox-button--fsenter",!e).toggleClass("fancybox-button--fsexit",e))}))}t(e).on({"onInit.fb":function(e,t){n?t&&t.group[t.currIndex].opts.fullScreen?(t.$refs.container.on("click.fb-fullscreen","[data-fancybox-fullscreen]",(function(e){e.stopPropagation(),e.preventDefault(),o.toggle()})),t.opts.fullScreen&&!0===t.opts.fullScreen.autoStart&&o.request(),t.FullScreen=o):t&&t.$refs.toolbar.find("[data-fancybox-fullscreen]").hide():t.$refs.toolbar.find("[data-fancybox-fullscreen]").remove()},"afterKeydown.fb":function(e,t,n,o,i){t&&t.FullScreen&&70===i&&(o.preventDefault(),t.FullScreen.toggle())},"beforeClose.fb":function(e,t){t&&t.FullScreen&&t.$refs.container.hasClass("fancybox-is-fullscreen")&&o.exit()}})}(document,jQuery),function(e,t){"use strict";var n="fancybox-thumbs";t.fancybox.defaults=t.extend(!0,{btnTpl:{thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.59 14.59h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76H5.65V5.65z"/></svg></button>'},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"}},t.fancybox.defaults);var o=function(e){this.init(e)};t.extend(o.prototype,{$button:null,$grid:null,$list:null,isVisible:!1,isActive:!1,init:function(e){var t=this,n=e.group,o=0;t.instance=e,t.opts=n[e.currIndex].opts.thumbs,e.Thumbs=t,t.$button=e.$refs.toolbar.find("[data-fancybox-thumbs]");for(var i=0,s=n.length;i<s&&(n[i].thumb&&o++,!(o>1));i++);o>1&&t.opts?(t.$button.removeAttr("style").on("click",(function(){t.toggle()})),t.isActive=!0):t.$button.hide()},create:function(){var e,o=this,i=o.instance,s=o.opts.parentEl,a=[];o.$grid||(o.$grid=t('<div class="'+n+" "+n+"-"+o.opts.axis+'"></div>').appendTo(i.$refs.container.find(s).addBack().filter(s)),o.$grid.on("click","a",(function(){i.jumpTo(t(this).attr("data-index"))}))),o.$list||(o.$list=t('<div class="'+n+'__list">').appendTo(o.$grid)),t.each(i.group,(function(t,n){(e=n.thumb)||"image"!==n.type||(e=n.src),a.push('<a href="javascript:;" tabindex="0" data-index="'+t+'"'+(e&&e.length?' style="background-image:url('+e+')"':'class="fancybox-thumbs-missing"')+"></a>")})),o.$list[0].innerHTML=a.join(""),"x"===o.opts.axis&&o.$list.width(parseInt(o.$grid.css("padding-right"),10)+i.group.length*o.$list.children().eq(0).outerWidth(!0))},focus:function(e){var t,n,o=this,i=o.$list,s=o.$grid;o.instance.current&&(n=(t=i.children().removeClass("fancybox-thumbs-active").filter('[data-index="'+o.instance.current.index+'"]').addClass("fancybox-thumbs-active")).position(),"y"===o.opts.axis&&(n.top<0||n.top>i.height()-t.outerHeight())?i.stop().animate({scrollTop:i.scrollTop()+n.top},e):"x"===o.opts.axis&&(n.left<s.scrollLeft()||n.left>s.scrollLeft()+(s.width()-t.outerWidth()))&&i.parent().stop().animate({scrollLeft:n.left},e))},update:function(){var e=this;e.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible),e.isVisible?(e.$grid||e.create(),e.instance.trigger("onThumbsShow"),e.focus(0)):e.$grid&&e.instance.trigger("onThumbsHide"),e.instance.update()},hide:function(){this.isVisible=!1,this.update()},show:function(){this.isVisible=!0,this.update()},toggle:function(){this.isVisible=!this.isVisible,this.update()}}),t(e).on({"onInit.fb":function(e,t){var n;t&&!t.Thumbs&&((n=new o(t)).isActive&&!0===n.opts.autoStart&&n.show())},"beforeShow.fb":function(e,t,n,o){var i=t&&t.Thumbs;i&&i.isVisible&&i.focus(o?0:250)},"afterKeydown.fb":function(e,t,n,o,i){var s=t&&t.Thumbs;s&&s.isActive&&71===i&&(o.preventDefault(),s.toggle())},"beforeClose.fb":function(e,t){var n=t&&t.Thumbs;n&&n.isVisible&&!1!==n.opts.hideOnClose&&n.$grid.hide()}})}(document,jQuery),function(e,t){"use strict";t.extend(!0,t.fancybox.defaults,{btnTpl:{share:'<button data-fancybox-share class="fancybox-button fancybox-button--share" title="{{SHARE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.55 19c1.4-8.4 9.1-9.8 11.9-9.8V5l7 7-7 6.3v-3.5c-2.8 0-10.5 2.1-11.9 4.2z"/></svg></button>'},share:{url:function(e,t){return!e.currentHash&&"inline"!==t.type&&"html"!==t.type&&(t.origSrc||t.src)||window.location},tpl:'<div class="fancybox-share"><h1>{{SHARE}}</h1><p><a class="fancybox-share__button fancybox-share__button--fb" href="https://www.facebook.com/sharer/sharer.php?u={{url}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196" /></svg><span>Facebook</span></a><a class="fancybox-share__button fancybox-share__button--tw" href="https://twitter.com/intent/tweet?url={{url}}&text={{descr}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z" /></svg><span>Twitter</span></a><a class="fancybox-share__button fancybox-share__button--pt" href="https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z" fill="#fff"/></svg><span>Pinterest</span></a></p><p><input class="fancybox-share__input" type="text" value="{{url_raw}}" onclick="select()" /></p></div>'}}),t(e).on("click","[data-fancybox-share]",(function(){var e,n,o=t.fancybox.getInstance(),i=o.current||null;i&&("function"===t.type(i.opts.share.url)&&(e=i.opts.share.url.apply(i,[o,i])),n=i.opts.share.tpl.replace(/\{\{media\}\}/g,"image"===i.type?encodeURIComponent(i.src):"").replace(/\{\{url\}\}/g,encodeURIComponent(e)).replace(/\{\{url_raw\}\}/g,function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,(function(e){return t[e]}))}(e)).replace(/\{\{descr\}\}/g,o.$caption?encodeURIComponent(o.$caption.text()):""),t.fancybox.open({src:o.translate(o,n),type:"html",opts:{touch:!1,animationEffect:!1,afterLoad:function(e,t){o.$refs.container.one("beforeClose.fb",(function(){e.close(null,0)})),t.$content.find(".fancybox-share__button").click((function(){return window.open(this.href,"Share","width=550, height=450"),!1}))},mobile:{autoFocus:!1}}}))}))}(document,jQuery),function(e,t,n){"use strict";function o(){var t=e.location.hash.substr(1),n=t.split("-"),o=n.length>1&&/^\+?\d+$/.test(n[n.length-1])&&parseInt(n.pop(-1),10)||1;return{hash:t,index:o<1?1:o,gallery:n.join("-")}}function i(e){""!==e.gallery&&n("[data-fancybox='"+n.escapeSelector(e.gallery)+"']").eq(e.index-1).focus().trigger("click.fb-start")}function s(e){var t,n;return!!e&&(""!==(n=(t=e.current?e.current.opts:e.opts).hash||(t.$orig?t.$orig.data("fancybox")||t.$orig.data("fancybox-trigger"):""))&&n)}n.escapeSelector||(n.escapeSelector=function(e){return(e+"").replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,(function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}))}),n((function(){!1!==n.fancybox.defaults.hash&&(n(t).on({"onInit.fb":function(e,t){var n,i;!1!==t.group[t.currIndex].opts.hash&&(n=o(),(i=s(t))&&n.gallery&&i==n.gallery&&(t.currIndex=n.index-1))},"beforeShow.fb":function(n,o,i,a){var r;i&&!1!==i.opts.hash&&(r=s(o))&&(o.currentHash=r+(o.group.length>1?"-"+(i.index+1):""),e.location.hash!=="#"+o.currentHash&&(a&&!o.origHash&&(o.origHash=e.location.hash),o.hashTimer&&clearTimeout(o.hashTimer),o.hashTimer=setTimeout((function(){"replaceState"in e.history?(e.history[a?"pushState":"replaceState"]({},t.title,e.location.pathname+e.location.search+"#"+o.currentHash),a&&(o.hasCreatedHistory=!0)):e.location.hash=o.currentHash,o.hashTimer=null}),300)))},"beforeClose.fb":function(n,o,i){i&&!1!==i.opts.hash&&(clearTimeout(o.hashTimer),o.currentHash&&o.hasCreatedHistory?e.history.back():o.currentHash&&("replaceState"in e.history?e.history.replaceState({},t.title,e.location.pathname+e.location.search+(o.origHash||"")):e.location.hash=o.origHash),o.currentHash=null)}}),n(e).on("hashchange.fb",(function(){var e=o(),t=null;n.each(n(".fancybox-container").get().reverse(),(function(e,o){var i=n(o).data("FancyBox");if(i&&i.currentHash)return t=i,!1})),t?t.currentHash===e.gallery+"-"+e.index||1===e.index&&t.currentHash==e.gallery||(t.currentHash=null,t.close()):""!==e.gallery&&i(e)})),setTimeout((function(){n.fancybox.getInstance()||i(o())}),50))}))}(window,document,jQuery),function(e,t){"use strict";var n=(new Date).getTime();t(e).on({"onInit.fb":function(e,t,o){t.$refs.stage.on("mousewheel DOMMouseScroll wheel MozMousePixelScroll",(function(e){var o=t.current,i=(new Date).getTime();t.group.length<2||!1===o.opts.wheel||"auto"===o.opts.wheel&&"image"!==o.type||(e.preventDefault(),e.stopPropagation(),o.$slide.hasClass("fancybox-animated")||(e=e.originalEvent||e,i-n<250||(n=i,t[(-e.deltaY||-e.deltaX||e.wheelDelta||-e.detail)<0?"next":"previous"]())))}))}})}(document,jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}((function(e){(C=e&&e.fn&&e.fn.select2&&e.fn.select2.amd?e.fn.select2.amd:C)&&C.requirejs||(C?t=C:C={},r={},l={},c={},d={},u=Object.prototype.hasOwnProperty,h=[].slice,p=/\.js$/,s=function(e,t){var n,o,i=w(e),s=i[0];t=t[1];return e=i[1],s&&(n=y(s=v(s,t))),s?e=n&&n.normalize?n.normalize(e,(o=t,function(e){return v(e,o)})):v(e,t):(s=(i=w(e=v(e,t)))[0],e=i[1],s&&(n=y(s))),{f:s?s+"!"+e:e,n:e,pr:s,p:n}},a={require:function(e){return b(e)},exports:function(e){var t=r[e];return void 0!==t?t:r[e]={}},module:function(e){return{id:e,uri:"",exports:r[e],config:(t=e,function(){return c&&c.config&&c.config[t]||{}})};var t}},o=function(e,t,o,i){var c,u,h,p,f,g=[],v=typeof o,w=x(i=i||e);if("undefined"==v||"function"==v){for(t=!t.length&&o.length?["require","exports","module"]:t,p=0;p<t.length;p+=1)if("require"===(u=(h=s(t[p],w)).f))g[p]=a.require(e);else if("exports"===u)g[p]=a.exports(e),f=!0;else if("module"===u)c=g[p]=a.module(e);else if(m(r,u)||m(l,u)||m(d,u))g[p]=y(u);else{if(!h.p)throw new Error(e+" missing "+u);h.p.load(h.n,b(i,!0),function(e){return function(t){r[e]=t}}(u),{}),g[p]=r[u]}v=o?o.apply(r[e],g):void 0,e&&(c&&c.exports!==n&&c.exports!==r[e]?r[e]=c.exports:v===n&&f||(r[e]=v))}else e&&(r[e]=o)},f=t=i=function(e,t,r,l,d){if("string"==typeof e)return a[e]?a[e](t):y(s(e,x(t)).f);if(!e.splice){if((c=e).deps&&i(c.deps,c.callback),!t)return;t.splice?(e=t,t=r,r=null):e=n}return t=t||function(){},"function"==typeof r&&(r=l,l=d),l?o(n,e,t,r):setTimeout((function(){o(n,e,t,r)}),4),i},i.config=function(e){return i(e)},f._defined=r,(g=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),m(r,e)||m(l,e)||(l[e]=[e,t,n])}).amd={jQuery:!0},C.requirejs=f,C.require=t,C.define=g),C.define("almond",(function(){})),C.define("jquery",[],(function(){var t=e||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t})),C.define("select2/utils",["jquery"],(function(e){var t={};function n(e){var t,n=e.prototype,o=[];for(t in n)"function"==typeof n[t]&&"constructor"!==t&&o.push(t);return o}function o(){this.listeners={}}t.Extend=function(e,t){var n,o={}.hasOwnProperty;function i(){this.constructor=e}for(n in t)o.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},t.Decorate=function(e,t){var o=n(t),i=n(e);function s(){var n=Array.prototype.unshift,o=t.prototype.constructor.length,i=e.prototype.constructor;0<o&&(n.call(arguments,e.prototype.constructor),i=t.prototype.constructor),i.apply(this,arguments)}t.displayName=e.displayName,s.prototype=new function(){this.constructor=s};for(var a=0;a<i.length;a++){var r=i[a];s.prototype[r]=e.prototype[r]}for(var l=0;l<o.length;l++){var c=o[l];s.prototype[c]=function(e){var n=function(){},o=(e in s.prototype&&(n=s.prototype[e]),t.prototype[e]);return function(){return Array.prototype.unshift.call(arguments,n),o.apply(this,arguments)}}(c)}return s},o.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},o.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},0===(n=null==n?[]:n).length&&n.push({}),(n[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},o.prototype.invoke=function(e,t){for(var n=0,o=e.length;n<o;n++)e[n].apply(this,t)},t.Observable=o,t.generateChars=function(e){for(var t="",n=0;n<e;n++)t+=Math.floor(36*Math.random()).toString(36);return t},t.bind=function(e,t){return function(){e.apply(t,arguments)}},t._convertData=function(e){for(var t in e){var n=t.split("-"),o=e;if(1!==n.length){for(var i=0;i<n.length;i++){var s=n[i];(s=s.substring(0,1).toLowerCase()+s.substring(1))in o||(o[s]={}),i==n.length-1&&(o[s]=e[t]),o=o[s]}delete e[t]}}return e},t.hasScroll=function(t,n){var o=e(n),i=n.style.overflowX,s=n.style.overflowY;return(i!==s||"hidden"!==s&&"visible"!==s)&&("scroll"===i||"scroll"===s||o.innerHeight()<n.scrollHeight||o.innerWidth()<n.scrollWidth)},t.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))},t.__cache={};var i=0;return t.GetUniqueElementId=function(e){var n=e.getAttribute("data-select2-id");return null==n&&(n=e.id?"select2-data-"+e.id:"select2-data-"+(++i).toString()+"-"+t.generateChars(4),e.setAttribute("data-select2-id",n)),n},t.StoreData=function(e,n,o){e=t.GetUniqueElementId(e),t.__cache[e]||(t.__cache[e]={}),t.__cache[e][n]=o},t.GetData=function(n,o){var i=t.GetUniqueElementId(n);return o?t.__cache[i]&&null!=t.__cache[i][o]?t.__cache[i][o]:e(n).data(o):t.__cache[i]},t.RemoveData=function(e){var n=t.GetUniqueElementId(e);null!=t.__cache[n]&&delete t.__cache[n],e.removeAttribute("data-select2-id")},t.copyNonInternalCssClasses=function(e,t){var n=(n=e.getAttribute("class").trim().split(/\s+/)).filter((function(e){return 0===e.indexOf("select2-")}));t=(t=t.getAttribute("class").trim().split(/\s+/)).filter((function(e){return 0!==e.indexOf("select2-")})),n=n.concat(t);e.setAttribute("class",n.join(" "))},t})),C.define("select2/results",["jquery","./utils"],(function(e,t){function n(e,t,o){this.$element=e,this.data=o,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var n=this.options.get("escapeMarkup"),o=(this.clear(),this.hideLoading(),e('<li role="alert" aria-live="assertive" class="select2-results__option"></li>')),i=this.options.get("translations").get(t.message);o.append(n(i(t.args))),o[0].className+=" select2-results__message",this.$results.append(o)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(e){this.hideLoading();var t=[];if(null==e.results||0===e.results.length)0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"});else{e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var o=e.results[n];o=this.option(o);t.push(o)}this.$results.append(t)}},n.prototype.position=function(e,t){t.find(".select2-results").append(e)},n.prototype.sort=function(e){return this.options.get("sorter")(e)},n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option--selectable"),t=e.filter(".select2-results__option--selected");(0<t.length?t:e).first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var n=this;this.data.current((function(o){var i=o.map((function(e){return e.id.toString()}));n.$results.find(".select2-results__option--selectable").each((function(){var n=e(this),o=t.GetData(this,"data"),s=""+o.id;null!=o.element&&o.element.selected||null==o.element&&-1<i.indexOf(s)?(this.classList.add("select2-results__option--selected"),n.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),n.attr("aria-selected","false"))}))}))},n.prototype.showLoading=function(e){this.hideLoading(),e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},(e=this.option(e)).className+=" loading-results",this.$results.prepend(e)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(n){var o,i=document.createElement("li"),s=(i.classList.add("select2-results__option"),i.classList.add("select2-results__option--selectable"),{role:"option"}),a=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(o in(null!=n.element&&a.call(n.element,":disabled")||null==n.element&&n.disabled)&&(s["aria-disabled"]="true",i.classList.remove("select2-results__option--selectable"),i.classList.add("select2-results__option--disabled")),null==n.id&&i.classList.remove("select2-results__option--selectable"),null!=n._resultId&&(i.id=n._resultId),n.title&&(i.title=n.title),n.children&&(s.role="group",s["aria-label"]=n.text,i.classList.remove("select2-results__option--selectable"),i.classList.add("select2-results__option--group")),s)i.setAttribute(o,s[o]);if(n.children){a=e(i);for(var r=document.createElement("strong"),l=(r.className="select2-results__group",this.template(n,r),[]),c=0;c<n.children.length;c++){var d=n.children[c];d=this.option(d);l.push(d)}var u=e("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});u.append(l),a.append(r),a.append(u)}else this.template(n,i);return t.StoreData(i,"data",n),i},n.prototype.bind=function(n,o){var i=this,s=n.id+"-results";this.$results.attr("id",s),n.on("results:all",(function(e){i.clear(),i.append(e.data),n.isOpen()&&(i.setClasses(),i.highlightFirstItem())})),n.on("results:append",(function(e){i.append(e.data),n.isOpen()&&i.setClasses()})),n.on("query",(function(e){i.hideMessages(),i.showLoading(e)})),n.on("select",(function(){n.isOpen()&&(i.setClasses(),i.options.get("scrollAfterSelect"))&&i.highlightFirstItem()})),n.on("unselect",(function(){n.isOpen()&&(i.setClasses(),i.options.get("scrollAfterSelect"))&&i.highlightFirstItem()})),n.on("open",(function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()})),n.on("close",(function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")})),n.on("results:toggle",(function(){var e=i.getHighlightedResults();0!==e.length&&e.trigger("mouseup")})),n.on("results:select",(function(){var e,n=i.getHighlightedResults();0!==n.length&&(e=t.GetData(n[0],"data"),n.hasClass("select2-results__option--selected")?i.trigger("close",{}):i.trigger("select",{data:e}))})),n.on("results:previous",(function(){var e,t=i.getHighlightedResults(),n=i.$results.find(".select2-results__option--selectable"),o=n.index(t);o<=0||(o-=1,0===t.length&&(o=0),(t=n.eq(o)).trigger("mouseenter"),n=i.$results.offset().top,t=t.offset().top,e=i.$results.scrollTop()+(t-n),0===o?i.$results.scrollTop(0):t-n<0&&i.$results.scrollTop(e))})),n.on("results:next",(function(){var e,t,n=i.getHighlightedResults(),o=i.$results.find(".select2-results__option--selectable");(n=o.index(n)+1)>=o.length||((o=o.eq(n)).trigger("mouseenter"),e=i.$results.offset().top+i.$results.outerHeight(!1),o=o.offset().top+o.outerHeight(!1),t=i.$results.scrollTop()+o-e,0===n?i.$results.scrollTop(0):e<o&&i.$results.scrollTop(t))})),n.on("results:focus",(function(e){e.element[0].classList.add("select2-results__option--highlighted"),e.element[0].setAttribute("aria-selected","true")})),n.on("results:message",(function(e){i.displayMessage(e)})),e.fn.mousewheel&&this.$results.on("mousewheel",(function(e){var t=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-t+e.deltaY;t=0<e.deltaY&&t-e.deltaY<=0,n=e.deltaY<0&&n<=i.$results.height();t?(i.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):n&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),e.preventDefault(),e.stopPropagation())})),this.$results.on("mouseup",".select2-results__option--selectable",(function(n){var o=e(this),s=t.GetData(this,"data");o.hasClass("select2-results__option--selected")?i.options.get("multiple")?i.trigger("unselect",{originalEvent:n,data:s}):i.trigger("close",{originalEvent:n,data:s}):i.trigger("select",{originalEvent:n,data:s})})),this.$results.on("mouseenter",".select2-results__option--selectable",(function(n){var o=t.GetData(this,"data");i.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false"),i.trigger("results:focus",{data:o,element:e(this)})}))},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e,t,n,o,i=this.getHighlightedResults();0!==i.length&&(e=this.$results.find(".select2-results__option--selectable").index(i),t=this.$results.offset().top,o=i.offset().top,n=this.$results.scrollTop()+(o-t),o-=t,n-=2*i.outerHeight(!1),e<=2?this.$results.scrollTop(0):(o>this.$results.outerHeight()||o<0)&&this.$results.scrollTop(n))},n.prototype.template=function(t,n){var o=this.options.get("templateResult"),i=this.options.get("escapeMarkup");null==(o=o(t,n))?n.style.display="none":"string"==typeof o?n.innerHTML=i(o):e(n).append(o)},n})),C.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),C.define("select2/selection/base",["jquery","../utils","../keys"],(function(e,t,n){function o(e,t){this.$element=e,this.options=t,o.__super__.constructor.call(this)}return t.Extend(o,t.Observable),o.prototype.render=function(){var n=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=t.GetData(this.$element[0],"old-tabindex")?this._tabindex=t.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),n.attr("title",this.$element.attr("title")),n.attr("tabindex",this._tabindex),n.attr("aria-disabled","false"),this.$selection=n},o.prototype.bind=function(e,t){var o=this,i=e.id+"-results";this.container=e,this.$selection.on("focus",(function(e){o.trigger("focus",e)})),this.$selection.on("blur",(function(e){o._handleBlur(e)})),this.$selection.on("keydown",(function(e){o.trigger("keypress",e),e.which===n.SPACE&&e.preventDefault()})),e.on("results:focus",(function(e){o.$selection.attr("aria-activedescendant",e.data._resultId)})),e.on("selection:update",(function(e){o.update(e.data)})),e.on("open",(function(){o.$selection.attr("aria-expanded","true"),o.$selection.attr("aria-owns",i),o._attachCloseHandler(e)})),e.on("close",(function(){o.$selection.attr("aria-expanded","false"),o.$selection.removeAttr("aria-activedescendant"),o.$selection.removeAttr("aria-owns"),o.$selection.trigger("focus"),o._detachCloseHandler(e)})),e.on("enable",(function(){o.$selection.attr("tabindex",o._tabindex),o.$selection.attr("aria-disabled","false")})),e.on("disable",(function(){o.$selection.attr("tabindex","-1"),o.$selection.attr("aria-disabled","true")}))},o.prototype._handleBlur=function(t){var n=this;window.setTimeout((function(){document.activeElement==n.$selection[0]||e.contains(n.$selection[0],document.activeElement)||n.trigger("blur",t)}),1)},o.prototype._attachCloseHandler=function(n){e(document.body).on("mousedown.select2."+n.id,(function(n){var o=e(n.target).closest(".select2");e(".select2.select2-container--open").each((function(){this!=o[0]&&t.GetData(this,"element").select2("close")}))}))},o.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},o.prototype.position=function(e,t){t.find(".selection").append(e)},o.prototype.destroy=function(){this._detachCloseHandler(this.container)},o.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o})),C.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(e,t,n,o){function i(){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e[0].classList.add("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},i.prototype.bind=function(e,t){var n=this,o=(i.__super__.bind.apply(this,arguments),e.id+"-container");this.$selection.find(".select2-selection__rendered").attr("id",o).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",o),this.$selection.attr("aria-controls",o),this.$selection.on("mousedown",(function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})})),this.$selection.on("focus",(function(e){})),this.$selection.on("blur",(function(e){})),e.on("focus",(function(t){e.isOpen()||n.$selection.trigger("focus")}))},i.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},i.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},i.prototype.selectionContainer=function(){return e("<span></span>")},i.prototype.update=function(e){var t,n;0===e.length?this.clear():(e=e[0],t=this.$selection.find(".select2-selection__rendered"),n=this.display(e,t),t.empty().append(n),(n=e.title||e.text)?t.attr("title",n):t.removeAttr("title"))},i})),C.define("select2/selection/multiple",["jquery","./base","../utils"],(function(e,t,n){function o(e,t){o.__super__.constructor.apply(this,arguments)}return n.Extend(o,t),o.prototype.render=function(){var e=o.__super__.render.call(this);return e[0].classList.add("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},o.prototype.bind=function(t,i){var s=this,a=(o.__super__.bind.apply(this,arguments),t.id+"-container");this.$selection.find(".select2-selection__rendered").attr("id",a),this.$selection.on("click",(function(e){s.trigger("toggle",{originalEvent:e})})),this.$selection.on("click",".select2-selection__choice__remove",(function(t){var o;s.isDisabled()||(o=e(this).parent(),o=n.GetData(o[0],"data"),s.trigger("unselect",{originalEvent:t,data:o}))})),this.$selection.on("keydown",".select2-selection__choice__remove",(function(e){s.isDisabled()||e.stopPropagation()}))},o.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},o.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},o.prototype.selectionContainer=function(){return e('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;</span></button><span class="select2-selection__choice__display"></span></li>')},o.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],o=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",i=0;i<e.length;i++){var s=e[i],a=this.selectionContainer(),r=this.display(s,a),l=o+n.generateChars(4)+"-",c=(r=((r=(s.id?l+=s.id:l+=n.generateChars(4),a.find(".select2-selection__choice__display").append(r).attr("id",l),s.title||s.text))&&a.attr("title",r),this.options.get("translations").get("removeItem")),a.find(".select2-selection__choice__remove"));c.attr("title",r()),c.attr("aria-label",r()),c.attr("aria-describedby",l),n.StoreData(a[0],"data",s),t.push(a)}this.$selection.find(".select2-selection__rendered").append(t)}},o})),C.define("select2/selection/placeholder",[],(function(){function e(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t?{id:"",text:t}:t},e.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();n.html(this.display(t)),n[0].classList.add("select2-selection__placeholder"),n[0].classList.remove("select2-selection__choice"),t=t.title||t.text||n.text();return this.$selection.find(".select2-selection__rendered").attr("title",t),n},e.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||n)return e.call(this,t);this.clear(),n=this.createPlaceholder(this.placeholder),this.$selection.find(".select2-selection__rendered").append(n)},e})),C.define("select2/selection/allowClear",["jquery","../keys","../utils"],(function(e,t,n){function o(){}return o.prototype.bind=function(e,t,n){var o=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",(function(e){o._handleClear(e)})),t.on("keypress",(function(e){o._handleKeyboardClear(e,t)}))},o.prototype._handleClear=function(e,t){if(!this.isDisabled()){var o=this.$selection.find(".select2-selection__clear");if(0!==o.length){t.stopPropagation();var i=n.GetData(o[0],"data"),s=this.$element.val(),a=(this.$element.val(this.placeholder.id),{data:i});if(this.trigger("clear",a),a.prevented)this.$element.val(s);else{for(var r=0;r<i.length;r++)if(a={data:i[r]},this.trigger("unselect",a),a.prevented)return void this.$element.val(s);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},o.prototype._handleKeyboardClear=function(e,n,o){o.isOpen()||n.which!=t.DELETE&&n.which!=t.BACKSPACE||this._handleClear(n)},o.prototype.update=function(t,o){var i,s;t.call(this,o),this.$selection.find(".select2-selection__clear").remove(),this.$selection[0].classList.remove("select2-selection--clearable"),0<this.$selection.find(".select2-selection__placeholder").length||0===o.length||(t=this.$selection.find(".select2-selection__rendered").attr("id"),i=this.options.get("translations").get("removeAllItems"),(s=e('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;</span></button>')).attr("title",i()),s.attr("aria-label",i()),s.attr("aria-describedby",t),n.StoreData(s[0],"data",o),this.$selection.prepend(s),this.$selection[0].classList.add("select2-selection--clearable"))},o})),C.define("select2/selection/search",["jquery","../utils","../keys"],(function(e,t,n){function o(e,t,n){e.call(this,t,n)}return o.prototype.render=function(t){var n=this.options.get("translations").get("search"),o=e('<span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" ></textarea></span>');this.$searchContainer=o,this.$search=o.find("textarea"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",n()),o=t.call(this);return this._transferTabIndex(),o.append(this.$searchContainer),o},o.prototype.bind=function(e,o,i){var s=this,a=o.id+"-results",r=o.id+"-container",l=(e=(e.call(this,o,i),s.$search.attr("aria-describedby",r),o.on("open",(function(){s.$search.attr("aria-controls",a),s.$search.trigger("focus")})),o.on("close",(function(){s.$search.val(""),s.resizeSearch(),s.$search.removeAttr("aria-controls"),s.$search.removeAttr("aria-activedescendant"),s.$search.trigger("focus")})),o.on("enable",(function(){s.$search.prop("disabled",!1),s._transferTabIndex()})),o.on("disable",(function(){s.$search.prop("disabled",!0)})),o.on("focus",(function(e){s.$search.trigger("focus")})),o.on("results:focus",(function(e){e.data._resultId?s.$search.attr("aria-activedescendant",e.data._resultId):s.$search.removeAttr("aria-activedescendant")})),this.$selection.on("focusin",".select2-search--inline",(function(e){s.trigger("focus",e)})),this.$selection.on("focusout",".select2-search--inline",(function(e){s._handleBlur(e)})),this.$selection.on("keydown",".select2-search--inline",(function(e){var o;e.stopPropagation(),s.trigger("keypress",e),s._keyUpPrevented=e.isDefaultPrevented(),e.which===n.BACKSPACE&&""===s.$search.val()&&0<(o=s.$selection.find(".select2-selection__choice").last()).length&&(o=t.GetData(o[0],"data"),s.searchRemoveChoice(o),e.preventDefault())})),this.$selection.on("click",".select2-search--inline",(function(e){s.$search.val()&&e.stopPropagation()})),document.documentMode))&&e<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(e){l?s.$selection.off("input.search input.searchcheck"):s.$selection.off("keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(e){var t;l&&"input"===e.type?s.$selection.off("input.search input.searchcheck"):(t=e.which)!=n.SHIFT&&t!=n.CTRL&&t!=n.ALT&&t!=n.TAB&&s.handleSearch(e)}))},o.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},o.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},o.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.resizeSearch(),n&&this.$search.trigger("focus")},o.prototype.handleSearch=function(){var e;this.resizeSearch(),this._keyUpPrevented||(e=this.$search.val(),this.trigger("query",{term:e})),this._keyUpPrevented=!1},o.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},o.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="100%";""===this.$search.attr("placeholder")&&(e=.75*(this.$search.val().length+1)+"em"),this.$search.css("width",e)},o})),C.define("select2/selection/selectionCss",["../utils"],(function(e){function t(){}return t.prototype.render=function(t){t=t.call(this);var n=this.options.get("selectionCssClass")||"";return-1!==n.indexOf(":all:")&&(n=n.replace(":all:",""),e.copyNonInternalCssClasses(t[0],this.$element[0])),t.addClass(n),t},t})),C.define("select2/selection/eventRelay",["jquery"],(function(e){function t(){}return t.prototype.bind=function(t,n,o){var i=this,s=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],a=["opening","closing","selecting","unselecting","clearing"];t.call(this,n,o),n.on("*",(function(t,n){var o;-1!==s.indexOf(t)&&(o=e.Event("select2:"+t,{params:n=n||{}}),i.$element.trigger(o),-1!==a.indexOf(t))&&(n.prevented=o.isDefaultPrevented())}))},t})),C.define("select2/translation",["jquery","require"],(function(e,t){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(e){var o;return e in n._cache||(o=t(e),n._cache[e]=o),new n(n._cache[e])},n})),C.define("select2/diacritics",[],(function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OE","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oe","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"'"}})),C.define("select2/data/base",["../utils"],(function(e){function t(e,n){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,n){return t=t.id+"-result-",t+=e.generateChars(4),null!=n.id?t+="-"+n.id.toString():t+="-"+e.generateChars(4),t},t})),C.define("select2/data/select",["./base","../utils","jquery"],(function(e,t,n){function o(e,t){this.$element=e,this.options=t,o.__super__.constructor.call(this)}return t.Extend(o,e),o.prototype.current=function(e){var t=this;e(Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),(function(e){return t.item(n(e))})))},o.prototype.select=function(e){var t,n=this;e.selected=!0,null!=e.element&&"option"===e.element.tagName.toLowerCase()?(e.element.selected=!0,this.$element.trigger("input").trigger("change")):this.$element.prop("multiple")?this.current((function(t){var o=[];(e=[e]).push.apply(e,t);for(var i=0;i<e.length;i++){var s=e[i].id;-1===o.indexOf(s)&&o.push(s)}n.$element.val(o),n.$element.trigger("input").trigger("change")})):(t=e.id,this.$element.val(t),this.$element.trigger("input").trigger("change"))},o.prototype.unselect=function(e){var t=this;this.$element.prop("multiple")&&(e.selected=!1,null!=e.element&&"option"===e.element.tagName.toLowerCase()?(e.element.selected=!1,this.$element.trigger("input").trigger("change")):this.current((function(n){for(var o=[],i=0;i<n.length;i++){var s=n[i].id;s!==e.id&&-1===o.indexOf(s)&&o.push(s)}t.$element.val(o),t.$element.trigger("input").trigger("change")})))},o.prototype.bind=function(e,t){var n=this;(this.container=e).on("select",(function(e){n.select(e.data)})),e.on("unselect",(function(e){n.unselect(e.data)}))},o.prototype.destroy=function(){this.$element.find("*").each((function(){t.RemoveData(this)}))},o.prototype.query=function(e,t){var o=[],i=this;this.$element.children().each((function(){var t;"option"!==this.tagName.toLowerCase()&&"optgroup"!==this.tagName.toLowerCase()||(t=n(this),t=i.item(t),null!==(t=i.matches(e,t))&&o.push(t))})),t({results:o})},o.prototype.addOptions=function(e){this.$element.append(e)},o.prototype.option=function(e){var o;return e.children?(o=document.createElement("optgroup")).label=e.text:void 0!==(o=document.createElement("option")).textContent?o.textContent=e.text:o.innerText=e.text,void 0!==e.id&&(o.value=e.id),e.disabled&&(o.disabled=!0),e.selected&&(o.selected=!0),e.title&&(o.title=e.title),(e=this._normalizeItem(e)).element=o,t.StoreData(o,"data",e),n(o)},o.prototype.item=function(e){var o={};if(null==(o=t.GetData(e[0],"data"))){var i=e[0];if("option"===i.tagName.toLowerCase())o={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if("optgroup"===i.tagName.toLowerCase()){o={text:e.prop("label"),children:[],title:e.prop("title")};for(var s=e.children("option"),a=[],r=0;r<s.length;r++){var l=n(s[r]);l=this.item(l);a.push(l)}o.children=a}(o=this._normalizeItem(o)).element=e[0],t.StoreData(e[0],"data",o)}return o},o.prototype._normalizeItem=function(e){return e!==Object(e)&&(e={id:e,text:e}),null!=(e=n.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),n.extend({},{selected:!1,disabled:!1},e)},o.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},o})),C.define("select2/data/array",["./select","../utils","jquery"],(function(e,t,n){function o(e,t){this._dataToConvert=t.get("data")||[],o.__super__.constructor.call(this,e,t)}return t.Extend(o,e),o.prototype.bind=function(e,t){o.__super__.bind.call(this,e,t),this.addOptions(this.convertToOptions(this._dataToConvert))},o.prototype.select=function(e){var t;0===this.$element.find("option").filter((function(t,n){return n.value==e.id.toString()})).length&&(t=this.option(e),this.addOptions(t)),o.__super__.select.call(this,e)},o.prototype.convertToOptions=function(e){for(var t=this,o=this.$element.find("option"),i=o.map((function(){return t.item(n(this)).id})).get(),s=[],a=0;a<e.length;a++){var r,l,c=this._normalizeItem(e[a]);0<=i.indexOf(c.id)?(r=o.filter(function(e){return function(){return n(this).val()==e.id}}(c)),l=this.item(r),l=n.extend(!0,{},c,l),l=this.option(l),r.replaceWith(l)):(r=this.option(c),c.children&&(l=this.convertToOptions(c.children),r.append(l)),s.push(r))}return s},o})),C.define("select2/data/ajax",["./array","../utils","jquery"],(function(e,t,n){function o(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),o.__super__.constructor.call(this,e,t)}return t.Extend(o,e),o.prototype._applyDefaults=function(e){return n.extend({},{data:function(e){return n.extend({},e,{q:e.term})},transport:function(e,t,o){return(e=n.ajax(e)).then(t),e.fail(o),e}},e,!0)},o.prototype.processResults=function(e){return e},o.prototype.query=function(e,t){var o=this,i=(null!=this._request&&("function"==typeof this._request.abort&&this._request.abort(),this._request=null),n.extend({type:"GET"},this.ajaxOptions));function s(){var n=i.transport(i,(function(n){n=o.processResults(n,e),o.options.get("debug")&&window.console&&console.error&&(n&&n.results&&Array.isArray(n.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),t(n)}),(function(){n&&"status"in n&&(0===n.status||"0"===n.status)||o.trigger("results:message",{message:"errorLoading"})}));o._request=n}"function"==typeof i.url&&(i.url=i.url.call(this.$element,e)),"function"==typeof i.data&&(i.data=i.data.call(this.$element,e)),this.ajaxOptions.delay&&null!=e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(s,this.ajaxOptions.delay)):s()},o})),C.define("select2/data/tags",["jquery"],(function(e){function t(e,t,n){var o,i=n.get("tags");if(void 0!==(o=(void 0!==(o=n.get("createTag"))&&(this.createTag=o),n.get("insertTag")))&&(this.insertTag=o),e.call(this,t,n),Array.isArray(i))for(var s=0;s<i.length;s++){var a=i[s];a=this._normalizeItem(a),a=this.option(a);this.$element.append(a)}}return t.prototype.query=function(e,t,n){var o=this;this._removeOldTags(),null==t.term||null!=t.page?e.call(this,t,n):e.call(this,t,(function e(i,s){for(var a=i.results,r=0;r<a.length;r++){var l=a[r],c=null!=l.children&&!e({results:l.children},!0);if((l.text||"").toUpperCase()===(t.term||"").toUpperCase()||c)return!s&&(i.data=a,void n(i))}if(s)return!0;var d,u=o.createTag(t);null!=u&&((d=o.option(u)).attr("data-select2-tag","true"),o.addOptions([d]),o.insertTag(a,u)),i.results=a,n(i)}))},t.prototype.createTag=function(e,t){return null==t.term||""===(t=t.term.trim())?null:{id:t,text:t}},t.prototype.insertTag=function(e,t,n){t.unshift(n)},t.prototype._removeOldTags=function(t){this.$element.find("option[data-select2-tag]").each((function(){this.selected||e(this).remove()}))},t})),C.define("select2/data/tokenizer",["jquery"],(function(e){function t(e,t,n){var o=n.get("tokenizer");void 0!==o&&(this.tokenizer=o),e.call(this,t,n)}return t.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},t.prototype.query=function(t,n,o){var i=this;n.term=n.term||"";var s=this.tokenizer(n,this.options,(function(t){var n=i._normalizeItem(t);i.$element.find("option").filter((function(){return e(this).val()===n.id})).length||((t=i.option(n)).attr("data-select2-tag",!0),i._removeOldTags(),i.addOptions([t])),i.trigger("select",{data:n})}));s.term!==n.term&&(this.$search.length&&(this.$search.val(s.term),this.$search.trigger("focus")),n.term=s.term),t.call(this,n,o)},t.prototype.tokenizer=function(t,n,o,i){for(var s=o.get("tokenSeparators")||[],a=n.term,r=0,l=this.createTag||function(e){return{id:e.term,text:e.term}};r<a.length;){var c=a[r];-1===s.indexOf(c)?r++:(c=a.substr(0,r),null==(c=l(e.extend({},n,{term:c})))?r++:(i(c),a=a.substr(r+1)||"",r=0))}return{term:a}},t})),C.define("select2/data/minimumInputLength",[],(function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e})),C.define("select2/data/maximumInputLength",[],(function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e})),C.define("select2/data/maximumSelectionLength",[],(function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var o=this;e.call(this,t,n),t.on("select",(function(){o._checkIfMaximumSelected()}))},e.prototype.query=function(e,t,n){var o=this;this._checkIfMaximumSelected((function(){e.call(o,t,n)}))},e.prototype._checkIfMaximumSelected=function(e,t){var n=this;this.current((function(e){e=null!=e?e.length:0,0<n.maximumSelectionLength&&e>=n.maximumSelectionLength?n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):t&&t()}))},e})),C.define("select2/dropdown",["jquery","./utils"],(function(e,t){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n})),C.define("select2/dropdown/search",["jquery"],(function(e){function t(){}return t.prototype.render=function(t){t=t.call(this);var n=this.options.get("translations").get("search"),o=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=o,this.$search=o.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",n()),t.prepend(o),t},t.prototype.bind=function(t,n,o){var i=this,s=n.id+"-results";t.call(this,n,o),this.$search.on("keydown",(function(e){i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented()})),this.$search.on("input",(function(t){e(this).off("keyup")})),this.$search.on("keyup input",(function(e){i.handleSearch(e)})),n.on("open",(function(){i.$search.attr("tabindex",0),i.$search.attr("aria-controls",s),i.$search.trigger("focus"),window.setTimeout((function(){i.$search.trigger("focus")}),0)})),n.on("close",(function(){i.$search.attr("tabindex",-1),i.$search.removeAttr("aria-controls"),i.$search.removeAttr("aria-activedescendant"),i.$search.val(""),i.$search.trigger("blur")})),n.on("focus",(function(){n.isOpen()||i.$search.trigger("focus")})),n.on("results:all",(function(e){null!=e.query.term&&""!==e.query.term||(i.showSearch(e)?i.$searchContainer[0].classList.remove("select2-search--hide"):i.$searchContainer[0].classList.add("select2-search--hide"))})),n.on("results:focus",(function(e){e.data._resultId?i.$search.attr("aria-activedescendant",e.data._resultId):i.$search.removeAttr("aria-activedescendant")}))},t.prototype.handleSearch=function(e){var t;this._keyUpPrevented||(t=this.$search.val(),this.trigger("query",{term:t})),this._keyUpPrevented=!1},t.prototype.showSearch=function(e,t){return!0},t})),C.define("select2/dropdown/hidePlaceholder",[],(function(){function e(e,t,n,o){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,o)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t?{id:"",text:t}:t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),o=t.length-1;0<=o;o--){var i=t[o];this.placeholder.id===i.id&&n.splice(o,1)}return n},e})),C.define("select2/dropdown/infiniteScroll",["jquery"],(function(e){function t(e,t,n,o){this.lastParams={},e.call(this,t,n,o),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},t.prototype.bind=function(e,t,n){var o=this;e.call(this,t,n),t.on("query",(function(e){o.lastParams=e,o.loading=!0})),t.on("query:append",(function(e){o.lastParams=e,o.loading=!0})),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},t.prototype.loadMoreIfNeeded=function(){var t=e.contains(document.documentElement,this.$loadingMore[0]);!this.loading&&t&&(t=this.$results.offset().top+this.$results.outerHeight(!1),this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)<=t+50)&&this.loadMore()},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return t.html(n(this.lastParams)),t},t})),C.define("select2/dropdown/attachBody",["jquery","../utils"],(function(e,t){function n(t,n,o){this.$dropdownParent=e(o.get("dropdownParent")||document.body),t.call(this,n,o)}return n.prototype.bind=function(e,t,n){var o=this;e.call(this,t,n),t.on("open",(function(){o._showDropdown(),o._attachPositioningHandler(t),o._bindContainerResultHandlers(t)})),t.on("close",(function(){o._hideDropdown(),o._detachPositioningHandler(t)})),this.$dropdownContainer.on("mousedown",(function(e){e.stopPropagation()}))},n.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t[0].classList.remove("select2"),t[0].classList.add("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(t){var n=e("<span></span>");t=t.call(this);return n.append(t),this.$dropdownContainer=n},n.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},n.prototype._bindContainerResultHandlers=function(e,t){var n;this._containerResultsHandlersBound||(n=this,t.on("results:all",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("results:append",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("results:message",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("select",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("unselect",(function(){n._positionDropdown(),n._resizeDropdown()})),this._containerResultsHandlersBound=!0)},n.prototype._attachPositioningHandler=function(n,o){var i=this,s="scroll.select2."+o.id,a="resize.select2."+o.id,r=(o="orientationchange.select2."+o.id,this.$container.parents().filter(t.hasScroll));r.each((function(){t.StoreData(this,"select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})})),r.on(s,(function(n){var o=t.GetData(this,"select2-scroll-position");e(this).scrollTop(o.y)})),e(window).on(s+" "+a+" "+o,(function(e){i._positionDropdown(),i._resizeDropdown()}))},n.prototype._detachPositioningHandler=function(n,o){var i="scroll.select2."+o.id,s="resize.select2."+o.id;o="orientationchange.select2."+o.id;this.$container.parents().filter(t.hasScroll).off(i),e(window).off(i+" "+s+" "+o)},n.prototype._positionDropdown=function(){var t=e(window),n=this.$dropdown[0].classList.contains("select2-dropdown--above"),o=this.$dropdown[0].classList.contains("select2-dropdown--below"),i=null,s=((l=this.$container.offset()).bottom=l.top+this.$container.outerHeight(!1),{height:this.$container.outerHeight(!1)});s.top=l.top,s.bottom=l.top+s.height;var a=this.$dropdown.outerHeight(!1),r=t.scrollTop(),l=(t=t.scrollTop()+t.height(),r=r<l.top-a,t=t>l.bottom+a,{left:l.left,top:s.bottom}),c=this.$dropdownParent,d=("static"===c.css("position")&&(c=c.offsetParent()),{top:0,left:0});(e.contains(document.body,c[0])||c[0].isConnected)&&(d=c.offset()),l.top-=d.top,l.left-=d.left,n||o||(i="below"),t||!r||n?!r&&t&&n&&(i="below"):i="above",("above"==i||n&&"below"!==i)&&(l.top=s.top-d.top-a),null!=i&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+i),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+i)),this.$dropdownContainer.css(l)},n.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},n.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n})),C.define("select2/dropdown/minimumResultsForSearch",[],(function(){function e(e,t,n,o){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,o)}return e.prototype.showSearch=function(e,t){return!(function e(t){for(var n=0,o=0;o<t.length;o++){var i=t[o];i.children?n+=e(i.children):n++}return n}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e})),C.define("select2/dropdown/selectOnClose",["../utils"],(function(e){function t(){}return t.prototype.bind=function(e,t,n){var o=this;e.call(this,t,n),t.on("close",(function(e){o._handleSelectOnClose(e)}))},t.prototype._handleSelectOnClose=function(t,n){(!n||null==n.originalSelect2Event||"select"!==(n=n.originalSelect2Event)._type&&"unselect"!==n._type)&&((n=this.getHighlightedResults()).length<1||null!=(n=e.GetData(n[0],"data")).element&&n.element.selected||null==n.element&&n.selected||this.trigger("select",{data:n}))},t})),C.define("select2/dropdown/closeOnSelect",[],(function(){function e(){}return e.prototype.bind=function(e,t,n){var o=this;e.call(this,t,n),t.on("select",(function(e){o._selectTriggered(e)})),t.on("unselect",(function(e){o._selectTriggered(e)}))},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&(n.ctrlKey||n.metaKey)||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e})),C.define("select2/dropdown/dropdownCss",["../utils"],(function(e){function t(){}return t.prototype.render=function(t){t=t.call(this);var n=this.options.get("dropdownCssClass")||"";return-1!==n.indexOf(":all:")&&(n=n.replace(":all:",""),e.copyNonInternalCssClasses(t[0],this.$element[0])),t.addClass(n),t},t})),C.define("select2/dropdown/tagsSearchHighlight",["../utils"],(function(e){function t(){}return t.prototype.highlightFirstItem=function(t){if(0<(n=this.$results.find(".select2-results__option--selectable:not(.select2-results__option--selected)")).length){var n=n.first(),o=e.GetData(n[0],"data").element;if(o&&o.getAttribute&&"true"===o.getAttribute("data-select2-tag"))return void n.trigger("mouseenter")}t.call(this)},t})),C.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t="Please delete "+(e=e.input.length-e.maximum)+" character";return 1!=e&&(t+="s"),t},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}})),C.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],(function(e,t,n,o,i,s,a,r,l,c,d,u,h,p,f,g,m,v,b,y,w,x,C,$,_,k,S,E,A,T,P){function M(){this.reset()}return M.prototype.apply=function(d){null==(d=e.extend(!0,{},this.defaults,d)).dataAdapter&&(null!=d.ajax?d.dataAdapter=f:null!=d.data?d.dataAdapter=p:d.dataAdapter=h,0<d.minimumInputLength&&(d.dataAdapter=c.Decorate(d.dataAdapter,v)),0<d.maximumInputLength&&(d.dataAdapter=c.Decorate(d.dataAdapter,b)),0<d.maximumSelectionLength&&(d.dataAdapter=c.Decorate(d.dataAdapter,y)),d.tags&&(d.dataAdapter=c.Decorate(d.dataAdapter,g)),null==d.tokenSeparators&&null==d.tokenizer||(d.dataAdapter=c.Decorate(d.dataAdapter,m))),null==d.resultsAdapter&&(d.resultsAdapter=t,null!=d.ajax&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,$)),null!=d.placeholder&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,C)),d.selectOnClose&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,S)),d.tags)&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,T)),null==d.dropdownAdapter&&(d.multiple?d.dropdownAdapter=w:(u=c.Decorate(w,x),d.dropdownAdapter=u),0!==d.minimumResultsForSearch&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,k)),d.closeOnSelect&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,E)),null!=d.dropdownCssClass&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,A)),d.dropdownAdapter=c.Decorate(d.dropdownAdapter,_)),null==d.selectionAdapter&&(d.multiple?d.selectionAdapter=o:d.selectionAdapter=n,null!=d.placeholder&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,i)),d.allowClear&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,s)),d.multiple&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,a)),null!=d.selectionCssClass&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,r)),d.selectionAdapter=c.Decorate(d.selectionAdapter,l)),d.language=this._resolveLanguage(d.language),d.language.push("en");for(var u,P=[],M=0;M<d.language.length;M++){var D=d.language[M];-1===P.indexOf(D)&&P.push(D)}return d.language=P,d.translations=this._processTranslations(d.language,d.debug),d},M.prototype.reset=function(){function t(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return u[e]||e}))}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:{},matcher:function n(o,i){if(null==o.term||""===o.term.trim())return i;if(i.children&&0<i.children.length){for(var s=e.extend(!0,{},i),a=i.children.length-1;0<=a;a--)null==n(o,i.children[a])&&s.children.splice(a,1);return 0<s.children.length?s:n(o,s)}var r=t(i.text).toUpperCase(),l=t(o.term).toUpperCase();return-1<r.indexOf(l)?i:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},M.prototype.applyFromElement=function(e,t){var n=e.language,o=this.defaults.language,i=t.prop("lang");t=t.closest("[lang]").prop("lang"),i=Array.prototype.concat.call(this._resolveLanguage(i),this._resolveLanguage(n),this._resolveLanguage(o),this._resolveLanguage(t));return e.language=i,e},M.prototype._resolveLanguage=function(t){if(!t)return[];if(e.isEmptyObject(t))return[];if(e.isPlainObject(t))return[t];for(var n,o=Array.isArray(t)?t:[t],i=[],s=0;s<o.length;s++)i.push(o[s]),"string"==typeof o[s]&&0<o[s].indexOf("-")&&(n=o[s].split("-")[0],i.push(n));return i},M.prototype._processTranslations=function(t,n){for(var o=new d,i=0;i<t.length;i++){var s=new d,a=t[i];if("string"==typeof a)try{s=d.loadPath(a)}catch(t){try{a=this.defaults.amdLanguageBase+a,s=d.loadPath(a)}catch(t){n&&window.console&&console.warn&&console.warn('Select2: The language file for "'+a+'" could not be automatically loaded. A fallback will be used instead.')}}else s=e.isPlainObject(a)?new d(a):a;o.extend(s)}return o},M.prototype.set=function(t,n){var o={};o[e.camelCase(t)]=n,t=c._convertData(o);e.extend(!0,this.defaults,t)},new M})),C.define("select2/options",["jquery","./defaults","./utils"],(function(e,t,n){function o(e,n){this.options=e,null!=n&&this.fromElement(n),null!=n&&(this.options=t.applyFromElement(this.options,n)),this.options=t.apply(this.options)}return o.prototype.fromElement=function(t){var o=["select2"],i=(null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.autocomplete&&t.prop("autocomplete")&&(this.options.autocomplete=t.prop("autocomplete")),null==this.options.dir&&(t.prop("dir")?this.options.dir=t.prop("dir"):t.closest("[dir]").prop("dir")?this.options.dir=t.closest("[dir]").prop("dir"):this.options.dir="ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),n.GetData(t[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),n.StoreData(t[0],"data",n.GetData(t[0],"select2Tags")),n.StoreData(t[0],"tags",!0)),n.GetData(t[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",n.GetData(t[0],"ajaxUrl")),n.StoreData(t[0],"ajax-Url",n.GetData(t[0],"ajaxUrl"))),{});function s(e,t){return t.toUpperCase()}for(var a=0;a<t[0].attributes.length;a++){var r=t[0].attributes[a].name,l="data-";r.substr(0,l.length)==l&&(r=r.substring(l.length),l=n.GetData(t[0],r),i[r.replace(/-([a-z])/g,s)]=l)}e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset&&(i=e.extend(!0,{},t[0].dataset,i));var c,d=e.extend(!0,{},n.GetData(t[0]),i);for(c in d=n._convertData(d))-1<o.indexOf(c)||(e.isPlainObject(this.options[c])?e.extend(this.options[c],d[c]):this.options[c]=d[c]);return this},o.prototype.get=function(e){return this.options[e]},o.prototype.set=function(e,t){this.options[e]=t},o})),C.define("select2/core",["jquery","./options","./utils","./keys"],(function(e,t,n,o){function i(e,o){null!=n.GetData(e[0],"select2")&&n.GetData(e[0],"select2").destroy(),this.$element=e,this.id=this._generateId(e),this.options=new t(o=o||{},e),i.__super__.constructor.call(this);o=e.attr("tabindex")||0,n.StoreData(e[0],"old-tabindex",o),e.attr("tabindex","-1"),o=this.options.get("dataAdapter"),this.dataAdapter=new o(e,this.options),o=this.render();var s=(this._placeContainer(o),this.options.get("selectionAdapter")),a=(s=(this.selection=new s(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,o),this.options.get("dropdownAdapter")),s=(this.dropdown=new s(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,o),this.options.get("resultsAdapter")),this.results=new s(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown),this);this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(e){a.trigger("selection:update",{data:e})})),e[0].classList.add("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),n.StoreData(e[0],"select2",this),e.data("select2",this)}return n.Extend(i,n.Observable),i.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},i.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},i.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t)return null!=(o=this._resolveWidth(e,"style"))?o:this._resolveWidth(e,"element");if("element"==t)return(o=e.outerWidth(!1))<=0?"auto":o+"px";if("style"!=t)return"computedstyle"==t?window.getComputedStyle(e[0]).width:t;var o=e.attr("style");if("string"==typeof o)for(var i=o.split(";"),s=0,a=i.length;s<a;s+=1){var r=i[s].replace(/\s/g,"").match(n);if(null!==r&&1<=r.length)return r[1]}return null},i.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},i.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",(function(){e.dataAdapter.current((function(t){e.trigger("selection:update",{data:t})}))})),this.$element.on("focus.select2",(function(t){e.trigger("focus",t)})),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this._observer=new window.MutationObserver((function(t){e._syncA(),e._syncS(t)})),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},i.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",(function(t,n){e.trigger(t,n)}))},i.prototype._registerSelectionEvents=function(){var e=this,t=["toggle","focus"];this.selection.on("toggle",(function(){e.toggleDropdown()})),this.selection.on("focus",(function(t){e.focus(t)})),this.selection.on("*",(function(n,o){-1===t.indexOf(n)&&e.trigger(n,o)}))},i.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",(function(t,n){e.trigger(t,n)}))},i.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",(function(t,n){e.trigger(t,n)}))},i.prototype._registerEvents=function(){var e=this;this.on("open",(function(){e.$container[0].classList.add("select2-container--open")})),this.on("close",(function(){e.$container[0].classList.remove("select2-container--open")})),this.on("enable",(function(){e.$container[0].classList.remove("select2-container--disabled")})),this.on("disable",(function(){e.$container[0].classList.add("select2-container--disabled")})),this.on("blur",(function(){e.$container[0].classList.remove("select2-container--focus")})),this.on("query",(function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,(function(n){e.trigger("results:all",{data:n,query:t})}))})),this.on("query:append",(function(t){this.dataAdapter.query(t,(function(n){e.trigger("results:append",{data:n,query:t})}))})),this.on("keypress",(function(t){var n=t.which;e.isOpen()?n===o.ESC||n===o.UP&&t.altKey?(e.close(t),t.preventDefault()):n===o.ENTER||n===o.TAB?(e.trigger("results:select",{}),t.preventDefault()):n===o.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):n===o.UP?(e.trigger("results:previous",{}),t.preventDefault()):n===o.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(n===o.ENTER||n===o.SPACE||n===o.DOWN&&t.altKey)&&(e.open(),t.preventDefault())}))},i.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},i.prototype._isChangeMutation=function(e){var t=this;if(e.addedNodes&&0<e.addedNodes.length){for(var n=0;n<e.addedNodes.length;n++)if(e.addedNodes[n].selected)return!0}else{if(e.removedNodes&&0<e.removedNodes.length)return!0;if(Array.isArray(e))return e.some((function(e){return t._isChangeMutation(e)}))}return!1},i.prototype._syncSubtree=function(e){e=this._isChangeMutation(e);var t=this;e&&this.dataAdapter.current((function(e){t.trigger("selection:update",{data:e})}))},i.prototype.trigger=function(e,t){var n=i.__super__.trigger,o={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===t&&(t={}),e in o){var s={prevented:!1,name:e,args:t};if(n.call(this,o[e],s),s.prevented)return void(t.prevented=!0)}n.call(this,e,t)},i.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},i.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},i.prototype.close=function(e){this.isOpen()&&this.trigger("close",{originalEvent:e})},i.prototype.isEnabled=function(){return!this.isDisabled()},i.prototype.isDisabled=function(){return this.options.get("disabled")},i.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},i.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},i.prototype.focus=function(e){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},i.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),e=!(e=null!=e&&0!==e.length?e:[!0])[0],this.$element.prop("disabled",e)},i.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current((function(t){e=t})),e},i.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();e=e[0],Array.isArray(e)&&(e=e.map((function(e){return e.toString()}))),this.$element.val(e).trigger("input").trigger("change")},i.prototype.destroy=function(){n.RemoveData(this.$container[0]),this.$container.remove(),this._observer.disconnect(),this._observer=null,this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",n.GetData(this.$element[0],"old-tabindex")),this.$element[0].classList.remove("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),n.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},i.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),n.StoreData(t[0],"element",this.$element),t},i})),C.define("select2/dropdown/attachContainer",[],(function(){function e(e,t,n){e.call(this,t,n)}return e.prototype.position=function(e,t,n){n.find(".dropdown-wrapper").append(t),t[0].classList.add("select2-dropdown--below"),n[0].classList.add("select2-container--below")},e})),C.define("select2/dropdown/stopPropagation",[],(function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n),this.$dropdown.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),(function(e){e.stopPropagation()}))},e})),C.define("select2/selection/stopPropagation",[],(function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n),this.$selection.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),(function(e){e.stopPropagation()}))},e})),f=function(e){var t,n,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],s=Array.prototype.slice;if(e.event.fixHooks)for(var a=o.length;a;)e.event.fixHooks[o[--a]]=e.event.mouseHooks;var r=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=i.length;t;)this.addEventListener(i[--t],l,!1);else this.onmousewheel=l;e.data(this,"mousewheel-line-height",r.getLineHeight(this)),e.data(this,"mousewheel-page-height",r.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=i.length;t;)this.removeEventListener(i[--t],l,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=(t=e(t))["offsetParent"in e.fn?"offsetParent":"parent"]();return n.length||(n=e("body")),parseInt(n.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function l(o){var i,a=o||window.event,l=s.call(arguments,1),u=0,h=0,p=0,f=0,g=0;if((o=e.event.fix(a)).type="mousewheel","detail"in a&&(p=-1*a.detail),"wheelDelta"in a&&(p=a.wheelDelta),"wheelDeltaY"in a&&(p=a.wheelDeltaY),"wheelDeltaX"in a&&(h=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(h=-1*p,p=0),u=0===p?h:p,"deltaY"in a&&(u=p=-1*a.deltaY),"deltaX"in a&&(h=a.deltaX,0===p)&&(u=-1*h),0!==p||0!==h)return 1===a.deltaMode?(u*=i=e.data(this,"mousewheel-line-height"),p*=i,h*=i):2===a.deltaMode&&(u*=i=e.data(this,"mousewheel-page-height"),p*=i,h*=i),i=Math.max(Math.abs(p),Math.abs(h)),(!n||i<n)&&d(a,n=i)&&(n/=40),d(a,i)&&(u/=40,h/=40,p/=40),u=Math[1<=u?"floor":"ceil"](u/n),h=Math[1<=h?"floor":"ceil"](h/n),p=Math[1<=p?"floor":"ceil"](p/n),r.settings.normalizeOffset&&this.getBoundingClientRect&&(a=this.getBoundingClientRect(),f=o.clientX-a.left,g=o.clientY-a.top),o.deltaX=h,o.deltaY=p,o.deltaFactor=n,o.offsetX=f,o.offsetY=g,o.deltaMode=0,l.unshift(o,u,h,p),t&&clearTimeout(t),t=setTimeout(c,200),(e.event.dispatch||e.event.handle).apply(this,l)}function c(){n=null}function d(e,t){return r.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})},"function"==typeof C.define&&C.define.amd?C.define("jquery-mousewheel",["jquery"],f):"object"==typeof exports?module.exports=f:f(e),C.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],(function(e,t,n,o,i){var s;return null==e.fn.select2&&(s=["open","close","destroy"],e.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each((function(){var o=e.extend(!0,{},t);new n(e(this),o)})),this;var o,a;if("string"==typeof t)return a=Array.prototype.slice.call(arguments,1),this.each((function(){var e=i.GetData(this,"select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),o=e[t].apply(e,a)})),-1<s.indexOf(t)?this:o;throw new Error("Invalid arguments for Select2: "+t)}),null==e.fn.select2.defaults&&(e.fn.select2.defaults=o),n}));var t,n,o,i,s,a,r,l,c,d,u,h,p,f,g={define:C.define,require:C.require};function m(e,t){return u.call(e,t)}function v(e,t){var n,o,i,s,a,r,l,d,u,h,f=t&&t.split("/"),g=c.map,m=g&&g["*"]||{};if(e){for(t=(e=e.split("/")).length-1,c.nodeIdCompat&&p.test(e[t])&&(e[t]=e[t].replace(p,"")),"."===e[0].charAt(0)&&f&&(e=f.slice(0,f.length-1).concat(e)),d=0;d<e.length;d++)"."===(h=e[d])?(e.splice(d,1),--d):".."!==h||0===d||1===d&&".."===e[2]||".."===e[d-1]||0<d&&(e.splice(d-1,2),d-=2);e=e.join("/")}if((f||m)&&g){for(d=(n=e.split("/")).length;0<d;--d){if(o=n.slice(0,d).join("/"),f)for(u=f.length;0<u;--u)if(i=(i=g[f.slice(0,u).join("/")])&&i[o]){s=i,a=d;break}if(s)break;!r&&m&&m[o]&&(r=m[o],l=d)}!s&&r&&(s=r,a=l),s&&(n.splice(0,a,s),e=n.join("/"))}return e}function b(e,t){return function(){var o=h.call(arguments,0);return"string"!=typeof o[0]&&1===o.length&&o.push(null),i.apply(n,o.concat([e,t]))}}function y(e){var t;if(m(l,e)&&(t=l[e],delete l[e],d[e]=!0,o.apply(n,t)),m(r,e)||m(d,e))return r[e];throw new Error("No "+e)}function w(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function x(e){return e?w(e):[]}var C=g.require("jquery.select2");return e.fn.select2.amd=g,C})),function(e,t,n){"use strict";function o(t,I,q){function O(n){var o=Pe.length;if(Ce.old=e.extend({},Ce),we=ve?0:be[ge.horizontal?"width":"height"](),ke=$e[ge.horizontal?"width":"height"](),xe=ve?t:ye[ge.horizontal?"outerWidth":"outerHeight"](),Pe.length=0,Ce.start=0,Ce.end=M(xe-we,0),Re){De.length,Me=ye.children(ge.itemSelector),De.length=0;var i,s=c(ye,ge.horizontal?"paddingLeft":"paddingTop"),a=c(ye,ge.horizontal?"paddingRight":"paddingBottom"),r="border-box"===e(Me).css("boxSizing"),l="none"!==Me.css("float"),u=0,h=Me.length-1;xe=0,Me.each((function(t,n){var o=e(n),r=n.getBoundingClientRect(),d=P(ge.horizontal?r.width||r.right-r.left:r.height||r.bottom-r.top),p=c(o,ge.horizontal?"marginLeft":"marginTop"),f=c(o,ge.horizontal?"marginRight":"marginBottom"),g=d+p+f,m=!p||!f,v={};v.el=n,v.size=m?d:g,v.half=v.size/2,v.start=xe+(m?p:0),v.center=v.start-P(we/2-v.size/2),v.end=v.start-we+v.size,t||(xe+=s),xe+=g,ge.horizontal||l||f&&p&&t>0&&(xe-=D(p,f)),t===h&&(v.end+=a,xe+=a,u=m?f:0),De.push(v),i=v})),ye[0].style[ge.horizontal?"width":"height"]=(r?xe:xe-s-a)+"px",xe-=u,De.length?(Ce.start=De[0][He?"center":"start"],Ce.end=He?i.center:xe>we?i.end:Ce.start):Ce.start=Ce.end=0}if(Ce.center=P(Ce.end/2+Ce.start/2),X(),_e.length&&ke>0&&(ge.dynamicHandle?(Se=d(Se=Ce.start===Ce.end?ke:P(ke*we/xe),ge.minHandleSize,ke),_e[0].style[ge.horizontal?"width":"height"]=Se+"px"):Se=_e[ge.horizontal?"outerWidth":"outerHeight"](),Ee.end=ke-Se,nt||H()),!ve&&we>0){var p=Ce.start,f="";if(Re)e.each(De,(function(e,t){He?Pe.push(t.center):t.start+t.size>p&&p<=Ce.end&&(p=t.start,Pe.push(p),(p+=we)>Ce.end&&p<Ce.end+we&&Pe.push(Ce.end))}));else for(;p-we<Ce.end;)Pe.push(p),p+=we;if(Ae[0]&&o!==Pe.length){for(var g=0;g<Pe.length;g++)f+=ge.pageBuilder.call(me,g);(Te=Ae.html(f).children()).eq(Le.activePage).addClass(ge.activeClass)}}if(Le.slideeSize=xe,Le.frameSize=we,Le.sbSize=ke,Le.handleSize=Se,Re){n&&null!=ge.startAt&&(N(ge.startAt),me[Fe?"toCenter":"toStart"](ge.startAt));var m=De[Le.activeItem];j(Fe&&m?m.center:d(Ce.dest,Ce.start,Ce.end))}else n?null!=ge.startAt&&j(ge.startAt,1):j(d(Ce.dest,Ce.start,Ce.end));he("load")}function j(e,t,n){if(Re&&et.released&&!n){var o=U(e),i=e>Ce.start&&e<Ce.end;Fe?(i&&(e=De[o.centerItem].center),He&&ge.activateMiddle&&N(o.centerItem)):i&&(e=De[o.firstItem].start)}et.init&&et.slidee&&ge.elasticBounds?e>Ce.end?e=Ce.end+(e-Ce.end)/6:e<Ce.start&&(e=Ce.start+(e-Ce.start)/6):e=d(e,Ce.start,Ce.end),Qe.start=+new Date,Qe.time=0,Qe.from=Ce.cur,Qe.to=e,Qe.delta=e-Ce.cur,Qe.tweesing=et.tweese||et.init&&!et.slidee,Qe.immediate=!Qe.tweesing&&(t||et.init&&et.slidee||!ge.speed),et.tweese=0,e!==Ce.dest&&(Ce.dest=e,he("change"),nt||z()),Z(),X(),G(),Te[0]&&Ke.page!==Le.activePage&&(Ke.page=Le.activePage,Te.removeClass(ge.activeClass).eq(Le.activePage).addClass(ge.activeClass),he("activePage",Ke.page))}function z(){if(me.initialized){if(!nt)return nt=v(z),void(et.released&&he("moveStart"));Qe.immediate?Ce.cur=Qe.to:Qe.tweesing?(Qe.tweeseDelta=Qe.to-Ce.cur,E(Qe.tweeseDelta)<.1?Ce.cur=Qe.to:Ce.cur+=Qe.tweeseDelta*(et.released?ge.swingSpeed:ge.syncSpeed)):(Qe.time=D(+new Date-Qe.start,ge.speed),Ce.cur=Qe.from+Qe.delta*e.easing[ge.easing](Qe.time/ge.speed,Qe.time,0,1,ge.speed)),Qe.to===Ce.cur?(Ce.cur=Qe.to,et.tweese=nt=0):nt=v(z),he("move"),ve||(h?ye[0].style[h]=p+(ge.horizontal?"translateX":"translateY")+"("+-Ce.cur+"px)":ye[0].style[ge.horizontal?"left":"top"]=-P(Ce.cur)+"px"),!nt&&et.released&&he("moveEnd"),H()}}function H(){_e.length&&(Ee.cur=Ce.start===Ce.end?0:((et.init&&!et.slidee?Ce.dest:Ce.cur)-Ce.start)/(Ce.end-Ce.start)*Ee.end,Ee.cur=d(P(Ee.cur),Ee.start,Ee.end),Ke.hPos!==Ee.cur&&(Ke.hPos=Ee.cur,h?_e[0].style[h]=p+(ge.horizontal?"translateX":"translateY")+"("+Ee.cur+"px)":_e[0].style[ge.horizontal?"left":"top"]=Ee.cur+"px"))}function F(){Je.speed&&Ce.cur!==(Je.speed>0?Ce.end:Ce.start)||me.stop(),st=et.init?v(F):0,Je.now=+new Date,Je.pos=Ce.cur+(Je.now-Je.lastTime)/1e3*Je.speed,j(et.init?Je.pos:P(Je.pos)),et.init||Ce.cur!==Ce.dest||he("moveEnd"),Je.lastTime=Je.now}function R(e,t,o){if("boolean"===i(t)&&(o=t,t=n),t===n)j(Ce[e],o);else{if(Fe&&"center"!==e)return;var s=me.getPos(t);s&&j(s[e],o,!Fe)}}function B(e){return null!=e?l(e)?e>=0&&e<De.length?e:-1:Me.index(e):-1}function Y(e){return B(l(e)&&0>e?e+De.length:e)}function N(e,t){var n=B(e);return!(!Re||0>n)&&((Ke.active!==n||t)&&(Me.eq(Le.activeItem).removeClass(ge.activeClass),Me.eq(n).addClass(ge.activeClass),Ke.active=Le.activeItem=n,G(),he("active",n)),n)}function U(e){e=d(l(e)?e:Ce.dest,Ce.start,Ce.end);var t={},n=He?0:we/2;if(!ve)for(var o=0,i=Pe.length;i>o;o++){if(e>=Ce.end||o===Pe.length-1){t.activePage=Pe.length-1;break}if(e<=Pe[o]+n){t.activePage=o;break}}if(Re){for(var s=!1,a=!1,r=!1,c=0,u=De.length;u>c;c++)if(!1===s&&e<=De[c].start+De[c].half&&(s=c),!1===r&&e<=De[c].center+De[c].half&&(r=c),c===u-1||e<=De[c].end+De[c].half){a=c;break}t.firstItem=l(s)?s:0,t.centerItem=l(r)?r:t.firstItem,t.lastItem=l(a)?a:t.centerItem}return t}function X(t){e.extend(Le,U(t))}function G(){var e=Ce.dest<=Ce.start,t=Ce.dest>=Ce.end,n=(e?1:0)|(t?2:0);if(Ke.slideePosState!==n&&(Ke.slideePosState=n,We.is("button,input")&&We.prop("disabled",e),Ve.is("button,input")&&Ve.prop("disabled",t),We.add(Ue)[e?"addClass":"removeClass"](ge.disabledClass),Ve.add(Ne)[t?"addClass":"removeClass"](ge.disabledClass)),Ke.fwdbwdState!==n&&et.released&&(Ke.fwdbwdState=n,Ue.is("button,input")&&Ue.prop("disabled",e),Ne.is("button,input")&&Ne.prop("disabled",t)),Re&&null!=Le.activeItem){var o=0===Le.activeItem,i=Le.activeItem>=De.length-1,s=(o?1:0)|(i?2:0);Ke.itemsButtonState!==s&&(Ke.itemsButtonState=s,Xe.is("button,input")&&Xe.prop("disabled",o),Ge.is("button,input")&&Ge.prop("disabled",i),Xe[o?"addClass":"removeClass"](ge.disabledClass),Ge[i?"addClass":"removeClass"](ge.disabledClass))}}function W(e,t,n){if(e=Y(e),t=Y(t),e>-1&&t>-1&&e!==t&&(!n||t!==e-1)&&(n||t!==e+1)){Me.eq(e)[n?"insertAfter":"insertBefore"](De[t].el);var o=t>e?e:n?t:t-1,i=e>t?e:n?t+1:t,s=e>t;null!=Le.activeItem&&(e===Le.activeItem?Ke.active=Le.activeItem=n?s?t+1:t:s?t:t-1:Le.activeItem>o&&Le.activeItem<i&&(Ke.active=Le.activeItem+=s?1:-1)),O()}}function V(e,t){for(var n=0,o=Ze[e].length;o>n;n++)if(Ze[e][n]===t)return n;return-1}function Z(){et.released&&!me.isPaused&&me.resume()}function K(e){return P(d(e,Ee.start,Ee.end)/Ee.end*(Ce.end-Ce.start))+Ce.start}function Q(){et.history[0]=et.history[1],et.history[1]=et.history[2],et.history[2]=et.history[3],et.history[3]=et.delta}function J(e){et.released=0,et.source=e,et.slidee="slidee"===e}function ee(t){var n="touchstart"===t.type,o=t.data.source,i="slidee"===o;et.init||!n&&oe(t.target)||("handle"!==o||ge.dragHandle&&Ee.start!==Ee.end)&&(!i||(n?ge.touchDragging:ge.mouseDragging&&t.which<2))&&(n||s(t),J(o),et.init=0,et.$source=e(t.target),et.touch=n,et.pointer=n?t.originalEvent.touches[0]:t,et.initX=et.pointer.pageX,et.initY=et.pointer.pageY,et.initPos=i?Ce.cur:Ee.cur,et.start=+new Date,et.time=0,et.path=0,et.delta=0,et.locked=0,et.history=[0,0,0,0],et.pathToLock=i?n?30:10:0,b.on(n?x:w,te),me.pause(1),(i?ye:_e).addClass(ge.draggedClass),he("moveStart"),i&&(ot=setInterval(Q,10)))}function te(e){if(et.released="mouseup"===e.type||"touchend"===e.type,et.pointer=et.touch?e.originalEvent[et.released?"changedTouches":"touches"][0]:e,et.pathX=et.pointer.pageX-et.initX,et.pathY=et.pointer.pageY-et.initY,et.path=A(T(et.pathX,2)+T(et.pathY,2)),et.delta=ge.horizontal?et.pathX:et.pathY,et.released||!(et.path<1)){if(!et.init){if(et.path<ge.dragThreshold)return et.released?ne():n;if(!(ge.horizontal?E(et.pathX)>E(et.pathY):E(et.pathX)<E(et.pathY)))return ne();et.init=1}s(e),!et.locked&&et.path>et.pathToLock&&et.slidee&&(et.locked=1,et.$source.on($,a)),et.released&&(ne(),ge.releaseSwing&&et.slidee&&(et.swing=(et.delta-et.history[0])/40*300,et.delta+=et.swing,et.tweese=E(et.swing)>10)),j(et.slidee?P(et.initPos-et.delta):K(et.initPos+et.delta))}}function ne(){clearInterval(ot),et.released=!0,b.off(et.touch?x:w,te),(et.slidee?ye:_e).removeClass(ge.draggedClass),setTimeout((function(){et.$source.off($,a)})),Ce.cur===Ce.dest&&et.init&&he("moveEnd"),me.resume(1),et.init=0}function oe(t){return~e.inArray(t.nodeName,k)||e(t).is(ge.interactive)}function ie(){me.stop(),b.off("mouseup",ie)}function se(e){switch(s(e),this){case Ne[0]:case Ue[0]:me.moveBy(Ne.is(this)?ge.moveBy:-ge.moveBy),b.on("mouseup",ie);break;case Xe[0]:me.prev();break;case Ge[0]:me.next();break;case We[0]:me.prevPage();break;case Ve[0]:me.nextPage()}}function ae(e){e.originalEvent[g]=me;var t=+new Date;if(L+ge.scrollHijack>t&&Be[0]!==document&&Be[0]!==window)L=t;else if(ge.scrollBy&&Ce.start!==Ce.end){var n=function(e){return tt.curDelta=(ge.horizontal?e.deltaY||e.deltaX:e.deltaY)||-e.wheelDelta,tt.curDelta/=1===e.deltaMode?3:100,Re?(f=+new Date,tt.last<f-tt.resetTime&&(tt.delta=0),tt.last=f,tt.delta+=tt.curDelta,E(tt.delta)<1?tt.finalDelta=0:(tt.finalDelta=P(tt.delta/1),tt.delta%=1),tt.finalDelta):tt.curDelta}(e.originalEvent);(ge.scrollTrap||n>0&&Ce.dest<Ce.end||0>n&&Ce.dest>Ce.start)&&s(e,1),me.slideBy(ge.scrollBy*n)}}function re(e){ge.clickBar&&e.target===$e[0]&&(s(e),j(K((ge.horizontal?e.pageX-$e.offset().left:e.pageY-$e.offset().top)-Se/2)))}function le(e){if(ge.keyboardNavBy)switch(e.which){case ge.horizontal?37:38:s(e),me["pages"===ge.keyboardNavBy?"prevPage":"prev"]();break;case ge.horizontal?39:40:s(e),me["pages"===ge.keyboardNavBy?"nextPage":"next"]()}}function ce(e){return oe(this)?void(e.originalEvent[g+"ignore"]=!0):void(this.parentNode!==ye[0]||e.originalEvent[g+"ignore"]||me.activate(this))}function de(){this.parentNode===Ae[0]&&me.activatePage(Te.index(this))}function ue(e){ge.pauseOnHover&&me["mouseenter"===e.type?"pause":"resume"](2)}function he(e,t){if(Ze[e]){for(fe=Ze[e].length,S.length=0,pe=0;fe>pe;pe++)S.push(Ze[e][pe]);for(pe=0;fe>pe;pe++)S[pe].call(me,e,t)}}if(!(this instanceof o))return new o(t,I,q);var pe,fe,ge=e.extend({},o.defaults,I),me=this,ve=l(t),be=e(t),ye=ge.slidee?e(ge.slidee).eq(0):be.children().eq(0),we=0,xe=0,Ce={start:0,center:0,end:0,cur:0,dest:0},$e=e(ge.scrollBar).eq(0),_e=$e.children().eq(0),ke=0,Se=0,Ee={start:0,end:0,cur:0},Ae=e(ge.pagesBar),Te=0,Pe=[],Me=0,De=[],Le={firstItem:0,lastItem:0,centerItem:0,activeItem:null,activePage:0},Ie=new u(be[0]),qe=new u(ye[0]),Oe=new u($e[0]),je=new u(_e[0]),ze="basic"===ge.itemNav,He="forceCentered"===ge.itemNav,Fe="centered"===ge.itemNav||He,Re=!ve&&(ze||Fe||He),Be=ge.scrollSource?e(ge.scrollSource):be,Ye=ge.dragSource?e(ge.dragSource):be,Ne=e(ge.forward),Ue=e(ge.backward),Xe=e(ge.prev),Ge=e(ge.next),We=e(ge.prevPage),Ve=e(ge.nextPage),Ze={},Ke={},Qe={},Je={},et={released:1},tt={last:0,delta:0,resetTime:200},nt=0,ot=0,it=0,st=0;ve||(t=be[0]),me.initialized=0,me.frame=t,me.slidee=ye[0],me.pos=Ce,me.rel=Le,me.items=De,me.pages=Pe,me.isPaused=0,me.options=ge,me.dragging=et,me.reload=function(){O()},me.getPos=function(e){if(Re){var t=B(e);return-1!==t&&De[t]}var n=ye.find(e).eq(0);if(n[0]){var o=ge.horizontal?n.offset().left-ye.offset().left:n.offset().top-ye.offset().top,i=n[ge.horizontal?"outerWidth":"outerHeight"]();return{start:o,center:o-we/2+i/2,end:o-we+i,size:i}}return!1},me.moveBy=function(e){Je.speed=e,!et.init&&Je.speed&&Ce.cur!==(Je.speed>0?Ce.end:Ce.start)&&(Je.lastTime=+new Date,Je.startPos=Ce.cur,J("button"),et.init=1,he("moveStart"),m(st),F())},me.stop=function(){"button"===et.source&&(et.init=0,et.released=1)},me.prev=function(){me.activate(null==Le.activeItem?0:Le.activeItem-1)},me.next=function(){me.activate(null==Le.activeItem?0:Le.activeItem+1)},me.prevPage=function(){me.activatePage(Le.activePage-1)},me.nextPage=function(){me.activatePage(Le.activePage+1)},me.slideBy=function(e,t){e&&(Re?me[Fe?"toCenter":"toStart"](d((Fe?Le.centerItem:Le.firstItem)+ge.scrollBy*e,0,De.length)):j(Ce.dest+e,t))},me.slideTo=function(e,t){j(e,t)},me.toStart=function(e,t){R("start",e,t)},me.toEnd=function(e,t){R("end",e,t)},me.toCenter=function(e,t){R("center",e,t)},me.getIndex=B,me.activate=function(e,t){var n=N(e);ge.smart&&!1!==n&&(Fe?me.toCenter(n,t):n>=Le.lastItem?me.toStart(n,t):n<=Le.firstItem?me.toEnd(n,t):Z())},me.activatePage=function(e,t){l(e)&&j(Pe[d(e,0,Pe.length-1)],t)},me.resume=function(e){ge.cycleBy&&ge.cycleInterval&&("items"!==ge.cycleBy||De[0]&&null!=Le.activeItem)&&!(e<me.isPaused)&&(me.isPaused=0,it?it=clearTimeout(it):he("resume"),it=setTimeout((function(){switch(he("cycle"),ge.cycleBy){case"items":me.activate(Le.activeItem>=De.length-1?0:Le.activeItem+1);break;case"pages":me.activatePage(Le.activePage>=Pe.length-1?0:Le.activePage+1)}}),ge.cycleInterval))},me.pause=function(e){e<me.isPaused||(me.isPaused=e||100,it&&(it=clearTimeout(it),he("pause")))},me.toggle=function(){me[it?"pause":"resume"]()},me.set=function(t,n){e.isPlainObject(t)?e.extend(ge,t):ge.hasOwnProperty(t)&&(ge[t]=n)},me.add=function(t,n){var o=e(t);Re?(null==n||!De[0]||n>=De.length?o.appendTo(ye):De.length&&o.insertBefore(De[n].el),null!=Le.activeItem&&n<=Le.activeItem&&(Ke.active=Le.activeItem+=o.length)):ye.append(o),O()},me.remove=function(t){if(Re){var n=Y(t);if(n>-1){Me.eq(n).remove();var o=n===Le.activeItem;null!=Le.activeItem&&n<Le.activeItem&&(Ke.active=--Le.activeItem),O(),o&&(Ke.active=null,me.activate(Le.activeItem))}}else e(t).remove(),O()},me.moveAfter=function(e,t){W(e,t,1)},me.moveBefore=function(e,t){W(e,t)},me.on=function(e,t){if("object"===i(e))for(var n in e)e.hasOwnProperty(n)&&me.on(n,e[n]);else if("function"===i(t))for(var o=e.split(" "),s=0,a=o.length;a>s;s++)Ze[o[s]]=Ze[o[s]]||[],-1===V(o[s],t)&&Ze[o[s]].push(t);else if("array"===i(t))for(var r=0,l=t.length;l>r;r++)me.on(e,t[r])},me.one=function(e,t){me.on(e,(function n(){t.apply(me,arguments),me.off(e,n)}))},me.off=function(e,t){if(t instanceof Array)for(var n=0,o=t.length;o>n;n++)me.off(e,t[n]);else for(var i=e.split(" "),s=0,a=i.length;a>s;s++)if(Ze[i[s]]=Ze[i[s]]||[],null==t)Ze[i[s]].length=0;else{var r=V(i[s],t);-1!==r&&Ze[i[s]].splice(r,1)}},me.destroy=function(){return o.removeInstance(t),Be.add(_e).add($e).add(Ae).add(Ne).add(Ue).add(Xe).add(Ge).add(We).add(Ve).off("."+g),b.off("keydown",le),Xe.add(Ge).add(We).add(Ve).removeClass(ge.disabledClass),Me&&null!=Le.activeItem&&Me.eq(Le.activeItem).removeClass(ge.activeClass),Ae.empty(),ve||(be.off("."+g),Ie.restore(),qe.restore(),Oe.restore(),je.restore(),e.removeData(t,g)),De.length=Pe.length=0,Ke={},me.initialized=0,me},me.init=function(){if(!me.initialized){if(o.getInstance(t))throw new Error("There is already a Sly instance on this element");o.storeInstance(t,me),me.on(q);var e=["overflow","position"],n=["position","webkitTransform","msTransform","transform","left","top","width","height"];Ie.save.apply(Ie,e),Oe.save.apply(Oe,e),qe.save.apply(qe,n),je.save.apply(je,n);var i=_e;return ve||(i=i.add(ye),be.css("overflow","hidden"),h||"static"!==be.css("position")||be.css("position","relative")),h?p&&i.css(h,p):("static"===$e.css("position")&&$e.css("position","relative"),i.css({position:"absolute"})),ge.forward&&Ne.on(_,se),ge.backward&&Ue.on(_,se),ge.prev&&Xe.on($,se),ge.next&&Ge.on($,se),ge.prevPage&&We.on($,se),ge.nextPage&&Ve.on($,se),Be.on(C,ae),$e[0]&&$e.on($,re),Re&&ge.activateOn&&be.on(ge.activateOn+"."+g,"*",ce),Ae[0]&&ge.activatePageOn&&Ae.on(ge.activatePageOn+"."+g,"*",de),Ye.on(y,{source:"slidee"},ee),_e&&_e.on(y,{source:"handle"},ee),b.on("keydown",le),ve||(be.on("mouseenter."+g+" mouseleave."+g,ue),be.on("scroll."+g,r)),me.initialized=1,O(!0),ge.cycleBy&&!ve&&me[ge.startPaused?"pause":"resume"](),me}}}function i(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof e}function s(e,t){e.preventDefault(),t&&e.stopPropagation()}function a(t){s(t,1),e(this).off(t.type,a)}function r(){this.scrollLeft=0,this.scrollTop=0}function l(e){return!isNaN(parseFloat(e))&&isFinite(e)}function c(e,t){return 0|P(String(e.css(t)).replace(/[^\-0-9.]/g,""))}function d(e,t,n){return t>e?t:e>n?n:e}function u(e){var t={style:{},save:function(){if(e&&e.nodeType){for(var n=0;n<arguments.length;n++)t.style[arguments[n]]=e.style[arguments[n]];return t}},restore:function(){if(e&&e.nodeType){for(var n in t.style)t.style.hasOwnProperty(n)&&(e.style[n]=t.style[n]);return t}}};return t}var h,p,f,g="sly",m=t.cancelAnimationFrame||t.cancelRequestAnimationFrame,v=t.requestAnimationFrame,b=e(document),y="touchstart."+g+" mousedown."+g,w="mousemove."+g+" mouseup."+g,x="touchmove."+g+" touchend."+g,C=(document.implementation.hasFeature("Event.wheel","3.0")?"wheel.":"mousewheel.")+g,$="click."+g,_="mousedown."+g,k=["INPUT","SELECT","BUTTON","TEXTAREA"],S=[],E=Math.abs,A=Math.sqrt,T=Math.pow,P=Math.round,M=Math.max,D=Math.min,L=0;b.on(C,(function(e){var t=e.originalEvent[g],n=+new Date;(!t||t.options.scrollHijack<n-L)&&(L=n)})),o.getInstance=function(t){return e.data(t,g)},o.storeInstance=function(t,n){return e.data(t,g,n)},o.removeInstance=function(t){return e.removeData(t,g)},function(e){v=e.requestAnimationFrame||e.webkitRequestAnimationFrame||function(e){var n=(new Date).getTime(),o=Math.max(0,16-(n-t)),i=setTimeout(e,o);return t=n,i};var t=(new Date).getTime(),n=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.clearTimeout;m=function(t){n.call(e,t)}}(window),function(){function e(e){for(var o=0,i=t.length;i>o;o++){var s=t[o]?t[o]+e.charAt(0).toUpperCase()+e.slice(1):e;if(null!=n.style[s])return s}}var t=["","Webkit","Moz","ms","O"],n=document.createElement("div");h=e("transform"),p=e("perspective")?"translateZ(0) ":""}(),t.Sly=o,e.fn.sly=function(t,n){var s,a;return e.isPlainObject(t)||(("string"===i(t)||!1===t)&&(s=!1===t?"destroy":t,a=Array.prototype.slice.call(arguments,1)),t={}),this.each((function(e,i){var r=o.getInstance(i);r||s?r&&s&&r[s]&&r[s].apply(r,a):r=new o(i,t,n).init()}))},o.defaults={slidee:null,horizontal:!1,itemNav:null,itemSelector:null,smart:!1,activateOn:null,activateMiddle:!1,scrollSource:null,scrollBy:0,scrollHijack:300,scrollTrap:!1,dragSource:null,mouseDragging:!1,touchDragging:!1,releaseSwing:!1,swingSpeed:.2,elasticBounds:!1,dragThreshold:3,interactive:null,scrollBar:null,dragHandle:!1,dynamicHandle:!1,minHandleSize:50,clickBar:!1,syncSpeed:.5,pagesBar:null,activatePageOn:null,pageBuilder:function(e){return"<li>"+(e+1)+"</li>"},forward:null,backward:null,prev:null,next:null,prevPage:null,nextPage:null,cycleBy:null,cycleInterval:5e3,pauseOnHover:!1,startPaused:!1,moveBy:300,speed:0,easing:"swing",startAt:null,keyboardNavBy:null,draggedClass:"dragged",activeClass:"active",disabledClass:"disabled"}}(jQuery,window);